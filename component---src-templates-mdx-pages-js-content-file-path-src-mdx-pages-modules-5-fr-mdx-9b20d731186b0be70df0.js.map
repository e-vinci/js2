{"version":3,"file":"component---src-templates-mdx-pages-js-content-file-path-src-mdx-pages-modules-5-fr-mdx-9b20d731186b0be70df0.js","mappings":"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","sources":["webpack://myjscourse/./src/mdx-pages/modules/5.fr.mdx","webpack://myjscourse/./src/templates/mdx-pages.js"],"sourcesContent":["/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport {useMDXComponents as _provideComponents} from \"@mdx-js/react\";\nimport React from \"react\";\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h1: \"h1\",\n    p: \"p\",\n    ul: \"ul\",\n    li: \"li\",\n    a: \"a\",\n    h2: \"h2\",\n    br: \"br\",\n    strong: \"strong\",\n    pre: \"pre\",\n    code: \"code\",\n    h3: \"h3\",\n    h4: \"h4\",\n    ol: \"ol\"\n  }, _provideComponents(), props.components), {ScrollableImage} = _components;\n  if (!ScrollableImage) _missingMdxReference(\"ScrollableImage\", true);\n  return React.createElement(React.Fragment, null, React.createElement(_components.h1, null, \"Module 5 : Service web persistant via JSON et architectur√©\"), \"\\n\", React.createElement(_components.p, null, \"Ce module vous offre principalement la persistance des ressources via des fichiers JSON et le refactoring de web services afin de faciliter la maintenabilit√© et la lisibilit√© du code.\"), \"\\n\", React.createElement(_components.p, null, \"Voici les sujets trait√©s :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"a) \", React.createElement(_components.a, {\n    href: \"#a\"\n  }, \"Introduction au JSON et persistance des donn√©es\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"a.1) \", React.createElement(_components.a, {\n    href: \"#a1\"\n  }, \"Introduction g√©n√©rale\")), \"\\n\", React.createElement(_components.li, null, \"a.2) \", React.createElement(_components.a, {\n    href: \"#a2\"\n  }, \"Introduction au JSON\")), \"\\n\", React.createElement(_components.li, null, \"a.3) \", React.createElement(_components.a, {\n    href: \"#a3\"\n  }, \"Communication de donn√©es en JSON\")), \"\\n\", React.createElement(_components.li, null, \"a.4) \", React.createElement(_components.a, {\n    href: \"#a4\"\n  }, \"Sauvegarde de donn√©es JSON\")), \"\\n\"), \"\\n\"), \"\\n\", React.createElement(_components.li, null, \"b) \", React.createElement(_components.a, {\n    href: \"#b\"\n  }, \"Am√©lioration des outils de d√©veloppement\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"b.1) \", React.createElement(_components.a, {\n    href: \"#b1\"\n  }, \"Introduction\")), \"\\n\", React.createElement(_components.li, null, \"b.2) \", React.createElement(_components.a, {\n    href: \"#b2\"\n  }, \"Red√©marrage automatique au changement d'un fichier\")), \"\\n\", React.createElement(_components.li, null, \"b.3) \", React.createElement(_components.a, {\n    href: \"#b3\"\n  }, \"Debugging\")), \"\\n\", React.createElement(_components.li, null, \"b.4) \", React.createElement(_components.a, {\n    href: \"#b4\"\n  }, \"Autres outils de d√©veloppement\")), \"\\n\"), \"\\n\"), \"\\n\", React.createElement(_components.li, null, \"c) \", React.createElement(_components.a, {\n    href: \"#c\"\n  }, \"Exercice 5.1 : Persistance de la RESTfull API pour myMovies\")), \"\\n\", React.createElement(_components.li, null, \"d) \", React.createElement(_components.a, {\n    href: \"#d\"\n  }, \"Refactoring √† l'aide d'un \\\"fat model\\\"\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"d.1) \", React.createElement(_components.a, {\n    href: \"#d1\"\n  }, \"Architectures possibles ?\")), \"\\n\", React.createElement(_components.li, null, \"d.2) \", React.createElement(_components.a, {\n    href: \"#d2\"\n  }, \"Architecture Express & \\\"fat model\\\"\")), \"\\n\"), \"\\n\"), \"\\n\", React.createElement(_components.li, null, \"e) \", React.createElement(_components.a, {\n    href: \"#e\"\n  }, \"Exercice 5.2 : Refactor de la RESTfull API pour myMovies\")), \"\\n\"), \"\\n\", React.createElement(_components.h1, null, React.createElement(\"a\", {\n    id: \"a\"\n  }), \" a) Introduction au JSON et persistance des donn√©es\"), \"\\n\", React.createElement(_components.h2, null, React.createElement(\"a\", {\n    id: \"a1\"\n  }), \" a.1) Introduction g√©n√©rale\"), \"\\n\", React.createElement(_components.p, null, \"Au module 4, nous avons d√©velopp√© notre premi√®re RESTful API.\", React.createElement(_components.br), \"\\n\", \"Nous avons implicitement d√©couvert le JSON, notamment lorsque nous avons fait des requ√™tes vers nos API.\"), \"\\n\", React.createElement(_components.p, null, \"Nous allons maintenant voir ce que permet le JSON, notamment la cr√©ation de fichiers permettant de sauvegarder des donn√©es facilement en JS.\"), \"\\n\", React.createElement(_components.h2, null, React.createElement(\"a\", {\n    id: \"a2\"\n  }), \" a.2) Introduction au JSON\"), \"\\n\", React.createElement(_components.p, null, \"JSON vient de \", React.createElement(_components.strong, null, \"J\"), \"ava\", React.createElement(_components.strong, null, \"S\"), \"cript \", React.createElement(_components.strong, null, \"O\"), \"bject \", React.createElement(_components.strong, null, \"N\"), \"otation.\"), \"\\n\", React.createElement(_components.p, null, \"C'est une syntaxe pour \", React.createElement(_components.strong, null, \"√©changer\"), \" et \", React.createElement(_components.strong, null, \"faire persister des donn√©es\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"Du JSON, c'est du texte en notation JS.\"), \"\\n\", React.createElement(_components.p, null, \"Voici les types de donn√©es qui sont valides en JSON :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"string\")), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"number\")), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"object\")), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"array\")), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"boolean\")), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"null\")), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"‚ö° Il n'y a donc pas de \", React.createElement(_components.strong, null, \"function\"), \", \", React.createElement(_components.strong, null, \"date\"), \" et \", React.createElement(_components.strong, null, \"undefined\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"Voici un exemple de repr√©sentation de donn√©es en JSON qui correspond √† ce que tr√®s souvent une API renvoie, un array d'objets :\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-json\"\n  }, \"[\\r\\n  {\\r\\n    \\\"email\\\": \\\"raphael@voila.com\\\",\\r\\n    \\\"fullname\\\": \\\"Raphael Baroni\\\"\\r\\n  },\\r\\n  {\\r\\n    \\\"email\\\": \\\"jkj@herenqn.com\\\",\\r\\n    \\\"fullname\\\": \\\"JK Roling\\\"\\r\\n  },\\r\\n  {\\r\\n    \\\"email\\\": \\\"serena@gmail.com\\\",\\r\\n    \\\"fullname\\\": \\\"Serena Here\\\"\\r\\n  }\\r\\n]\\n\")), \"\\n\", React.createElement(_components.h2, null, React.createElement(\"a\", {\n    id: \"a3\"\n  }), \" a.3) Communication de donn√©es en JSON\"), \"\\n\", React.createElement(_components.h3, null, \"a.3.1) S√©rialisation d'objets JS vers du JSON\"), \"\\n\", React.createElement(_components.h4, null, \"a.3.1.1) Envoi d'une application serveur vers un client\"), \"\\n\", React.createElement(_components.p, null, \"Via Express, nous pouvons tr√®s facilement convertir un objet JS en JSON afin de l'envoyer vers une application cliente gr√¢ce √† la m√©thode \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"res.json()\")), \".\"), \"\\n\", React.createElement(_components.p, null, \"C'est ce que nous appelons de la s√©rialisation de donn√©es, nous passons du monde \\\"objets en m√©moire\\\" vers du texte (ou des octets) qui vont voyager sur un r√©seau.\"), \"\\n\", React.createElement(_components.p, null, \"Le code actuel de notre RESTful API, renvoyant un array de pizzas au format JSON, est g√©r√© automatiquement via :\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-js\"\n  }, \"res.json(orderedMenu ?? MENU);\\n\")), \"\\n\", React.createElement(_components.p, null, \"Lorsque l'API renvoie \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"MENU\")), \" avec les pizzas par d√©faut, voici le JSON qui voyage sur le r√©seau :\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-json\"\n  }, \"[\\r\\n  {\\r\\n    \\\"id\\\": 1,\\r\\n    \\\"title\\\": \\\"4 fromages\\\",\\r\\n    \\\"content\\\": \\\"Gruy√®re, S√©rac, Appenzel, Gorgonzola, Tomates\\\"\\r\\n  },\\r\\n  {\\r\\n    \\\"id\\\": 2,\\r\\n    \\\"title\\\": \\\"Vegan\\\",\\r\\n    \\\"content\\\": \\\"Tomates, Courgettes, Oignons, Aubergines, Poivrons\\\"\\r\\n  },\\r\\n  {\\r\\n    \\\"id\\\": 3,\\r\\n    \\\"title\\\": \\\"Vegetarian\\\",\\r\\n    \\\"content\\\": \\\"Mozarella, Tomates, Oignons, Poivrons, Champignons, Olives\\\"\\r\\n  },\\r\\n  {\\r\\n    \\\"id\\\": 4,\\r\\n    \\\"title\\\": \\\"Alpage\\\",\\r\\n    \\\"content\\\": \\\"Gruy√®re, Mozarella, Lardons, Tomates\\\"\\r\\n  },\\r\\n  {\\r\\n    \\\"id\\\": 5,\\r\\n    \\\"title\\\": \\\"Diable\\\",\\r\\n    \\\"content\\\": \\\"Tomates, Mozarella, Chorizo piquant, Jalapenos\\\"\\r\\n  }\\r\\n]\\n\")), \"\\n\", React.createElement(_components.p, null, \"üí≠ La puissance du JSON peut d√©j√† s'exprimer ici. Mais comment ?\"), \"\\n\", React.createElement(_components.p, null, \"L'API renvoie un array d'objets, des pizzas, au format JSON, qui correspond en fait √† un format texte avec des conventions.\", React.createElement(_components.br), \"\\n\", \"Il est donc possible √† n'importe quelle application cliente d'utiliser ces donn√©es, quelque soit la technologie, le langage utilis√© pour d√©velopper cette application cliente.\", React.createElement(_components.br), \"\\n\", \"Ainsi, par exemple, une application Android, d√©velopp√©e en Java, pourrait consommer cette API pour afficher un menu de pizzas !\"), \"\\n\", React.createElement(_components.h4, null, \"a.3.1.2) Envoi d'une application cliente vers un serveur\"), \"\\n\", React.createElement(_components.p, null, \"Il est possible aussi, et nous le verrons plus tard en d√©tails, de communiquer des donn√©es d'une IHM vers une API.\"), \"\\n\", React.createElement(_components.p, null, \"Nous avons d√©j√† envoy√© du JSON √† une API via REST Client.\", React.createElement(_components.br), \"\\n\", \"Voici la requ√™te envoyant, dans son body, la repr√©sentation JSON d'une ressource de type \\\"pizzas\\\" √† cr√©er :\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-http\"\n  }, \"### Create a pizza\\r\\nPOST {{baseUrl}}/pizzas\\r\\nContent-Type: application/json\\r\\n\\r\\n{\\r\\n    \\\"title\\\":\\\"Magic Green\\\",\\r\\n    \\\"content\\\":\\\"Epinards, Brocolis, Olives vertes, Basilic\\\"\\r\\n}\\n\")), \"\\n\", React.createElement(_components.p, null, \"Il est important de communiquer le \\\"media type\\\" (ou \", React.createElement(_components.strong, null, \"MIME\"), \") du corps de la requ√™te : \\\"\", React.createElement(_components.strong, null, \"application/json\\\"\"), \".\", React.createElement(_components.br), \"\\n\", \"Cela indique √† l'application qui est la cible de la requ√™te quelle genre d'outil elle devra utiliser pour d√©coder les donn√©es.\", React.createElement(_components.br), \"\\n\", \"Par exemple, il faut faire un traitement diff√©rent pour r√©cup√©rer des donn√©es au format JSON que pour r√©cup√©rer des donn√©es directement associ√©es √† un fichier image.\"), \"\\n\", React.createElement(_components.p, null, \"Si l'on consid√®re une IHM, il sera utile plus tard d'avoir un formulaire permettant d'ajouter des pizzas.\", React.createElement(_components.br), \"\\n\", \"Le JS associ√© √† l'IHM permettra d'envoyer les donn√©es du formulaire au format JSON, via la m√©thode \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"fetch\")), \", vers notre RESTful API g√©rant les ressources de type pizzas.\"), \"\\n\", React.createElement(_components.p, null, \"Voici un exemple de code que vous ne devez pas encore comprendre, qui permet √† une IHM de cr√©er une ressource de type \\\"pizzas\\\" :\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-js\"\n  }, \"const options = {\\r\\n  method: 'POST',\\r\\n  body: JSON.stringify({\\r\\n    title: title.value,\\r\\n    content: content.value,\\r\\n  }),\\r\\n  headers: {\\r\\n    'Content-Type': 'application/json',\\r\\n  },\\r\\n};\\r\\n\\r\\nconst response = await fetch('/api/pizzas', options);\\r\\nconst pizza = await response.json();\\n\")), \"\\n\", React.createElement(_components.h3, null, \"a.3.2) Parsing de donn√©es JSON vers un objet JS\"), \"\\n\", React.createElement(_components.h4, null, \"a.3.2.1) R√©ception par une application serveur\"), \"\\n\", React.createElement(_components.p, null, \"Via Express, nous pouvons tr√®s facilement convertir du JSON vers un objet JS √† l'aide du middleware \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"express.json()\")), \".\"), \"\\n\", React.createElement(_components.p, null, \"C'est ce que nous appelons du parsing de donn√©es, ou de la d√©s√©rialisation, c'est quand nous passons du monde texte / JSON (ou des octets) vers des \\\"objets en m√©moire\\\".\"), \"\\n\", React.createElement(_components.p, null, \"Le code actuel de notre RESTful API r√©cup√©rant les donn√©es d'une pizza √† cr√©er est tr√®s simple :\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-js\"\n  }, \"const title = req?.body?.title?.length !== 0 ? req.body.title : undefined;\\r\\nconst content = req?.body?.content?.length !== 0 ? req.body.content : undefined;\\n\")), \"\\n\", React.createElement(_components.p, null, \"Automatiquement gr√¢ce √† Express et au middleware appel√© dans \", React.createElement(_components.strong, null, \"apps.js\"), \" (\", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"app.use(express.json());\")), \"), \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"req.body\")), \" contient un objet JS repr√©sentant toutes les donn√©es JSON qui √©taient pr√©sentes dans le body de la requ√™te cliente, comme par exemple :\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-http\"\n  }, \"### Create a pizza\\r\\nPOST {{baseUrl}}/pizzas\\r\\nContent-Type: application/json\\r\\n\\r\\n{\\r\\n    \\\"title\\\":\\\"Magic Green\\\",\\r\\n    \\\"content\\\":\\\"Epinards, Brocolis, Olives vertes, Basilic\\\"\\r\\n}\\n\")), \"\\n\", React.createElement(_components.h4, null, \"a.3.2.2) R√©ception par une application cliente\"), \"\\n\", React.createElement(_components.p, null, \"Plus tard, nous verrons comment une IHM peut utiliser les donn√©es envoy√©es par une API.\"), \"\\n\", React.createElement(_components.p, null, \"La m√©thode \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"fetch\")), \" en collaboration avec la m√©thode \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"json\")), \" sur la r√©ponse d'une API permet de r√©cup√©rer et parser des donn√©es JSON vers un objet JS.\", React.createElement(_components.br), \"\\n\", \"Par exemple, cette requ√™te de cr√©ation d'une pizza parse la ressource qui a √©t√© rajout√©e c√¥t√© API au sein de la variable \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"pizza\")), \" :\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-js\"\n  }, \"const options = {\\r\\n  method: 'POST',\\r\\n  body: JSON.stringify({\\r\\n    title: title.value,\\r\\n    content: content.value,\\r\\n  }),\\r\\n  headers: {\\r\\n    'Content-Type': 'application/json',\\r\\n  },\\r\\n};\\r\\n\\r\\nconst response = await fetch('/api/pizzas', options);\\r\\nconst pizza = await response.json();\\n\")), \"\\n\", React.createElement(_components.h2, null, React.createElement(\"a\", {\n    id: \"a4\"\n  }), \" a.4) Sauvegarde de donn√©es JSON\"), \"\\n\", React.createElement(_components.h3, null, \"a.4.1) S√©rialisation d'objets JS vers du JSON\"), \"\\n\", React.createElement(_components.h4, null, \"a.4.1.1) Application c√¥t√© serveur\"), \"\\n\", React.createElement(_components.p, null, \"La fonction JS \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"JSON.stringify(objectToSerialised)\")), \" permet de cr√©er une \", React.createElement(_components.strong, null, \"string\"), \" contenant la repr√©sentation JSON de l'objet √† s√©rialiser.\"), \"\\n\", React.createElement(_components.p, null, \"C√¥t√© serveur, il est ensuite facile de sauvegarder les donn√©es JSON au sein d'un fichier.\"), \"\\n\", React.createElement(_components.p, null, \"Voici un exemple de code, une fonction, permettant √† une application Express de sauvegarder au format JSON un objet dans un fichier \", React.createElement(_components.strong, null, \".json\"), \" dont son chemin et nom complet sont indiqu√©s dans le param√®tre \", React.createElement(_components.strong, null, \"filePath\"), \" :\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-js\"\n  }, \"/**\\r\\n * Serialize the content of an Object within a file\\r\\n * @param {String} filePath - path to the .json file\\r\\n * @param {Array} object - Object to be written within the .json file.\\r\\n * Even if the file exists, its whole content is reset by the given object.\\r\\n */\\r\\nfunction serialize(filePath, object) {\\r\\n  const objectSerialized = JSON.stringify(object);\\r\\n  fs.writeFileSync(filePath, objectSerialized);\\r\\n}\\n\")), \"\\n\", React.createElement(_components.p, null, \"Imaginez que, au sein du router traitant des ressources de type \\\"pizzas\\\", vous passiez la valeur suivante √† \", React.createElement(_components.strong, null, \"filePath\"), \" :\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-js\"\n  }, \"const jsonDbPath = __dirname + '/../data/pizzas.json';\\r\\nserialize(jsonDbPath, MENU);\\n\")), \"\\n\", React.createElement(_components.p, null, \"Cela signifie que dans le projet contenant notre API, nous allons sauvegarder le menu des pizzas au format JSON dans le fichier JSON \", React.createElement(_components.strong, null, \"/data/pizzas.json\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"Ce fichier est en fait une base de donn√©es simplifi√©e !\", React.createElement(_components.br), \"\\n\", \"Nous allons prochainement voir comment r√©cup√©rer ces donn√©es au sein d'un array.\"), \"\\n\", React.createElement(_components.p, null, \"Nous allons maintenant r√©aliser un tutoriel pour rendre les ressources de type \\\"pizzas\\\" persistantes.\", React.createElement(_components.br), \"\\n\", \"Nous allons repartir de l'API cr√©√©e au module 4.\"), \"\\n\", React.createElement(_components.p, null, \"Dans votre repo \", React.createElement(_components.strong, null, \"web2\"), \", veuillez copier / coller le r√©pertoire \", React.createElement(_components.strong, null, \"/tutorials/pizzeria/api/basic\"), \" et le renommer en \", React.createElement(_components.strong, null, \"/tutorials/pizzeria/api/persistence\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"En cas de souci, vous pouvez t√©l√©charger le code du tutoriel pr√©c√©dent ici : \", React.createElement(_components.a, {\n    href: \"https://github.com/e-vinci/js-demos/tree/main/backend-restful-api/restful-api-essentials/basic\"\n  }, \"api-basic\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"Veuillez ouvrir un terminal au niveau de ce r√©pertoire.\"), \"\\n\", React.createElement(_components.p, null, \"Pour la suite du tutoriel, nous consid√©rons que tous les chemins absolus d√©marrent du r√©pertoire \", React.createElement(_components.strong, null, \"/tutorials/pizzeria/api/persistence\"), \" (ou \", React.createElement(_components.strong, null, \"/web2/tutorials/pizzeria/api/persistence\"), \" si l'on consid√®re le nom du r√©pertoire du repo).\"), \"\\n\", React.createElement(_components.p, null, \"Veuillez cr√©er un nouveau r√©pertoire \", React.createElement(_components.strong, null, \"/utils\"), \". Au sein de ce r√©pertoire, veuillez cr√©er le module \", React.createElement(_components.strong, null, \"/utils/json.js\"), \" dans lequel vous allez ajouter ces fonctions :\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-js\"\n  }, \"const fs = require('fs');\\r\\n\\r\\n/**\\r\\n * Parse items given in a .json file\\r\\n * @param {String} filePath - path to the .json file\\r\\n * If the file does not exist or it's content cannot be parsed as JSON data,\\r\\n * use the default data.\\r\\n * @param {Array} defaultArray - Content to be used when the .json file does not exists\\r\\n * @returns {Array} : the array that was parsed from the file (or defaultArray)\\r\\n */\\r\\nfunction parse(filePath, defaultArray = []) {\\r\\n  if (!fs.existsSync(filePath)) return defaultArray;\\r\\n  const fileData = fs.readFileSync(filePath);\\r\\n  try {\\r\\n    // parse() Throws a SyntaxError exception if the string to parse is not valid JSON.\\r\\n    return JSON.parse(fileData);\\r\\n  } catch (err) {\\r\\n    return defaultArray;\\r\\n  }\\r\\n}\\r\\n\\r\\n/**\\r\\n * Serialize the content of an Object within a file\\r\\n * @param {String} filePath - path to the .json file\\r\\n * @param {Array} object - Object to be written within the .json file.\\r\\n * Even if the file exists, its whole content is reset by the given object.\\r\\n */\\r\\nfunction serialize(filePath, object) {\\r\\n  const objectSerialized = JSON.stringify(object);\\r\\n  createPotentialLastDirectory(filePath);\\r\\n  fs.writeFileSync(filePath, objectSerialized);\\r\\n}\\r\\n\\r\\n/**\\r\\n *\\r\\n * @param {String} filePath - path to the .json file\\r\\n */\\r\\nfunction createPotentialLastDirectory(filePath) {\\r\\n  const pathToLastDirectory = filePath.substring(0, filePath.lastIndexOf('/'));\\r\\n\\r\\n  if (fs.existsSync(pathToLastDirectory)) return;\\r\\n\\r\\n  fs.mkdirSync(pathToLastDirectory);\\r\\n}\\r\\n\\r\\nmodule.exports = { parse, serialize };\\n\")), \"\\n\", React.createElement(_components.p, null, \"L'op√©ration de s√©rialisation des donn√©es est faite via la fonction \", React.createElement(_components.strong, null, \"serialize\"), \" de \", React.createElement(_components.strong, null, \"/utils/json.js\"), \". Pour se simplifier la vie et ne pas obliger les d√©veloppeurs √† devoir cr√©er manuellement un r√©pertoire qui contiendra la mini DB de pizzas (le fichier \", React.createElement(_components.strong, null, \"pizzas.json\"), \" dans la suite de l'exemple), une fonction a √©t√© cr√©√©e qui s'appelle \", React.createElement(_components.strong, null, \"createPotentialLastDirectory\"), \".\", React.createElement(_components.br), \"\\n\", \"La fonction \", React.createElement(_components.strong, null, \"serialize\"), \" fait appel √† cette fonction qui va, si n√©cessaire, cr√©er le dernier r√©pertoire donn√© dans le chemin vers le fichier JSON (le r√©pertoire \", React.createElement(_components.strong, null, \"/data\"), \" dans la suite de l'exemple).\"), \"\\n\", React.createElement(_components.p, null, \"Il n'est pas int√©ressant de retenir par coeur le code donn√© dans \", React.createElement(_components.strong, null, \"/utils/json.js\"), \". Par contre, il est important que vous compreniez celui-ci, ce qu'il fait.\"), \"\\n\", React.createElement(_components.p, null, \"A pr√©sent, nous allons convertir le code du router de \\\"pizzas\\\" pour rendre les donn√©es peristantes.\", React.createElement(_components.br), \"\\n\", \"Voici ce que nous devons faire pour les op√©rations de :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"lecture de ressources\"), \" : il suffit de faire appel √† la fonction \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"parse\")), \" qui tentera de charger les ressources qui devraient se trouver dans le r√©pertoire \", React.createElement(_components.strong, null, \"/data/pizzas.json\"), \". Notons que le chemin vers ce fichier JSON est un simple choix, il doit √™tre configurable.\"), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"√©criture de ressources\"), \" : lors d'une op√©ration d'√©criture pour cr√©er une nouvelle ressource, ou pour mettre √† jour une ressource existante, voici les √©tapes :\", \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"cr√©ation d'une liste de toutes les pizzas dans un array : cela correspond √† l'utilisation de la fonction \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"parse\")), \" pour tenter de charger ce qui est contenu dans la mini DB de pizzas.\"), \"\\n\", React.createElement(_components.li, null, \"mise √† jour de l'array soit en ajoutant un nouvel objet (une pizza), soit en modifiant un objet existant, soit en supprimant un objet.\"), \"\\n\", React.createElement(_components.li, null, \"r√©√©criture compl√®te du fichier JSON contenant la liste de pizzas sur base de l'array de pizzas qui a pr√©c√©demment √©t√© mis √† jour via la m√©thode \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"serialize\")), \".\"), \"\\n\"), \"\\n\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"Voici le code du router mis √† jour afin de g√©rer la persistance selon la strat√©gie d√©finie ci-dessus, les modifications √©tant surlign√©es :\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-js\"\n  }, \"var express = require('express');\\r\\nconst { serialize, parse } = require('../utils/json');\\r\\nvar router = express.Router();\\r\\n\\r\\nconst jsonDbPath = __dirname + '/../data/pizzas.json';\\r\\n\\r\\nconst MENU = [\\r\\n  {\\r\\n    id: 1,\\r\\n    title: '4 fromages',\\r\\n    content: 'Gruy√®re, S√©rac, Appenzel, Gorgonzola, Tomates',\\r\\n  },\\r\\n  {\\r\\n    id: 2,\\r\\n    title: 'Vegan',\\r\\n    content: 'Tomates, Courgettes, Oignons, Aubergines, Poivrons',\\r\\n  },\\r\\n  {\\r\\n    id: 3,\\r\\n    title: 'Vegetarian',\\r\\n    content: 'Mozarella, Tomates, Oignons, Poivrons, Champignons, Olives',\\r\\n  },\\r\\n  {\\r\\n    id: 4,\\r\\n    title: 'Alpage',\\r\\n    content: 'Gruy√®re, Mozarella, Lardons, Tomates',\\r\\n  },\\r\\n  {\\r\\n    id: 5,\\r\\n    title: 'Diable',\\r\\n    content: 'Tomates, Mozarella, Chorizo piquant, Jalapenos',\\r\\n  },\\r\\n];\\r\\n\\r\\n/* Read all the pizzas from the menu\\r\\n   GET /pizzas?order=title¬†:¬†ascending order¬†by¬†title\\r\\n¬†  GET /pizzas?order=-title¬†:¬†descending order¬†by¬†title\\r\\n*/\\r\\nrouter.get('/', (req, res, next) => {\\r\\n  const orderByTitle =\\r\\n    req?.query?.order?.includes('title') ? req.query.order : undefined;\\r\\n  let orderedMenu;\\r\\n  console.log(`order by ${orderByTitle ?? 'not requested'}`);\\r\\n\\r\\n  const pizzas = parse(jsonDbPath, MENU);\\r\\n  \\r\\n  if (orderByTitle) orderedMenu = [...pizzas].sort((a, b) => a.title.localeCompare(b.title));\\r\\n  if (orderByTitle === '-title') orderedMenu = orderedMenu.reverse();\\r\\n\\r\\n  console.log('GET /pizzas');\\r\\n  return res.json(orderedMenu ?? pizzas);\\r\\n});\\r\\n\\r\\n// Read the pizza identified by an id in the menu\\r\\nrouter.get('/:id', (req, res) => {\\r\\n  console.log(`GET /pizzas/${req.params.id}`);\\r\\n\\r\\n  const pizzas = parse(jsonDbPath, MENU);\\r\\n\\r\\n  const indexOfPizzaFound = pizzas.findIndex(pizza => pizza.id == req.params.id);\\r\\n\\r\\n  if (indexOfPizzaFound < 0) return res.sendStatus(404);\\r\\n\\r\\n  return res.json(pizzas[indexOfPizzaFound]);\\r\\n});\\r\\n\\r\\n// Create a pizza to be added to the menu.\\r\\nrouter.post('/', (req, res) => {\\r\\n  const title = req?.body?.title?.length !== 0 ? req.body.title : undefined;\\r\\n  const content = req?.body?.content?.length !== 0 ? req.body.content : undefined;\\r\\n\\r\\n  console.log('POST /pizzas');\\r\\n\\r\\n  if (!title || !content) return res.sendStatus(400); // error code '400 Bad request'\\r\\n\\r\\n  const pizzas = parse(jsonDbPath, MENU);\\r\\n  const lastItemIndex = pizzas?.length !== 0 ? pizzas.length - 1 : undefined;\\r\\n  const lastId = lastItemIndex !== undefined ? pizzas[lastItemIndex]?.id : 0;\\r\\n  const nextId = lastId + 1;\\r\\n\\r\\n  const newPizza = {\\r\\n    id: nextId,\\r\\n    title: title,\\r\\n    content: content,\\r\\n  };\\r\\n\\r\\n  pizzas.push(newPizza);\\r\\n\\r\\n  serialize(jsonDbPath, pizzas);\\r\\n\\r\\n  return res.json(newPizza);\\r\\n});\\r\\n\\r\\n// Delete a pizza from the menu based on its id\\r\\nrouter.delete('/:id', (req, res) => {\\r\\n  console.log(`DELETE /pizzas/${req.params.id}`);\\r\\n\\r\\n  const pizzas = parse(jsonDbPath, MENU);\\r\\n\\r\\n  const foundIndex = pizzas.findIndex(pizza => pizza.id == req.params.id);\\r\\n\\r\\n  if (foundIndex < 0) return res.sendStatus(404);\\r\\n\\r\\n  const itemsRemovedFromMenu = pizzas.splice(foundIndex, 1);\\r\\n  const itemRemoved = itemsRemovedFromMenu[0];\\r\\n\\r\\n  serialize(jsonDbPath, pizzas);\\r\\n\\r\\n  return res.json(itemRemoved);\\r\\n});\\r\\n\\r\\n// Update a pizza based on its id and new values for its parameters\\r\\nrouter.patch('/:id', (req, res) => {\\r\\n  console.log(`PATCH /pizzas/${req.params.id}`);\\r\\n\\r\\n  const title = req?.body?.title;\\r\\n  const content = req?.body?.content;\\r\\n\\r\\n  console.log('POST /pizzas');\\r\\n\\r\\n  if ((!title && !content) || title?.length === 0 || content?.length === 0) return res.sendStatus(400);\\r\\n\\r\\n  const pizzas = parse(jsonDbPath, MENU);\\r\\n\\r\\n  const foundIndex = pizzas.findIndex(pizza => pizza.id == req.params.id);\\r\\n\\r\\n  if (foundIndex < 0) return res.sendStatus(404);\\r\\n\\r\\n  const updatedPizza = {...pizzas[foundIndex], ...req.body};\\r\\n\\r\\n  pizzas[foundIndex] = updatedPizza;\\r\\n\\r\\n  serialize(jsonDbPath, pizzas);\\r\\n\\r\\n  return res.json(updatedPizza);\\r\\n});\\r\\n\\r\\nmodule.exports = router;\\n\")), \"\\n\", React.createElement(_components.p, null, \"Veuillez mettre √† jour votre fichier \", React.createElement(_components.strong, null, \"/router/pizzas.js\"), \" sur base du code donn√© et testez le bon fonctionnement de l'application. Faites quelques requ√™tes pour ajouter et modifier des donn√©es et v√©rifiez, une fois que vous red√©marrer votre application, que les donn√©es persistent.\"), \"\\n\", React.createElement(_components.h4, null, \"a.4.1.2) Application c√¥t√© client\"), \"\\n\", React.createElement(_components.p, null, \"Au niveau d'une IHM, il doit aussi √™tre possible de sauvegarder des informations.\", React.createElement(_components.br), \"\\n\", \"Or, pour des raisons de s√©curit√©, le browser ne peut pas cr√©er des fichiers JSON de mani√®re transparente √† l'utilisateur.\", React.createElement(_components.br), \"\\n\", \"Afin de sauvegarder des donn√©es, le browser met n√©anmoins √† disposition un web storage dans lequel on peut sauvegarder des donn√©es sous forme de paires \\\"cl√© / valeur\\\", au format texte.\", React.createElement(_components.br), \"\\n\", \"Nous verrons cela plus tard en d√©tails.\"), \"\\n\", React.createElement(_components.p, null, \"Voici d√©j√† malgr√© tout un exemple de code, une fonction, permettant de sauvegarder les donn√©es de session d'un utilisateur dans le web storage d'un browser :\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-js\"\n  }, \"const setUserSessionData = (user) => {\\r\\n  const storageValue = JSON.stringify(user);\\r\\n  localStorage.setItem(STORE_NAME, storageValue);\\r\\n};\\n\")), \"\\n\", React.createElement(_components.h3, null, \"a.4.2) Parsing de donn√©es JSON vers un objet JS\"), \"\\n\", React.createElement(_components.h4, null, \"a.4.2.1) Application c√¥t√© serveur\"), \"\\n\", React.createElement(_components.p, null, \"La fonction JS \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"JSON.parse(objectSerialized) \")), \" permet de cr√©er un objet JS √† partir d'une \", React.createElement(_components.strong, null, \"string\"), \" contenant des donn√©es au format JSON.\"), \"\\n\", React.createElement(_components.p, null, \"C√¥t√© serveur, il est ensuite facile de sauvegarder les donn√©es JSON au sein d'un fichier.\"), \"\\n\", React.createElement(_components.p, null, \"Voici un exemple de code, une fonction, permettant √† une application Express de cr√©er un objet JS sur base de donn√©es JSON se trouvant dans un fichier \", React.createElement(_components.strong, null, \".json\"), \" dont le chemin et nom complet sont indiqu√©s dans le param√®tre \", React.createElement(_components.strong, null, \"filePath\"), \" :\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-js\"\n  }, \"/**\\r\\n * Parse items given in a .json file\\r\\n * @param {String} filePath - path to the .json file\\r\\n * If the file does not exist or it's content cannot be parsed as JSON data,\\r\\n * use the default data.\\r\\n * @param {Array} defaultArray - Content to be used when the .json file does not exists\\r\\n * @returns {Array} : the array that was parsed from the file (or defaultData)\\r\\n */\\r\\nfunction parse(filePath, defaultArray = []) {\\r\\n  if (!fs.existsSync(filePath)) return defaultArray;\\r\\n  const fileData = fs.readFileSync(filePath);\\r\\n  try {\\r\\n    // parse() Throws a SyntaxError exception if the string to parse is not valid JSON.\\r\\n    return JSON.parse(fileData);\\r\\n  } catch (err) {\\r\\n    return defaultArray;\\r\\n  }\\r\\n}\\n\")), \"\\n\", React.createElement(_components.p, null, \"Imaginez que, au sein du router traitant des ressources de type \\\"pizzas\\\", que l'on r√©cup√®re le menu des pizzas √† l'aide du fichier JSON dont le chemin et nom complet est donn√© dans \", React.createElement(_components.strong, null, \"jsonDbPath\"), \". Voici ce que donnerait l'op√©ration de lecture de toutes les pizzas :\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-js\"\n  }, \"// Read all the pizzas from the menu\\r\\nrouter.get('/', function (req, res) {\\r\\n  console.log('GET /pizzas');\\r\\n  const pizzas = parse(jsonDbPath, DEFAULT_MENU);\\r\\n  res.json(pizzas);\\r\\n});\\n\")), \"\\n\", React.createElement(_components.h4, null, \"a.4.2.2) Application c√¥t√© client\"), \"\\n\", React.createElement(_components.p, null, \"Au niveau d'une IHM, il doit aussi √™tre possible de r√©cup√©rer des donn√©es JSON qui auraient √©t√© sauvegard√©es au sein du web browser.\"), \"\\n\", React.createElement(_components.p, null, \"Nous verrons cela plus tard en d√©tails. Voici d√©j√† malgr√© tout un exemple de code, une fonction, permettant de parser les donn√©es de session d'un utilisateur se trouvant dans le web storage d'un browser :\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-js\"\n  }, \"const getUserSessionData = () => {\\r\\n  const retrievedUser = localStorage.getItem(STORE_NAME);\\r\\n  if (!retrievedUser) return;\\r\\n  return JSON.parse(retrievedUser);\\r\\n};\\n\")), \"\\n\", React.createElement(_components.h1, null, React.createElement(\"a\", {\n    id: \"b\"\n  }), \" b) Am√©lioration des outils de d√©veloppement\"), \"\\n\", React.createElement(_components.h2, null, React.createElement(\"a\", {\n    id: \"b1\"\n  }), \" b.1) Introduction\"), \"\\n\", React.createElement(_components.p, null, \"Dans le d√©veloppement de nos API, nous souhaitons plus de facilit√©s.\", React.createElement(_components.br), \"\\n\", \"Notamment, √† chaque changement de notre code, nous ne souhaitons pas devoir red√©marrer manuellement notre application.\"), \"\\n\", React.createElement(_components.p, null, \"Nous souhaiterions aussi b√©n√©ficier d'un debugger et d'autres outils, comme un linter...\"), \"\\n\", React.createElement(_components.h2, null, React.createElement(\"a\", {\n    id: \"b2\"\n  }), \" b.2) Red√©marrage automatique au changement d'un fichier\"), \"\\n\", React.createElement(_components.h3, null, \"b.2.1) Configuration de l'utilisation de nodemon\"), \"\\n\", React.createElement(_components.p, null, \"Il est possible de faire en sorte qu'√† chaque fois que vous sauvez un fichier, votre application \", React.createElement(_components.strong, null, \"node.js\"), \" red√©marre automatiquement.\"), \"\\n\", React.createElement(_components.p, null, \"Voici la pr√©c√©dure :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"Installez \", React.createElement(_components.strong, null, \"nodemon\"), \" au niveau du r√©pertoire du projet :\"), \"\\n\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-bash\"\n  }, \"npm i nodemon -D\\n\")), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"Pour lancer \", React.createElement(_components.strong, null, \"nodemon\"), \" (au lieu du simple \", React.createElement(_components.strong, null, \"node\"), \") quand on tape \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"npm run dev\")), \" : Veuillez ajouter la ligne \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"\\\"dev\\\": \\\"nodemon /bin/www\\\"\")), \" dans \", React.createElement(_components.strong, null, \"package.json\"), \" :\"), \"\\n\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-json\"\n  }, \"\\\"scripts\\\": {\\r\\n    \\\"dev\\\": \\\"nodemon ./bin/www\\\",\\r\\n    \\\"start\\\": \\\"node ./bin/www\\\"\\r\\n  },\\n\")), \"\\n\", React.createElement(_components.h3, null, \"b.2.2) Configuration des fichiers √† ignorer pour √©viter des r√©d√©marrages\"), \"\\n\", React.createElement(_components.p, null, \"Il est possible d'indiquer les fichiers qui doivent √™tre ignor√©s par \", React.createElement(_components.strong, null, \"nodemon\"), \" via l'ajout dans \", React.createElement(_components.strong, null, \"package.json\"), \" :\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-json\"\n  }, \"\\\"nodemonConfig\\\": {\\r\\n    \\\"ignore\\\": [\\r\\n      \\\"data/*\\\"\\r\\n    ]\\r\\n  },\\n\")), \"\\n\", React.createElement(_components.p, null, \"Dans la configuration ajout√©e ci-dessous, tous les fichiers qui seraient mis √† jour dans le r√©pertoire \", React.createElement(_components.strong, null, \"/data\"), \" ne provoqueront pas de red√©marrage du serveur \", React.createElement(_components.strong, null, \"nodemon\"), \" lorsqu'il est lanc√© (en mode 'dev').\"), \"\\n\", React.createElement(_components.p, null, \"Veuillez installer \", React.createElement(_components.strong, null, \"nodemon\"), \" dans le cadre de votre tutoriel \", React.createElement(_components.strong, null, \"api-persistence\"), \" et configurer celui-ci pour que l'application ne red√©marre pas √† chaque fois que vous cr√©ez une nouvelle pizza.\", React.createElement(_components.br), \"\\n\", \"N'h√©sitez pas √† tester la cr√©ation d'une pizza avant de dire √† \", React.createElement(_components.strong, null, \"nodemon\"), \" d'ignorer les fichiers se trouvant dans \", React.createElement(_components.strong, null, \"/data\"), \".\"), \"\\n\", React.createElement(_components.h2, null, React.createElement(\"a\", {\n    id: \"b3\"\n  }), \" b.3) Debugging\"), \"\\n\", React.createElement(_components.h3, null, \"b.3.1) Introduction\"), \"\\n\", React.createElement(_components.p, null, \"Est-ce que nous pouvons utiliser VS Code pour d√©bugger notre API ?\", React.createElement(_components.br), \"\\n\", \"Oui, heureusement, car le debugger est probablement le meilleur ami des d√©veloppeurs.\"), \"\\n\", React.createElement(_components.p, null, \"Il est toujours l√† pour aider, √† l'√©coute de nos investigations, mettant r√©guli√®rement en lumi√®re des pistes de sortie de probl√®mes, tout cela de mani√®re bienveillante, sans jamais nous brusquer üòÅ.\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.a, {\n    href: \"https://code.visualstudio.com/docs/editor/debugging\"\n  }, \"Debugging via VS Code\"), \" \", React.createElement(_components.a, {\n    href: \"/js2/references/#r59\"\n  }, \"[R.59]\"), \" fournit le d√©tails de comment d√©bugger sous VS Code. Nous vous offrons par la suite une fa√ßon pratique de rapidement d√©bugger.\"), \"\\n\", React.createElement(_components.h3, null, \"b.3.2) Debugging sans configuration\"), \"\\n\", React.createElement(_components.p, null, \"Sans aucune configuration, il est possible de d√©bugger une application \", React.createElement(_components.strong, null, \"Node.js\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"Il suffit d'ouvrir le script d'entr√©e de votre application dans VS Code. Pour une application Express, le script d'entr√©e est \", React.createElement(_components.strong, null, \"/bin/www\"), \". Cliquez dans l'Explorer de VS Code sur \", React.createElement(_components.strong, null, \"/bin/www\"), \" de votre tutoriel \", React.createElement(_components.strong, null, \"api-persistence\"), \". Une fois le script \", React.createElement(_components.strong, null, \"/bin/www\"), \" ouvert, il ne reste plus qu'√† ex√©cuter le \", React.createElement(_components.strong, null, \"Debug\"), \".\", React.createElement(_components.br), \"\\n\", \"Pour ce faire :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"soit vous cliquez sur l'ic√¥ne \\\"\", React.createElement(_components.strong, null, \"Run and Debug\"), \"\\\" √† gauche de l'Explorer, puis sur le bouton \\\"\", React.createElement(_components.strong, null, \"Run and Debug\"), \"\\\";\"), \"\\n\", React.createElement(_components.li, null, \"soit vous cliquez sur \\\"\", React.createElement(_components.strong, null, \"Run\"), \"\\\" puis sur \\\"\", React.createElement(_components.strong, null, \"Start Debugging\"), \"\\\";\"), \"\\n\", React.createElement(_components.li, null, \"soit vous cliquez sur \\\"\", React.createElement(_components.strong, null, \"F5\"), \"\\\",\"), \"\\n\", React.createElement(_components.li, null, \"Il est probable que la premi√®re fois que vous lancez le \", React.createElement(_components.strong, null, \"Debug\"), \", vous devrez s√©lectionner \", React.createElement(_components.strong, null, \"Node.js\"), \"   (il sera indiqu√© : \\\"\", React.createElement(_components.strong, null, \"Select debugger\"), \"\\\") comme debugger dans une liste.\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"En r√©sum√©, une fois le debugger lanc√©, il suffit d'ajouter des breakpoints dans le code source et d'ex√©cuter le code pas √† pas.\"), \"\\n\", React.createElement(_components.p, null, \"N'h√©sitez pas √† ex√©cuter pas √† pas une op√©ration de votre api, comme la cr√©ation d'une pizza par exemple.\"), \"\\n\", React.createElement(_components.h3, null, \"b.3.3) Debugging avec une bonne configuration\"), \"\\n\", React.createElement(_components.p, null, \"Trouver une configuration qui permet de bien d√©bugger n'est pas si ais√©. Nous allons donc voir ensemble comment mettre en place une configuration des plus utiles dans le cadre de ce cours.\"), \"\\n\", React.createElement(_components.p, null, \"Premi√®rement, il est important que quand on lance le debugger, on puisse b√©n√©ficier de \", React.createElement(_components.strong, null, \"nodemon\"), \" et des red√©marrages automatiques en cas de changement de code.\", React.createElement(_components.br), \"\\n\", \"Pour ce faire, veuillez mettre √† jour le fichier \", React.createElement(_components.strong, null, \"packages.json\"), \" pour rajouter un script de d√©marrage :\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-json\"\n  }, \"\\\"scripts\\\":¬†{\\r\\n¬†¬†¬†¬†\\\"debug\\\":¬†\\\"nodemon¬†./bin/www\\\",\\r\\n¬†¬†¬†¬†\\\"dev\\\":¬†\\\"nodemon¬†./bin/www\\\",\\r\\n¬†¬†¬†¬†\\\"start\\\":¬†\\\"node¬†./bin/www\\\"\\r\\n¬†¬†},\\n\")), \"\\n\", React.createElement(_components.p, null, \"Nous allons maintenant cr√©er une configuration de debugging associ√©e √† notre repo \", React.createElement(_components.strong, null, \"web2\"), \" :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"Cliquez sur l'ic√¥ne \\\"\", React.createElement(_components.strong, null, \"Run and Debug\"), \"\\\" √† gauche de l'Explorer, puis sur le lien \\\"\", React.createElement(_components.strong, null, \"create launch.json file\"), \"\\\" (\", React.createElement(_components.strong, null, \".vscode/launch.json\"), \").\"), \"\\n\", React.createElement(_components.li, null, \"Quand il sera indiqu√© \\\"\", React.createElement(_components.strong, null, \"Select debugger\"), \"\\\", s√©lectionnez \", React.createElement(_components.strong, null, \"Node.js\"), \".\", React.createElement(_components.br), \"\\n\", \"NB : Peu importe le debugger que vous s√©lectionnez, car vous aller par la suite copier / coller la configuration propos√©e.\"), \"\\n\", React.createElement(_components.li, null, \"Une fois le debugger \", React.createElement(_components.strong, null, \"Node.js\"), \" choisi, VS Code cr√©e un r√©pertoire \", React.createElement(_components.strong, null, \".vscode\"), \" √† la racine du folder ouvert au sein de VS Code (normalement vous devriez avoir ouvert votre repo local \", React.createElement(_components.strong, null, \"web2\"), \") contenant un fichier \", React.createElement(_components.strong, null, \"launch.json\"), \" et une configuration initiale. Veuillez remplacer le contenu de ce fichier (\", React.createElement(_components.strong, null, \".vscode/launch.json\"), \") par celui-ci :\"), \"\\n\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-json\"\n  }, \"{\\r\\n  // Use IntelliSense to learn about possible attributes.\\r\\n  // Hover to view descriptions of existing attributes.\\r\\n  // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387\\r\\n  \\\"version\\\": \\\"0.2.0\\\",\\r\\n  \\\"configurations\\\": [\\r\\n    {\\r\\n      \\\"name\\\": \\\"Launch via NPM\\\",\\r\\n      \\\"request\\\": \\\"launch\\\",\\r\\n      \\\"runtimeArgs\\\": [\\\"run-script\\\", \\\"debug\\\"],\\r\\n      \\\"runtimeExecutable\\\": \\\"npm\\\",\\r\\n      \\\"skipFiles\\\": [\\\"<node_internals>/**\\\"],\\r\\n      \\\"type\\\": \\\"pwa-node\\\",\\r\\n      \\\"cwd\\\": \\\"${fileDirname}\\\"\\r\\n    }\\r\\n  ]\\r\\n}\\n\")), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.strong, null, \"runtimeArgs\"), \" permet de s√©lectionner le script √† lancer par le debugger, √† savoir ici : \", React.createElement(_components.strong, null, \"debug\"), \".\", React.createElement(_components.br), \"\\n\", \"Ainsi, quand on lancera le debugger, celui-ci lancera le programme avec l'√©quivalent de la commande \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"npm run debug\")), \".\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.strong, null, React.createElement(_components.code, null, \"\\\"cwd\\\":\\\"${fileDirname}\\\"\")), \" : \", React.createElement(_components.strong, null, \"cwd\"), \" permet d'indiquer le chemin vers la racine du programme √† d√©bugger. La variable \", React.createElement(_components.strong, null, \"fileDirname\"), \" permet de s√©lectionner le programme √† d√©bugger sur base du fichier ouvert et actif dans VS Code.\"), \"\\n\", React.createElement(_components.p, null, \"Si vous avez plusieurs applications au sein d'un folder de VS Code, pour d√©bugger une application en particulier, nous vous conseillons cette approche :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"Ouvrez le fichier \", React.createElement(_components.strong, null, \"package.json\"), \" de l'application √† d√©bugger ;\"), \"\\n\", React.createElement(_components.li, null, \"Cliquez sur l'ic√¥ne \", React.createElement(_components.strong, null, \"Run and Debug\"), \" √† gauche de l'Explorer, puis cliquez sur \", React.createElement(_components.strong, null, \"Start Debugging\"), \" (ou cliquez juste sur \", React.createElement(_components.strong, null, \"F5\"), \") en v√©rifiant que la configuration de debugging s√©lectionn√©e est bien nomm√©e \", React.createElement(_components.strong, null, \"Launch via NPM\"), \".\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"Nottons que le nom de la configuration de debugging peut facilement √™tre modifi√©e en changeant la valeur de l'attribut \", React.createElement(_components.strong, null, \"name\"), \" dans \", React.createElement(_components.strong, null, \"/.vscode/launch.json\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"Veuillez tester cette configuration de debugging au sein de votre repo local \", React.createElement(_components.strong, null, \"web2\"), \".\", React.createElement(_components.br), \"\\n\", \"Vous pourriez par exemple observer pas √† pas une op√©ration de suppression d'une pizza, afin de voir √† quel moment le contenu de l'array \", React.createElement(_components.strong, null, \"pizzas\"), \" est mis √† jour, ainsi que le fichier \", React.createElement(_components.strong, null, \"/data/pizzas.json\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"Si tout fonctionne bien, faites un \", React.createElement(_components.strong, null, \"commit\"), \" de votre repo (\", React.createElement(_components.strong, null, \"web2\"), \") avec le message \\\"\", React.createElement(_components.strong, null, \"api-persistence\"), \"\\\".\"), \"\\n\", React.createElement(_components.p, null, \"En cas de souci, vous pouvez acc√©der au code du tutoriel ici :\\r\\n\", React.createElement(_components.a, {\n    href: \"https://github.com/e-vinci/js-demos/tree/main/backend-restful-api/restful-api-essentials/persistence\"\n  }, \"api-persistence\"), \".\"), \"\\n\", React.createElement(_components.h2, null, React.createElement(\"a\", {\n    id: \"b4\"\n  }), \" b.4) Autres outils de d√©veloppement\"), \"\\n\", React.createElement(_components.p, null, \"Il serait utile de b√©n√©ficier :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"d'un linter : celui-ci devrait imposer un \\\"style guide\\\" qui est √©quivalent √† notre style de programmation pour les IHM.\"), \"\\n\", React.createElement(_components.li, null, \"d'un formater : celui-ci devrait automatiquement permettre d'am√©liorer le style de notre code pour se rapprocher de ce qui est impos√© par le linter.\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"Un boilerplate a √©t√© cr√©√© afin de mettre en place ces outils :\\r\\n\", React.createElement(_components.a, {\n    href: \"https://github.com/e-vinci/basic-api-boilerplate\"\n  }, \"basic-api-boilerplate\")), \"\\n\", React.createElement(_components.p, null, \"Vous ne devez pas savoir comment cr√©er et configurer un tel boilerplate.\", React.createElement(_components.br), \"\\n\", \"N√©anmoins, pour les personnes tr√®s curieuses, la cr√©ation du boilerplate est expliqu√©e dans le \", React.createElement(_components.strong, null, \"README\"), \" du boilerplate.\"), \"\\n\", React.createElement(_components.p, null, \"Pour la suite du cours, nous n'utiliserons plus le g√©n√©rateur d'application Express, mais ce boilerplate.\"), \"\\n\", React.createElement(_components.p, null, \"Il est important d'avoir install√© les extensions \", React.createElement(_components.strong, null, \"ESLint\"), \" et \", React.createElement(_components.strong, null, \"prettier\"), \" au sein de VS Code pour bien utiliser le boilerplate d'une API.\", React.createElement(_components.br), \"\\n\", \"Vous l'avez normalement d√©j√† fait au module 2. Si non, veuillez suivre la proc√©dure donn√©e ici : \", React.createElement(_components.a, {\n    href: \"/js2/modules/2/#a6\"\n  }, \"Module 2 : a.6) Installation des extensions pour le linter et le formater\")), \"\\n\", React.createElement(_components.h1, null, React.createElement(\"a\", {\n    id: \"c\"\n  }), \" c) Exercice 5.1 : Persistance de la RESTfull API pour myMovies\"), \"\\n\", React.createElement(_components.p, null, \"Vous allez faire un refactor de la RESTful API de \", React.createElement(_components.strong, null, \"myMovies\"), \", afin d'utiliser les outils de d√©veloppement modernes mis √† disposition dans un boilerplate et afin de rendre les donn√©es persistantes dans un fichier JSON.\"), \"\\n\", React.createElement(_components.p, null, \"Afin de r√©aliser cet exercice, voici les contraintes d'impl√©mentation :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"Veuillez cr√©er un nouveau projet dans votre repository local et votre web repository (normalement appel√© \", React.createElement(_components.strong, null, \"web2\"), \") nomm√© \", React.createElement(_components.strong, null, \"/exercises/module5/5.1\"), \" sur base du boilerplate : \", React.createElement(_components.a, {\n    href: \"https://github.com/e-vinci/basic-api-boilerplate\"\n  }, \"basic-api-boilerplate\"), \".\"), \"\\n\", React.createElement(_components.li, null, \"Reprenez le code du router que vous avez d√©velopp√© √† l'exercice pr√©c√©dent (Exercice 4.1) et int√©grez le dans votre nouveau projet.\"), \"\\n\", React.createElement(_components.li, null, \"Faites un refactor de votre API g√©rant les films afin que les ressources persistent au sein du fichier \", React.createElement(_components.strong, null, \"/data/films.json\"), \" ou \", React.createElement(_components.strong, null, \"/data/movies.json\"), \".\"), \"\\n\", React.createElement(_components.li, null, \"Veuillez tester toutes les fonctions de la RESTful API pour la collection de films √† l'aide du REST Client en copiant les requ√™tes d√©velopp√©es pour l'Exercice 4.1 (fichier \", React.createElement(_components.strong, null, \"films.http\"), \" du r√©pertoire \", React.createElement(_components.strong, null, \"REST Client\"), \"). Normalement, il n'y a pas de nouvelles requ√™tes √† √©crire, il suffit juste de les ex√©cuter.\"), \"\\n\"), \"\\n\", React.createElement(_components.h4, null, \"ü§ù Tips\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"‚ö° Si vous avez fait un clone du boilerplate, attention au Git dans le Git, n'oubliez pas de supprimer le dossier \", React.createElement(_components.strong, null, \".git\"), \" pr√©sent dans votre nouveau projet.\"), \"\\n\", React.createElement(_components.li, null, \"Vous pourriez simplement commencer en faisant un refactor de votre code sans g√©rer la persistance, simplement en utilisant le \", React.createElement(_components.strong, null, \"linter\"), \" et \", React.createElement(_components.strong, null, \"formater\"), \".\", React.createElement(_components.br), \"\\n\", \"Tant que nous n'installez pas les packages, le linter n'est pas activ√© dans VS Code. Il faut aussi fermer et r√©ouvrir les fichiers une fois les packages install√©s pour que les erreurs de style apparaissent dans VS Code.\", React.createElement(_components.br), \"\\n\", \"Il est int√©ressant de corriger toutes les erreurs de style avant de s'attaquer √† la persistance.\"), \"\\n\", React.createElement(_components.li, null, \"Vous avez un probl√®me du type \\\"no such file or directory\\\" ? N'h√©sitez pas √† cr√©er un chemin correct vers votre fichier JSON √† l'aide de la m√©thode \", React.createElement(_components.code, null, \"join\"), \" de l'objet \", React.createElement(_components.strong, null, \"path\"), \" :\"), \"\\n\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-js\"\n  }, \"const path = require('node:path');\\r\\n\\r\\nconst jsonDbPath = path.join(__dirname, '/../data/films.json');\\n\")), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"Vous pourriez avoir besoin de convertir une string vers un entier, par exemple : \", React.createElement(_components.code, null, \"const id = parseInt(req.params.id, 10);\"), \".\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"Le code de votre application web doit donc se trouver dans votre repository local et votre web repository (normalement appel√© \", React.createElement(_components.strong, null, \"web2\"), \") dans le r√©pertoire nomm√© \", React.createElement(_components.strong, null, \"/exercises/module5/5.1\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"Veuillez faire un \", React.createElement(_components.strong, null, \"commit\"), \" de votre code avec le message suivant : \\\"\", React.createElement(_components.strong, null, \"myMovies : module 5 : persistent API\"), \"\\\".\"), \"\\n\", React.createElement(_components.h1, null, React.createElement(\"a\", {\n    id: \"d\"\n  }), \" d) Refactoring √† l'aide d'un \\\"fat model\\\"\"), \"\\n\", React.createElement(_components.h2, null, React.createElement(\"a\", {\n    id: \"d1\"\n  }), \" d.1) Architectures possibles ?\"), \"\\n\", React.createElement(_components.p, null, \"Si nous reprenons le code actuel du tutoriel de l'API g√©rant des pizzas (\", React.createElement(_components.a, {\n    href: \"https://github.com/e-vinci/js-demos/tree/main/backend-restful-api/restful-api-essentials/persistence\"\n  }, \"api-persistence\"), \"), nous pouvons d√©tecter que celui-ci pourrait √™tre plus propre.\"), \"\\n\", React.createElement(_components.p, null, \"Par exemple, le routeur de \\\"pizzas\\\" s'occupe tant de g√©rer les requ√™tes des clients que d'acc√©der directement aux donn√©es.\", React.createElement(_components.br), \"\\n\", \"G√©n√©ralement, nous pr√©f√©rons s√©parer le code g√©rant les acc√®s aux donn√©es du code g√©rant la pr√©sentation du r√©sultat des op√©rations.\"), \"\\n\", React.createElement(_components.p, null, \"On peut donc se demander comment s√©parer le code traitant de sujets diff√©rents, o√π ayant des responsabilit√©s fort diff√©rentes. Il existe une multitude d'architectures possibles, voici par exemple certains des plus grands noms :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"Architecture MVC (Model View Controller)\"), \" ; au niveau backend, ce genre d'architecture est g√©n√©ralement tr√®s utile quand on fait des MPA (ou Multi-Page Applications) via du Server-Side Rendering. Les \", React.createElement(_components.strong, null, \"Views\"), \" permettent de g√©n√©rer le frontend √† l'aide d'un moteur de templating ; le \", React.createElement(_components.strong, null, \"Controller\"), \" s'occupe de traiter les requ√™tes en appelant le \", React.createElement(_components.strong, null, \"Model\"), \" pour l'acc√®s aux op√©rations sur les donn√©es et en renvoyant les \", React.createElement(_components.strong, null, \"Views\"), \" ad√©quates. Pour une API, cette architecture n'est pas la plus adapt√©e.\"), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"Architecture classique \\\"three-tiers\\\"\"), \" ; au nivau backend, quand on d√©veloppe une architecture trois tiers, cela signifie que l'on d√©coupe notre API en trois couches :\", \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"couche de pr√©sentation\"), \" : cette couche est responsable de pr√©senter les ressources aux clients et d'interpr√©ter les repr√©sentations des ressources donn√©es dans les requ√™tes ;\"), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"couche business\"), \" : cette couche s'occupe de toute la logique de l'API, elle fait l'interm√©diaire entre la couche de pr√©sentation et la couche de donn√©es ;\"), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"couche de donn√©es\"), \" : cette couche s'occupe des acc√®s aux donn√©es et permet notamment la persistance des ressources au sein de bases de donn√©es.\", React.createElement(_components.br), \"\\n\", \"Le mod√®le trois tiers est fort int√©ressant, mais il demande un peu trop d'√©criture de codes sans grande valeur ajout√©e quand nous utilisons le framework Express.\"), \"\\n\"), \"\\n\"), \"\\n\", React.createElement(_components.li, null, \"...\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"Finalement, parmi les architectures classiques, il n'y a pas r√©ellement une architecture qui colle parfaitement √† ce qui est offert par le framework Express, sans devoir √©crire du code sans valeur ajout√©e.\"), \"\\n\", React.createElement(_components.p, null, \"Ainsi, nous allons simplement cr√©er notre propre architecture \\\"maison\\\", sur base de ces points :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"On souhaite pouvoir facilement remplacer la couche d'acc√®s aux donn√©es sans changer la repr√©sentation des ressources ; en effet, dans un premier temps, nous sauvegarderons des donn√©es dans des fichiers JSON. Plus tard, si l'on venait √† sauvegarder les donn√©es dans un syst√®me de gestion de base de donn√©es, on ne veut pas devoir mettre √† jour le code prenant en compte les requ√™tes des clients et pr√©sentant la r√©ponse √† ces requ√™tes ; en gros, on souhaite que le code de nos routers, au sein d'Express, soit ind√©pendant de l'impl√©mentation des acc√®s aux donn√©es.\"), \"\\n\", React.createElement(_components.li, null, \"Nous n'avons pas vraiment de contraintes pour l'aspect \\\"business\\\" de nos APIs : la logique de l'application peut soit s'associer √† la couche de donn√©es, soit √† la couche pr√©sentation. N√©anmoins, nous allons pr√©f√©rer associer un maximum de la logique de notre application √† ce que nous allons appeler un \", React.createElement(_components.strong, null, \"fat model\"), \". Le \", React.createElement(_components.strong, null, \"fat model\"), \" contiendra toutes les op√©rations possibles sur les ressources, ainsi que les acc√®s aux donn√©es.\"), \"\\n\", React.createElement(_components.li, null, \"Le \", React.createElement(_components.strong, null, \"fat model\"), \" peut √™tre soit √©crit en orient√© objet, soit simplement √™tre un module fournissant des fonctions. Dans le cadre de ce cours, nous choisissons de pr√©senter un maximum de programmation fonctionnelle plut√¥t que de l'orient√© objet.\", React.createElement(_components.br), \"\\n\", \"N√©anmoins, n'h√©sitez pas √† √©crire des classes si cela vous tient √† coeur üòâ.\"), \"\\n\"), \"\\n\", React.createElement(_components.h2, null, React.createElement(\"a\", {\n    id: \"d1\"\n  }), \" d.2) Architecture Express & \\\"fat model\\\"\"), \"\\n\", React.createElement(_components.p, null, \"Voici l'architecture que nous allons appliquer dans nos prochaines API :\"), \"\\n\", React.createElement(ScrollableImage, {\n    name: \"architecture.png\",\n    minWidth: \"859px\",\n    maxWidth: \"859px\"\n  }), \"\\n\", React.createElement(\"figcaption\", null, \"Architecture recommand√©e pour ce cours\"), \"\\n\", React.createElement(_components.p, null, \"Voici quelques explications sur ce diagramme que nous allons appliquer dans le prochain tutoriel :\"), \"\\n\", React.createElement(_components.ol, null, \"\\n\", React.createElement(_components.li, null, \"Un client fait la requ√™te √† l'API demandant de lire toutes les pizzas.\"), \"\\n\", React.createElement(_components.li, null, \"Le router de \\\"pizzas\\\" prend le r√¥le de \\\"Controller\\\". Il s'occupe de traiter de la requ√™te et d'appeler une op√©ration du \", React.createElement(_components.strong, null, \"fat model\"), \" pour acc√©der aux ressources.\"), \"\\n\", React.createElement(_components.li, null, \"Le \", React.createElement(_components.strong, null, \"fat model\"), \" s'occupe d'acc√©der aux donn√©es, qui se trouvent au sein d'un fichier JSON, et de les lire.\"), \"\\n\", React.createElement(_components.li, null, \"Le \", React.createElement(_components.strong, null, \"fat model\"), \" retourne des donn√©es sous forme d'un objet JS au router de \\\"pizzas\\\".\"), \"\\n\", React.createElement(_components.li, null, \"Le router de \\\"pizzas\\\" renvoient une repr√©sentation JSON de l'objet JS, un array de pizzas, au client.\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"Nous allons maintenant faire un refactor de notre API de gestion des pizzas en cr√©ant et utilisant un \\\"fat model\\\".\"), \"\\n\", React.createElement(_components.p, null, \"Au sein de votre repo \", React.createElement(_components.strong, null, \"web2\"), \", √† l'aide du boilerplate du cours \", React.createElement(_components.a, {\n    href: \"https://github.com/e-vinci/basic-api-boilerplate\"\n  }, \"basic-api-boilerplate\"), \", veuillez cr√©er le projet nomm√© \", React.createElement(_components.strong, null, \"/web2/tutorials/pizzeria/api/fat-model\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"Si vous ne voyez pas comment utiliser le boilerplate, tout est expliqu√© dans le \", React.createElement(_components.strong, null, \"README\"), \" associ√© au repository du boilerplate.\", React.createElement(_components.br), \"\\n\", \"N'h√©sitez pas √† le lire ; )\"), \"\\n\", React.createElement(_components.p, null, \"Pour la suite du tutoriel, nous consid√©rons que tous les chemins absolus d√©marrent du r√©pertoire\\r\\n\", React.createElement(_components.strong, null, \"/web2/tutorials/pizzeria/api/fat-model\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"Nous allons commencer par cr√©er le \", React.createElement(_components.strong, null, \"fat model\"), \" offrant les op√©rations sur les pizzas.\", React.createElement(_components.br), \"\\n\", \"Veuillez cr√©er le fichier \", React.createElement(_components.strong, null, \"/models/pizzas.js\"), \".\", React.createElement(_components.br), \"\\n\", \"Au sein de ce fichier, veuillez ajouter le code s'occupant des op√©rations sur les ressources de type \\\"pizzas\\\" :\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-js\"\n  }, \"const path = require('node:path');\\r\\nconst { parse, serialize } = require('../utils/json');\\r\\n\\r\\nconst jsonDbPath = path.join(__dirname, '/../data/pizzas.json');\\r\\n\\r\\nconst defaultPizzas = [\\r\\n  {\\r\\n    id: 1,\\r\\n    title: '4 fromages',\\r\\n    content: 'Gruy√®re, S√©rac, Appenzel, Gorgonzola, Tomates',\\r\\n  },\\r\\n  {\\r\\n    id: 2,\\r\\n    title: 'Vegan',\\r\\n    content: 'Tomates, Courgettes, Oignons, Aubergines, Poivrons',\\r\\n  },\\r\\n  {\\r\\n    id: 3,\\r\\n    title: 'Vegetarian',\\r\\n    content: 'Mozarella, Tomates, Oignons, Poivrons, Champignons, Olives',\\r\\n  },\\r\\n  {\\r\\n    id: 4,\\r\\n    title: 'Alpage',\\r\\n    content: 'Gruy√®re, Mozarella, Lardons, Tomates',\\r\\n  },\\r\\n  {\\r\\n    id: 5,\\r\\n    title: 'Diable',\\r\\n    content: 'Tomates, Mozarella, Chorizo piquant, Jalapenos',\\r\\n  },\\r\\n];\\r\\n\\r\\nfunction readAllPizzas(orderBy) {\\r\\n  const orderByTitle = orderBy?.includes('title') ? orderBy : undefined;\\r\\n  let orderedMenu;\\r\\n  const pizzas = parse(jsonDbPath, defaultPizzas);\\r\\n  if (orderByTitle)\\r\\n    orderedMenu = [...pizzas].sort((a, b) => a.title.localeCompare(b.title));\\r\\n  if (orderByTitle === '-title') orderedMenu = orderedMenu.reverse();\\r\\n\\r\\n  const allPizzasPotentiallyOrderd = orderedMenu ?? pizzas;\\r\\n  return allPizzasPotentiallyOrderd;\\r\\n}\\r\\n\\r\\nfunction readOnePizza(id) {\\r\\n  const idNumber = parseInt(id, 10);\\r\\n  const pizzas = parse(jsonDbPath, defaultPizzas);\\r\\n  const indexOfPizzaFound = pizzas.findIndex((pizza) => pizza.id === idNumber);\\r\\n  if (indexOfPizzaFound < 0) return undefined;\\r\\n\\r\\n  return pizzas[indexOfPizzaFound];\\r\\n}\\r\\n\\r\\nfunction createOnePizza(title, content) {\\r\\n  const pizzas = parse(jsonDbPath, defaultPizzas);\\r\\n\\r\\n  const createdPizza = {\\r\\n    id: getNextId(),\\r\\n    title,\\r\\n    content,\\r\\n  };\\r\\n\\r\\n  pizzas.push(createdPizza);\\r\\n\\r\\n  serialize(jsonDbPath, pizzas);\\r\\n\\r\\n  return createdPizza;\\r\\n}\\r\\n\\r\\nfunction getNextId() {\\r\\n  const pizzas = parse(jsonDbPath, defaultPizzas);\\r\\n  const lastItemIndex = pizzas?.length !== 0 ? pizzas.length - 1 : undefined;\\r\\n  if (lastItemIndex === undefined) return 1;\\r\\n  const lastId = pizzas[lastItemIndex]?.id;\\r\\n  const nextId = lastId + 1;\\r\\n  return nextId;\\r\\n}\\r\\n\\r\\nfunction deleteOnePizza(id) {\\r\\n  const idNumber = parseInt(id, 10);\\r\\n  const pizzas = parse(jsonDbPath, defaultPizzas);\\r\\n  const foundIndex = pizzas.findIndex((pizza) => pizza.id === idNumber);\\r\\n  if (foundIndex < 0) return undefined;\\r\\n  const deletedPizzas = pizzas.splice(foundIndex, 1);\\r\\n  const deletedPizza = deletedPizzas[0];\\r\\n  serialize(jsonDbPath, pizzas);\\r\\n\\r\\n  return deletedPizza;\\r\\n}\\r\\n\\r\\nfunction updateOnePizza(id, propertiesToUpdate) {\\r\\n  const idNumber = parseInt(id, 10);\\r\\n  const pizzas = parse(jsonDbPath, defaultPizzas);\\r\\n  const foundIndex = pizzas.findIndex((pizza) => pizza.id === idNumber);\\r\\n  if (foundIndex < 0) return undefined;\\r\\n\\r\\n  const updatedPizza = { ...pizzas[foundIndex], ...propertiesToUpdate };\\r\\n\\r\\n  pizzas[foundIndex] = updatedPizza;\\r\\n\\r\\n  serialize(jsonDbPath, pizzas);\\r\\n\\r\\n  return updatedPizza;\\r\\n}\\r\\n\\r\\nmodule.exports = {\\r\\n  readAllPizzas,\\r\\n  readOnePizza,\\r\\n  createOnePizza,\\r\\n  deleteOnePizza,\\r\\n  updateOnePizza,\\r\\n};\\n\")), \"\\n\", React.createElement(_components.p, null, \"Maintenant, il ne reste plus qu'√† mettre √† jour le router \", React.createElement(_components.strong, null, \"/routes/pizzas.js\"), \" afin de faire les appels aux fonctions offertes par le mod√®le :\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-js\"\n  }, \"const express = require('express');\\r\\nconst {\\r\\n  readAllPizzas,\\r\\n  readOnePizza,\\r\\n  createOnePizza,\\r\\n  deleteOnePizza,\\r\\n  updateOnePizza,\\r\\n} = require('../models/pizzas');\\r\\n\\r\\nconst router = express.Router();\\r\\n\\r\\n/* Read all the pizzas from the menu\\r\\n   GET /pizzas?order=title : ascending order by title\\r\\n   GET /pizzas?order=-title : descending order by title\\r\\n*/\\r\\nrouter.get('/', (req, res) => {\\r\\n  const allPizzasPotentiallyOrdered = readAllPizzas(req?.query?.order);\\r\\n\\r\\n  return res.json(allPizzasPotentiallyOrdered);\\r\\n});\\r\\n\\r\\n// Read the pizza identified by an id in the menu\\r\\nrouter.get('/:id', (req, res) => {\\r\\n  const foundPizza = readOnePizza(req.params.id);\\r\\n\\r\\n  if (!foundPizza) return res.sendStatus(404);\\r\\n\\r\\n  return res.json(foundPizza);\\r\\n});\\r\\n\\r\\n// Create a pizza to be added to the menu.\\r\\nrouter.post('/', (req, res) => {\\r\\n  const title = req?.body?.title?.length !== 0 ? req.body.title : undefined;\\r\\n  const content =\\r\\n    req?.body?.content?.length !== 0 ? req.body.content : undefined;\\r\\n\\r\\n  if (!title || !content) return res.sendStatus(400); // error code '400 Bad request'\\r\\n\\r\\n  const createdPizza = createOnePizza(title, content);\\r\\n\\r\\n  return res.json(createdPizza);\\r\\n});\\r\\n\\r\\n// Delete a pizza from the menu based on its id\\r\\nrouter.delete('/:id', (req, res) => {\\r\\n  const deletedPizza = deleteOnePizza(req.params.id);\\r\\n\\r\\n  if (!deletedPizza) return res.sendStatus(404);\\r\\n\\r\\n  return res.json(deletedPizza);\\r\\n});\\r\\n\\r\\n// Update a pizza based on its id and new values for its parameters\\r\\nrouter.patch('/:id', (req, res) => {\\r\\n  const title = req?.body?.title;\\r\\n  const content = req?.body?.content;\\r\\n\\r\\n  if ((!title && !content) || title?.length === 0 || content?.length === 0) {\\r\\n    return res.sendStatus(400);\\r\\n  }\\r\\n\\r\\n  const updatedPizza = updateOnePizza(req.params.id, { title, content });\\r\\n\\r\\n  if (!updatedPizza) return res.sendStatus(404);\\r\\n\\r\\n  return res.json(updatedPizza);\\r\\n});\\r\\n\\r\\nmodule.exports = router;\\n\")), \"\\n\", React.createElement(_components.p, null, \"Lancer votre API soit via le debugger, soit via la commande \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"npm run dev\")), \".\", React.createElement(_components.br), \"\\n\", \"Veuillez ensuite tester que tout fonctionne bien en ex√©cutant les requ√™tes HTTP d√©j√† pr√©sentes dans le r√©pertoire \", React.createElement(_components.strong, null, \"REST Client\"), \" du boilerplate.\"), \"\\n\", React.createElement(_components.p, null, \"Si tout fonctionne bien, faites un \", React.createElement(_components.strong, null, \"commit\"), \" de votre repo (\", React.createElement(_components.strong, null, \"web2\"), \") avec le message \\\"\", React.createElement(_components.strong, null, \"fat-model\"), \"\\\".\"), \"\\n\", React.createElement(_components.p, null, \"En cas de souci, vous pouvez acc√©der au code du tutoriel ici :\\r\\n\", React.createElement(_components.a, {\n    href: \"https://github.com/e-vinci/js-demos/tree/main/backend-restful-api/restful-api-essentials/fat-model\"\n  }, \"fat-model\"), \".\"), \"\\n\", React.createElement(_components.h1, null, React.createElement(\"a\", {\n    id: \"e\"\n  }), \" e) Exercice 5.2 : Refactoring de la RESTfull API pour myMovies\"), \"\\n\", React.createElement(_components.p, null, \"Vous allez faire un nouveau refactor de la RESTful API de \", React.createElement(_components.strong, null, \"myMovies\"), \", afin de restructurer l'architecture de l'application selon l'architecture recommand√©e, en utilisant un \\\"fat model\\\" pour g√©rer les op√©rations sur les films.\"), \"\\n\", React.createElement(_components.p, null, \"Afin de r√©aliser cet exercice, voici les contraintes d'impl√©mentation :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"Veuillez cr√©er un nouveau projet dans votre repository local et votre web repository (normalement appel√© \", React.createElement(_components.strong, null, \"web2\"), \") nomm√© \", React.createElement(_components.strong, null, \"/exercises/module5/5.2\"), \" sur base d'une copie de votre Exercice 5.1 ou sur base du boilerplate : \", React.createElement(_components.a, {\n    href: \"https://github.com/e-vinci/basic-api-boilerplate\"\n  }, \"basic-api-boilerplate\"), \".\"), \"\\n\", React.createElement(_components.li, null, \"Faites un refactor de votre API g√©rant les films afin que tout ce qui traite des op√©rations sur les ressources soit fait au sein du mod√®le \", React.createElement(_components.strong, null, \"/models/films.json\"), \" ou \", React.createElement(_components.strong, null, \"/models/movies.json\"), \".\"), \"\\n\", React.createElement(_components.li, null, \"Veuillez tester toutes les fonctions de la RESTful API pour la collection de films √† l'aide du REST Client en copiant les requ√™tes d√©velopp√©es pour l'Exercice 4.1 (fichier \", React.createElement(_components.strong, null, \"films.http\"), \" du r√©pertoire \", React.createElement(_components.strong, null, \"REST Client\"), \"). Normalement, il n'y a pas de nouvelles requ√™tes √† √©crire, il suffit juste de les ex√©cuter.\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"Le code de votre application web doit donc se trouver dans votre repository local et votre web repository (normalement appel√© \", React.createElement(_components.strong, null, \"web2\"), \") dans le r√©pertoire nomm√© \", React.createElement(_components.strong, null, \"/exercises/module5/5.2\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"Veuillez faire un \", React.createElement(_components.strong, null, \"commit\"), \" de votre code avec le message suivant : \\\"\", React.createElement(_components.strong, null, \"myMovies : module 5 : API with fat-model\"), \"\\\".\"));\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props)) : _createMdxContent(props);\n}\nexport default MDXContent;\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","import GATSBY_COMPILED_MDX from \"D:/Vinci/code/web2/js-course/frontend/src/mdx-pages/modules/5.fr.mdx\";\nimport React from \"react\";\nimport {graphql} from \"gatsby\";\nimport {MDXProvider} from \"@mdx-js/react\";\nimport {Link} from \"gatsby\";\nimport MainLayout from \"../components/main-layout.js\";\nimport Image from \"../components/image.js\";\nimport Section from \"../components/section.js\";\nimport Content from \"../components/content.js\";\nimport Background from \"../components/background.js\";\nimport SectionHeader from \"../components/section-header.js\";\nimport SectionFooter from \"../components/section-footer.js\";\nimport PageHeader from \"../components/page-header.js\";\nimport {withFrontmatter} from \"../components/hoc/hoc.js\";\nimport CodeBlock from \"../components/codeblock/codeblock.js\";\nimport LinkFile from \"../components/file/link-file.js\";\nimport ScrollableImage from \"../components/image/scrollable-image\";\nimport PublicProjectsView from \"../components/public-projects/public-projects-view\";\nimport {AuthenticatedTemplate, UnauthenticatedTemplate} from \"@azure/msal-react\";\nimport AuthenticatedBlock from \"../components/auth/authenticated-block.js\";\nimport UnAuthenticatedBlock from \"../components/auth/unauthenticated-block.js\";\nimport NestedMdxBlock from \"../components/mdx/nested-mdx-block.js\";\nimport YoutubeImage from \"../components/image/youtube-image.js\";\nconst shortcodes = {\n  Link,\n  Image,\n  Section,\n  Content,\n  Background,\n  SectionHeader,\n  SectionFooter,\n  PageHeader,\n  CodeBlock,\n  LinkFile,\n  ScrollableImage,\n  PublicProjectsView,\n  AuthenticatedBlock,\n  UnAuthenticatedBlock,\n  NestedMdxBlock,\n  YoutubeImage\n};\nfunction PageTemplate({data: {mdx, allImages}, children}) {\n  shortcodes.PageHeader = withFrontmatter(PageHeader, mdx?.frontmatter);\n  console.log(\"CHILDREN : \", children);\n  return React.createElement(MainLayout, Object.assign({}, mdx?.frontmatter ? {\n    frontmatter: mdx.frontmatter\n  } : {}, mdx?.frontmatter?.navbarExtraStyles ? {\n    navbarExtraStyles: mdx.frontmatter.navbarExtraStyles\n  } : {}, mdx?.frontmatter?.headerImage ? {\n    headerImage: mdx.frontmatter.headerImage\n  } : {}, mdx?.frontmatter?.featuredImage ? {\n    featuredImage: mdx.frontmatter.featuredImage\n  } : {}, mdx?.frontmatter?.title ? {\n    pageTitle: mdx.frontmatter.title\n  } : {}, allImages && allImages.length > 0 ? {\n    allImages: allImages\n  } : {}), React.createElement(MDXProvider, {\n    components: shortcodes\n  }, React.createElement(\"div\", {\n    className: mdx?.frontmatter?.autoMargin ? \"page page--auto-margin\" : \"page\"\n  }, React.createElement(\"h1\", null, mdx?.frontmatter.title), React.createElement(\"div\", null, children.length), children)));\n}\nexport default function GatsbyMDXWrapper(props) {\n  return React.createElement(PageTemplate, props, React.createElement(GATSBY_COMPILED_MDX, props));\n}\nexport const pageQuery = graphql`\n  query pagesAndImages($slug: String) {\n    mdx(fields: { slug: { eq: $slug } }) {\n      id\n      body\n      fields{\n        slug\n      }\n      \n      frontmatter {\n        title\n        date\n        navbarExtraStyles\n        headerImage\n        featuredImage\n        description\n        autoMargin\n      }\n    }\n    allImages: allFile(\n      filter: {\n        sourceInstanceName: { eq: \"images\" }\n        extension: { nin: [\"ico\", \"svg\"] }\n      }\n    ) {\n      edges {\n        node {\n          childImageSharp {\n            gatsbyImageData(\n              quality: 90\n              layout: FULL_WIDTH\n              placeholder: TRACED_SVG\n              tracedSVGOptions: { color: \"green\", background: \"grey\" }\n            )\n          }\n          base\n        }\n      }\n    }\n  }\n`;\n"],"names":["_createMdxContent","props","_components","Object","assign","h1","p","ul","li","a","h2","br","strong","pre","code","h3","h4","ol","_provideComponents","components","ScrollableImage","id","component","Error","_missingMdxReference","React","href","className","name","minWidth","maxWidth","wrapper","MDXLayout","shortcodes","Link","Image","Section","Content","Background","SectionHeader","SectionFooter","PageHeader","CodeBlock","LinkFile","PublicProjectsView","AuthenticatedBlock","UnAuthenticatedBlock","NestedMdxBlock","YoutubeImage","PageTemplate","data","mdx","allImages","children","withFrontmatter","frontmatter","MainLayout","navbarExtraStyles","headerImage","featuredImage","title","pageTitle","length","MDXProvider","autoMargin","GatsbyMDXWrapper","GATSBY_COMPILED_MDX"],"sourceRoot":""}