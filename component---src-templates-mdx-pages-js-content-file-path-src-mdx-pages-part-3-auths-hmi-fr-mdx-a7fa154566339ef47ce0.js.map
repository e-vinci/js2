{"version":3,"file":"component---src-templates-mdx-pages-js-content-file-path-src-mdx-pages-part-3-auths-hmi-fr-mdx-a7fa154566339ef47ce0.js","mappings":"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","sources":["webpack://myjscourse/./src/mdx-pages/part3/auths-hmi.fr.mdx","webpack://myjscourse/./src/templates/mdx-pages.js"],"sourcesContent":["/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport {useMDXComponents as _provideComponents} from \"@mdx-js/react\";\nimport React from \"react\";\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h1: \"h1\",\n    p: \"p\",\n    strong: \"strong\",\n    ul: \"ul\",\n    li: \"li\",\n    h2: \"h2\",\n    code: \"code\",\n    pre: \"pre\",\n    br: \"br\",\n    table: \"table\",\n    thead: \"thead\",\n    tr: \"tr\",\n    th: \"th\",\n    tbody: \"tbody\",\n    td: \"td\",\n    a: \"a\",\n    em: \"em\",\n    h4: \"h4\"\n  }, _provideComponents(), props.components), {InternalPageMenu, PathViewer, PathViewerItem, InternalPageMenuItem, InternalPageTitle} = _components;\n  if (!InternalPageMenu) _missingMdxReference(\"InternalPageMenu\", true);\n  if (!InternalPageMenuItem) _missingMdxReference(\"InternalPageMenuItem\", true);\n  if (!InternalPageTitle) _missingMdxReference(\"InternalPageTitle\", true);\n  if (!PathViewer) _missingMdxReference(\"PathViewer\", true);\n  if (!PathViewerItem) _missingMdxReference(\"PathViewerItem\", true);\n  return React.createElement(React.Fragment, null, React.createElement(_components.h1, null, \"c) Sécurisation d'un frontend\"), \"\\n\", React.createElement(InternalPageMenu, null, React.createElement(PathViewer, null, React.createElement(PathViewerItem, {\n    to: \"/\"\n  }, \" web2course \"), React.createElement(PathViewerItem, {\n    to: \"/part3\"\n  }, \" Partie 3 \"), React.createElement(PathViewerItem, {\n    selected: true\n  }, \" c) Sessions & JWT \")), React.createElement(InternalPageMenuItem, null, \" Où sauvegarder de l'info dans un browser ? \"), React.createElement(InternalPageMenuItem, null, \" Persistance de données de session via le web storage \"), React.createElement(InternalPageMenuItem, null, \" Exercice 3.3 : Persistence d'un thème  \"), React.createElement(InternalPageMenuItem, null, \" Authentification d'un utilisateur via une IHM & JWT \"), React.createElement(InternalPageMenuItem, null, \" Sauvegarde des données de session \"), React.createElement(InternalPageMenuItem, null, \" Déconnexion d'un utilisateur \"), React.createElement(InternalPageMenuItem, null, \" Autorisation de l'appel à une opération protégée \"), React.createElement(InternalPageMenuItem, null, \" Exercice 3.4 : Authentification et appel d'opérations protégées par JWT \"), React.createElement(InternalPageMenuItem, null, \" Exercice 3.4b : Modification de ressources & JWT \"), React.createElement(InternalPageMenuItem, null, \" 🍬 Persistance de données de session via des cookies \")), \"\\n\", React.createElement(_components.h1, null, React.createElement(InternalPageTitle, null, \" Où sauvegarder de l'info dans un browser ? \")), \"\\n\", React.createElement(_components.p, null, \"Nous avons vu qu'une des exigences associées à la création d'une application selon l'architecture REST, c'est qu'elle soit \", React.createElement(_components.strong, null, \"stateless\"), \" : l'API ne peut pas garder l'état du client, sa session, côté serveur.\"), \"\\n\", React.createElement(_components.p, null, \"C'est donc au client de sauvegarder ses données de session.\"), \"\\n\", React.createElement(_components.p, null, \"Mais où pouvons nous sauvegarder des données de manière persistante côté client ?\"), \"\\n\", React.createElement(_components.p, null, \"Il existe deux façons principales de sauvegarder de l'info dans un browser :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"le \", React.createElement(_components.strong, null, \"web storage\"), \" ;\"), \"\\n\", React.createElement(_components.li, null, \"les \", React.createElement(_components.strong, null, \"cookies\"), \".\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"Dans le cadre de ce cours, nous allons principalement voir comment sauvegarder de l'info à l'aide du \", React.createElement(_components.strong, null, \"web storage\"), \". Dans la partie du cours sur la gestion de l'authentification et l'autorisation d'utilisateurs, vous pourrez optionnellement voir comment les cookies peuvent être utilisés pour sauvegarder des données de session côté client.\"), \"\\n\", React.createElement(_components.p, null, \"NB : le browser met à disposition d'autres API un peu moins connues pour sauvegarder des infos. Nous ne les verrons pas dans le cadre de ce cours, mais il reste néanmoins intéressant de lire très rapidement de quoi il s'agit :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"IndexedDB API\"), \" : permet de sauvegarder côté client de grandes quantités d'infos structurées, incluant des fichiers ; c'est une base de données orientée objets en JS qui permet les transactions.\"), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"Cache API\"), \" : permet d'enregistrer et retrouver des requêtes et leur réponses. Bien qu'à la base créé pour pouvoir fournir des réponses plus rapides à certaines requêtes, cette API peut aussi être utilisée comme mécanisme général de stockage.\"), \"\\n\"), \"\\n\", React.createElement(_components.h1, null, React.createElement(InternalPageTitle, null, \" Persistance de données de session via le web storage \")), \"\\n\", React.createElement(_components.h2, null, \"Introduction\"), \"\\n\", React.createElement(_components.p, null, \"Le \", React.createElement(_components.strong, null, \"Web Storage API\"), \" fournit un mécanisme permettant aux browser d'enregistrer des paires \", React.createElement(_components.strong, null, \"clé / valeur\"), \" d'une manière plus intuitive que l'utilisation de cookies.\"), \"\\n\", React.createElement(_components.p, null, \"Il existe deux mécanismes au sein du web storage :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, React.createElement(_components.code, null, \"sessionStorage\")), \" :\", \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"offre un espace de stockage séparé pour chaque origine pour la durée de la session d'une page, tant que le browser est ouvert.\"), \"\\n\", React.createElement(_components.li, null, \"les clés / valeurs y sont enregistrées sous forme de string uniquement ;\"), \"\\n\", React.createElement(_components.li, null, \"met à disposition un espace de stockage plus grand qu'un cookie, ~5MB maximum par origine ;\"), \"\\n\"), \"\\n\"), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, React.createElement(_components.code, null, \"localStorage\")), \" :\", \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"offre aussi un espace de stockage séparé pour chaque origine, mais les données persistent quand le browser est fermé et rouvert ;\"), \"\\n\", React.createElement(_components.li, null, \"est un espace de stockage plus grand qu'un cookie, limité à ~10MB en cas de crash/restart du browser.\"), \"\\n\"), \"\\n\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"Les principales méthodes offertes par \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"sessionStorage\")), \" et \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"localStorage\")), \" sont les mêmes. Voici quelques exemples de codes par méthode.\"), \"\\n\", React.createElement(_components.h2, null, React.createElement(_components.code, null, \"setItem()\")), \"\\n\", React.createElement(_components.p, null, \"Cette méthode permet d'enregistrer, pour une clé donnée, la valeur associée :\"), \"\\n\", React.createElement(_components.pre, {\n    numbered: true,\n    highlighting: \"4-5\"\n  }, React.createElement(_components.code, {\n    className: \"language-ts\"\n  }, \"const storeName = 'user';\\n\\nconst setUserSessionData = (user) => {\\n  const storageValue = JSON.stringify(user);\\n  localStorage.setItem(storeName, storageValue);\\n};\\n\")), \"\\n\", React.createElement(_components.p, null, \"Pour enregistrer un objet JS sous forme de string, il suffit de le sérialiser à l'aide de la méthode \", React.createElement(_components.code, null, \"JSON.stringify()\"), \".\"), \"\\n\", React.createElement(_components.h2, null, React.createElement(_components.code, null, \"getItem()\")), \"\\n\", React.createElement(_components.p, null, \"Cette méthode permet d'obtenir la valeur associée à la clé donnée en argument :\"), \"\\n\", React.createElement(_components.pre, {\n    numbered: true,\n    highlighting: \"4,6\"\n  }, React.createElement(_components.code, {\n    className: \"language-ts\"\n  }, \"const storeName = 'user';\\n\\nconst getUserSessionData = () => {\\n  const retrievedUser = localStorage.getItem(storeName);\\n  if (!retrievedUser) return;\\n  return JSON.parse(retrievedUser);\\n};\\n\")), \"\\n\", React.createElement(_components.p, null, \"Pour cet exemple, comme la valeur a été sérialisée, nous pouvons récupérer l'objet grâce à la méthode \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"JSON.parse()\")), \".\"), \"\\n\", React.createElement(_components.h2, null, React.createElement(_components.code, null, \"removeITem()\")), \"\\n\", React.createElement(_components.p, null, \"Cette méthode permet d'effacer une clé / valeur :\"), \"\\n\", React.createElement(_components.pre, {\n    numbered: true,\n    highlighting: \"4\"\n  }, React.createElement(_components.code, {\n    className: \"language-ts\"\n  }, \"const storeName = 'user';\\n\\nconst removeSessionData = () => {\\n  localStorage.removeItem(storeName);\\n};\\n\")), \"\\n\", React.createElement(_components.h2, null, React.createElement(_components.code, null, \"clear()\")), \"\\n\", React.createElement(_components.p, null, \"Cette méthode permet d'effacer tout l'espace de stockage pour une origine donnée.\"), \"\\n\", React.createElement(_components.p, null, \"Cette méthode est très utile lorsque l'on souhaite effacer toute la session d'un utilisateur, notamment lors du logout d'un utilisateur.\"), \"\\n\", React.createElement(_components.h1, null, React.createElement(InternalPageTitle, null, \" Exercice 3.3 : Persistence d'un thème \")), \"\\n\", React.createElement(_components.p, null, \"Veuillez partir d'une copie de l'exercice (\", React.createElement(_components.code, null, \"/exercises/2.15b\"), \") pour créer un nouveau projet nommé \", React.createElement(_components.code, null, \"exercises/3.3-4\"), \" afin de continuer l'application \", React.createElement(_components.code, null, \"myMovies\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"Vous devez ajouter un moyen de switcher d'un thème \\\"light\\\" ou \\\"dark\\\" au sein de votre application.\"), \"\\n\", React.createElement(_components.p, null, \"Par exemple, vous pouvez le faire via un bouton dans le header ou le footer permettant de basculer d'un thème à l'autre.\"), \"\\n\", React.createElement(_components.p, null, \"L'effet du thème doit être visible seulement sur le footer et le header... Il n'est pas nécessaire de faire un thème \\\"dark\\\" complet sur la page. Veuillez donc changer les couleurs des backgrounds du header & du footer et de certains de leurs textes en fonction du thème.\"), \"\\n\", React.createElement(_components.p, null, \"Vous devez sauvegarder le thème sélectionné par l'utilisateur comme donnée de session persistante. Ainsi, vous allez sauvegarder l'information du thème dans le \", React.createElement(_components.code, null, \"localStorage\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"Au redémarrage du browser, ou lors du refresh du frontend, l'application doit toujours afficher ses écrans selon le dernier thème sélectionné.\"), \"\\n\", React.createElement(_components.p, null, \"Une fois tout fonctionnel, veuillez faire un commit avec le message suivant : \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"new:ex3.3\")), \".\"), \"\\n\", React.createElement(_components.h1, null, React.createElement(InternalPageTitle, null, \" Authentification d'un utilisateur via une IHM & JWT \")), \"\\n\", React.createElement(_components.p, null, \"Pour authentifier un utilisateur via une IHM, il suffit de faire une requête à une RESTful API.\"), \"\\n\", React.createElement(_components.p, null, \"Généralement, l'utilisateur devra d'abord créer son compte. Il utilisera un formulaire demandant au minimum un identifiant (username, adresse e-mail ou autres) et un password.\", React.createElement(_components.br), \"\\n\", \"Dans le cadre d'une SPA, l'IHM fera appel à une opération de type \", React.createElement(_components.code, null, \"register\"), \" lorsque l'utilisateur soumet le formulaire.\"), \"\\n\", React.createElement(_components.p, null, \"Par la suite, lorsque le compte de l'utilisateur existe, l'IHM fera appel à une opération de type \", React.createElement(_components.code, null, \"login\"), \" lorsque l'utilisateur tentera de se connecter à l'aide d'un formulaire.\"), \"\\n\", React.createElement(_components.p, null, \"Dans les deux cas, \", React.createElement(_components.code, null, \"register\"), \" ou \", React.createElement(_components.code, null, \"login\"), \", le développeur devra connaître les opérations mises à disposition par l'API.\"), \"\\n\", React.createElement(_components.p, null, \"Dans le cadre du site de la pizzeria, nous savons que l'API met à disposition ces deux opérations :\"), \"\\n\", React.createElement(_components.table, null, React.createElement(_components.thead, null, React.createElement(_components.tr, null, React.createElement(_components.th, null, \"URI\"), React.createElement(_components.th, null, \"Méthode HTTP\"), React.createElement(_components.th, null, \"Opération\"))), React.createElement(_components.tbody, null, React.createElement(_components.tr, null, React.createElement(_components.td, null, React.createElement(_components.strong, null, React.createElement(_components.code, null, \"auths/login\"))), React.createElement(_components.td, null, React.createElement(_components.strong, null, \"POST\")), React.createElement(_components.td, null, \"Vérifier les credentials d'une ressource de type \\\"users\\\" et renvoyer le username et un token JWT si les credentials sont OK\")), React.createElement(_components.tr, null, React.createElement(_components.td, null, React.createElement(_components.strong, null, React.createElement(_components.code, null, \"auths/register\"))), React.createElement(_components.td, null, React.createElement(_components.strong, null, \"POST\")), React.createElement(_components.td, null, \"Créer une ressource de type \\\"users\\\" et renvoyer le username et un token JWT\")))), \"\\n\", React.createElement(\"br\"), \"\\n\", React.createElement(_components.p, null, \"Pour ce tutoriel, veuillez créer une copie du tutoriel \", React.createElement(_components.code, null, \"fetch-proxy\"), \", si nécessaire voici le code du tutoriel \", React.createElement(_components.a, {\n    href: \"https://github.com/e-vinci/ts-demos/tree/main/front/fetch-proxy\"\n  }, \"fetch-proxy\"), \", et l'appeler \", React.createElement(_components.code, null, \"session-jwt\"), \". Changez le nom du projet dans \", React.createElement(_components.code, null, \"package.json\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"Veuillez démarrer la version \", React.createElement(_components.a, {\n    href: \"https://github.com/e-vinci/ts-demos/tree/main/back/api/auths\"\n  }, \"auths\"), \" de l'API de la pizzeria.\"), \"\\n\", React.createElement(_components.p, null, \"Pour notre tutoriel, nous avons besoin de créer deux nouvelles pages :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, React.createElement(_components.code, null, \"RegisterPage\"), \" qui offrira un formulaire pour créer un compte utilisateur ; nous considérons qu'un utilisateur qui vient d'être créé est connecté (il ne doit donc pas se loguer).\"), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.code, null, \"LoginPage\"), \" qui offrira un formulaire pour se connecter à son compte utilisateur.\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"Nous allons commencer par \", React.createElement(_components.code, null, \"RegisterPage\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"💭 Très souvent, nous allons devoir penser si c'est à \", React.createElement(_components.code, null, \"RegisterPage\"), \" de faire le fetch des données, ou si ce fetch doit être fait ailleurs.\"), \"\\n\", React.createElement(_components.p, null, \"S'il n'y a pas d'état associé à une opération de \\\"register\\\", alors tout serait OK de faire le fetch dans \", React.createElement(_components.code, null, \"RegisterPage\"), \". Néanmoins, si un utilisateur est connecté, il va falloir mettre  jour la \", React.createElement(_components.code, null, \"Navbar\"), \"... et qui dit mise à jour de la UI, dit gestion de l'état...\", React.createElement(_components.br), \"\\n\", \"Ainsi, nous nous rendons compte qu'il est important de définir une variable d'état qui correspondra à l'utilisateur connecté, et qui nous permettra notamment d'afficher le nom de l'utilisateur connecté, d'afficher dynamiquement la \", React.createElement(_components.code, null, \"Navbar\"), \" (quand on est connecté, les éléments de la barre permettant de créer un compte ou de se connecter doivent disparaître...).\"), \"\\n\", React.createElement(_components.p, null, \"Notons que nous souhaitons appliquer le même format à tous les formulaires de chacune des pages. Dès lors, le plus direct est de renommer \", React.createElement(_components.code, null, \"AddPizzaPage.css\"), \" en \", React.createElement(_components.code, null, \"index.css\"), \". Nous allons utiliser \", React.createElement(_components.code, null, \"index.css\"), \" tant dans \", React.createElement(_components.code, null, \"AddPizzaPage\"), \" que \", React.createElement(_components.code, null, \"RegisterPage\"), \" (et plus tard \", React.createElement(_components.code, null, \"LoginPage\"), \").\"), \"\\n\", React.createElement(_components.p, null, \"Ainsi, nous allons définir le fetch du register au sein de \", React.createElement(_components.code, null, \"App\"), \" en y ajoutant la nouvelle fonction \", React.createElement(_components.code, null, \"registerUser\"), \", en mettant à jour le contexte, et en créant une nouvelle variable d'état \", React.createElement(_components.code, null, \"authenticatedUser\"), \" (associé à un nouveau type \", React.createElement(_components.code, null, \"MaybeAuthenticatedUser\"), \" construit sur \", React.createElement(_components.code, null, \"AuthenticatedUser\"), \") :\"), \"\\n\", React.createElement(_components.pre, {\n    numbered: true,\n    highlighting: \"5-30,41\"\n  }, React.createElement(_components.code, {\n    className: \"language-tsx\"\n  }, \"// code existant\\nconst [authenticatedUser, setAuthenticatedUser] =\\n    useState<MaybeAuthenticatedUser>(undefined);\\n// ...\\nconst registerUser = async (newUser: User) => {\\n    try {\\n      const options = {\\n        method: \\\"POST\\\",\\n        body: JSON.stringify(newUser),\\n        headers: {\\n          \\\"Content-Type\\\": \\\"application/json\\\",\\n        },\\n      };\\n\\n      const response = await fetch(\\\"/api/auths/register\\\", options);\\n\\n      if (!response.ok)\\n        throw new Error(\\n          `fetch error : ${response.status} : ${response.statusText}`\\n        );\\n\\n      const createdUser: AuthenticatedUser = await response.json();\\n\\n      setAuthenticatedUser(createdUser);\\n      console.log(\\\"createdUser: \\\", createdUser);\\n    } catch (err) {\\n      console.error(\\\"registerUser::error: \\\", err);\\n      throw err;\\n    }\\n  }\\n  // reste du code\\n\\n  const fullPizzaContext: PizzeriaContext = {\\n    addPizza,\\n    pizzas,\\n    setPizzas,\\n    actionToBePerformed,\\n    setActionToBePerformed,\\n    clearActionToBePerformed,\\n    drinks,\\n    registerUser,\\n  };\\n\")), \"\\n\", React.createElement(_components.p, null, \"Comme le contexte a été mis à jour, nous devons mettre à jour le type associé \", React.createElement(_components.code, null, \"PizzeriaContext\"), \", ainsi que créer :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"un nouveau type \", React.createElement(_components.code, null, \"User\")), \"\\n\", React.createElement(_components.li, null, \"un nouveau type \", React.createElement(_components.code, null, \"AuthenticatedUser\")), \"\\n\", React.createElement(_components.li, null, \"un nouveau type \", React.createElement(_components.code, null, \"MaybeAuthenticatedUser\"), \" (qui est un \", React.createElement(_components.code, null, \"AuthenticatedUser\"), \" ou `undefined).\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"Pour cela, veuillez mettre à jour \", React.createElement(_components.code, null, \"/src/types.ts\"), \" :\"), \"\\n\", React.createElement(_components.pre, {\n    numbered: true,\n    highlighting: \"9,17-20,22,30-31\"\n  }, React.createElement(_components.code, {\n    className: \"language-ts\"\n  }, \"interface PizzeriaContext {\\n  pizzas: Pizza[];\\n  setPizzas: (pizzas: Pizza[]) => void;\\n  actionToBePerformed: boolean;\\n  setActionToBePerformed: (actionToBePerformed: boolean) => void;\\n  clearActionToBePerformed: () => void;\\n  drinks: Drink[];\\n  addPizza: (newPizza: NewPizza) => Promise<void>;\\n  registerUser: (newUser: User) => Promise<void>;\\n}\\n\\ninterface User {\\n  username: string;\\n  password: string;\\n}\\n\\ninterface AuthenticatedUser {\\n  username: string;\\n  token: string;\\n}\\n\\ntype MaybeAuthenticatedUser = AuthenticatedUser | undefined;\\n\\nexport type {\\n  Pizza,\\n  NewPizza,\\n  Drink,\\n  PizzeriaContext,\\n  User,\\n  AuthenticatedUser,\\n  MaybeAuthenticatedUser,\\n};\\n\")), \"\\n\", React.createElement(_components.p, null, \"Et voici le code de la nouvelle \", React.createElement(_components.code, null, \"RegisterPage\"), \" (veuillez la créer) qui fait appel au contexte pour récupérer la fonction \", React.createElement(_components.code, null, \"registerUser\"), \" :\"), \"\\n\", React.createElement(_components.pre, {\n    numbered: true\n  }, React.createElement(_components.code, {\n    className: \"language-tsx\"\n  }, \"import { useState, SyntheticEvent } from \\\"react\\\";\\nimport \\\"./index.css\\\";\\nimport { useNavigate, useOutletContext } from \\\"react-router-dom\\\";\\nimport { PizzeriaContext } from \\\"../../types\\\";\\n\\nconst RegisterPage = () => {\\n  const { registerUser }: PizzeriaContext = useOutletContext();\\n\\n  const navigate = useNavigate();\\n  const [username, setUsername] = useState(\\\"\\\");\\n  const [password, setPassword] = useState(\\\"\\\");\\n\\n  const handleSubmit = async (e: SyntheticEvent) => {\\n    e.preventDefault();\\n    try {\\n      await registerUser({ username, password });\\n      navigate(\\\"/\\\");\\n    } catch (err) {\\n      console.error(\\\"RegisterPage::error: \\\", err);\\n    }\\n  };\\n\\n  const handleUsernameInputChange = (e: SyntheticEvent) => {\\n    const input = e.target as HTMLInputElement;\\n    setUsername(input.value);\\n  };\\n\\n  const handlePasswordChange = (e: SyntheticEvent) => {\\n    const input = e.target as HTMLInputElement;\\n    setPassword(input.value);\\n  };\\n\\n  return (\\n    <div>\\n      <h1>Ajoutez un utilisateur</h1>\\n      <form onSubmit={handleSubmit}>\\n        <label htmlFor=\\\"username\\\">Username</label>\\n        <input\\n          value={username}\\n          type=\\\"text\\\"\\n          id=\\\"username\\\"\\n          name=\\\"username\\\"\\n          onChange={handleUsernameInputChange}\\n          required\\n        />\\n        <label htmlFor=\\\"password\\\">Password</label>\\n        <input\\n          value={password}\\n          type=\\\"text\\\"\\n          id=\\\"password\\\"\\n          name=\\\"password\\\"\\n          onChange={handlePasswordChange}\\n          required\\n        />\\n        <button type=\\\"submit\\\">Créer le compte</button>\\n      </form>\\n    </div>\\n  );\\n};\\n\\nexport default RegisterPage;\\n\")), \"\\n\", React.createElement(_components.p, null, \"Maintenant nous devons mettre à jour la configuration de notre router pour offrir la \", React.createElement(_components.code, null, \"RegisterPage\"), \" : pour ce faire, veuillez mettre à jour \", React.createElement(_components.code, null, \"/src/main.tsx\"), \" :\"), \"\\n\", React.createElement(_components.pre, {\n    numbered: true,\n    highlighting: \"14-17\"\n  }, React.createElement(_components.code, {\n    className: \"language-tsx\"\n  }, \"const router = createBrowserRouter([\\n  {\\n    path: \\\"/\\\",\\n    element: <App />,\\n    children: [\\n      {\\n        path: \\\"\\\",\\n        element: <HomePage />,\\n      },\\n      {\\n        path: \\\"add-pizza\\\",\\n        element: <AddPizzaPage />,\\n      },\\n      {\\n        path: \\\"register\\\",\\n        element: <RegisterPage />,\\n      },\\n    ],\\n  },\\n]);\\n\")), \"\\n\", React.createElement(_components.p, null, \"Il faut aussi mettre à jour la \", React.createElement(_components.code, null, \"Navbar\"), \" pour offrir un lien vers la \", React.createElement(_components.code, null, \"RegisterPage\"), \" et avoir un affichage dynamique des éléments de navigation en fonction que les utilisateurs sont connectés ou non :\"), \"\\n\", React.createElement(_components.pre, {\n    numbered: true,\n    highlighting: \"1-3,5,8,15,17-23\"\n  }, React.createElement(_components.code, {\n    className: \"language-tsx\"\n  }, \"interface NavBarProps {\\n  authenticatedUser: MaybeAuthenticatedUser;\\n}\\n\\nconst NavBar = ({authenticatedUser} : NavBarProps) => {\\n  const navigate = useNavigate();\\n\\n  if(authenticatedUser) {\\n    return (\\n      <nav>\\n        <button onClick={() => navigate(\\\"/\\\")}>Home</button>\\n        <button onClick={() => navigate(\\\"/add-pizza\\\")}>Ajouter une pizza</button>\\n      </nav>\\n    );\\n  }\\n\\n  return (\\n    <nav>\\n      <button onClick={() => navigate(\\\"/\\\")}>Home</button>\\n      <button onClick={() => navigate(\\\"/register\\\")}>Créer un utilisateur</button>\\n      <button onClick={() => navigate(\\\"/login\\\")}>Se connecter</button>\\n    </nav>\\n  );\\n};\\n\")), \"\\n\", React.createElement(_components.p, null, \"Ici nous avons ajouté un paramètre qui contiendra, l'éventuel \", React.createElement(_components.code, null, \"authenticatedUser\"), \" si l'utilisateur vient de créer son compte (ou s'il s'est logué, mais nous verrons ça plus tard).\"), \"\\n\", React.createElement(_components.p, null, \"Nous mettons donc à jour le \", React.createElement(_components.code, null, \"return\"), \" de \", React.createElement(_components.code, null, \"App\"), \" afin de passer cette variable \", React.createElement(_components.code, null, \"authenticatedUser\"), \" à la \", React.createElement(_components.code, null, \"Navbar\"), \" :\"), \"\\n\", React.createElement(_components.pre, {\n    numbered: true,\n    highlighting: \"9\"\n  }, React.createElement(_components.code, {\n    className: \"language-tsx\"\n  }, \"return (\\n    <div className=\\\"page\\\">\\n      <Header\\n        title=\\\"We love Pizza\\\"\\n        version={0 + 1}\\n        handleHeaderClick={handleHeaderClick}\\n      />\\n      <main>\\n        <NavBar authenticatedUser={authenticatedUser} />\\n        <Outlet context={fullPizzaContext} />\\n      </main>\\n      <Footer />\\n    </div>\\n  );\\n\")), \"\\n\", React.createElement(_components.p, null, \"Veuillez exécuter le frontend (ainsi que l'API \", React.createElement(_components.code, null, \"auths\"), \") et vous assurer que l'utilisateur que vous tentez de créer est bien créé par votre API.\"), \"\\n\", React.createElement(_components.p, null, \"Veuillez utiliser le formulaire de création de compte et vérifier que cela fonctionne. Une fois un nouveau compte créé, votre \", React.createElement(_components.code, null, \"Navbar\"), \" ne devrait plus afficher \", React.createElement(_components.code, null, \"Créer un utilisateur\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"Nous allons maintenant apporter des modifications quasi identiques pour gérer la \", React.createElement(_components.code, null, \"LoginPage\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"Commençons par créer la fonction \", React.createElement(_components.code, null, \"loginUser\"), \" dans \", React.createElement(_components.code, null, \"App\"), \" :\"), \"\\n\", React.createElement(_components.pre, {\n    numbered: true,\n    highlighting: \"1-26,39\"\n  }, React.createElement(_components.code, {\n    className: \"language-tsx\"\n  }, \"const loginUser = async (user: User) => {\\n    try {\\n      const options = {\\n        method: \\\"POST\\\",\\n        body: JSON.stringify(user),\\n        headers: {\\n          \\\"Content-Type\\\": \\\"application/json\\\",\\n        },\\n      };\\n\\n      const response = await fetch(\\\"/api/auths/login\\\", options);\\n\\n      if (!response.ok)\\n        throw new Error(\\n          `fetch error : ${response.status} : ${response.statusText}`\\n        );\\n\\n      const authenticatedUser: AuthenticatedUser = await response.json();\\n      console.log(\\\"authenticatedUser: \\\", authenticatedUser);\\n\\n      setAuthenticatedUser(authenticatedUser);\\n    } catch (err) {\\n      console.error(\\\"loginUser::error: \\\", err);\\n      throw err;\\n    }\\n  };\\n\\n  // Reste du code\\n\\n  const fullPizzaContext: PizzeriaContext = {\\n    addPizza,\\n    pizzas,\\n    setPizzas,\\n    actionToBePerformed,\\n    setActionToBePerformed,\\n    clearActionToBePerformed,\\n    drinks,\\n    registerUser,\\n    loginUser,\\n  };\\n\")), \"\\n\", React.createElement(_components.p, null, \"Comme le contexte a été mis à jour, nous devons mettre à jour le type associé \", React.createElement(_components.code, null, \"PizzeriaContext\"), \" au sein de \", React.createElement(_components.code, null, \"/src/types.ts\"), \" :\"), \"\\n\", React.createElement(_components.pre, {\n    highlighting: \"10\"\n  }, React.createElement(_components.code, {\n    className: \"language-ts\"\n  }, \"interface PizzeriaContext {\\n  pizzas: Pizza[];\\n  setPizzas: (pizzas: Pizza[]) => void;\\n  actionToBePerformed: boolean;\\n  setActionToBePerformed: (actionToBePerformed: boolean) => void;\\n  clearActionToBePerformed: () => void;\\n  drinks: Drink[];\\n  addPizza: (newPizza: NewPizza) => Promise<void>;\\n  registerUser: (newUser: User) => Promise<void>;\\n  loginUser: (user: User) => Promise<void>;\\n}\\n\")), \"\\n\", React.createElement(_components.p, null, \"Et voici le code de la nouvelle \", React.createElement(_components.code, null, \"LoginPage\"), \" (veuillez créer cette page) qui fait appel au contexte pour récupérer la fonction \", React.createElement(_components.code, null, \"loginUser\"), \" :\"), \"\\n\", React.createElement(_components.pre, {\n    numbered: true\n  }, React.createElement(_components.code, {\n    className: \"language-tsx\"\n  }, \"import { useState, SyntheticEvent } from \\\"react\\\";\\nimport \\\"./index.css\\\";\\nimport { useNavigate, useOutletContext } from \\\"react-router-dom\\\";\\nimport { PizzeriaContext } from \\\"../../types\\\";\\n\\nconst LoginPage = () => {\\n\\n   const { loginUser } : PizzeriaContext = useOutletContext();\\n  \\n    const navigate = useNavigate();\\n    const [username, setUsername] = useState(\\\"\\\");\\n    const [password, setPassword] = useState(\\\"\\\");\\n  \\n    const handleSubmit = async (e: SyntheticEvent) => {\\n    e.preventDefault();\\n    try {\\n      await loginUser({ username, password });\\n      navigate(\\\"/\\\");\\n    } catch (err) {\\n      console.error(\\\"LoginPage::error: \\\", err);\\n    }\\n  };\\n  \\n    const handleUsernameInputChange = (e: SyntheticEvent) => {\\n      const input = e.target as HTMLInputElement;\\n      setUsername(input.value);\\n    };\\n  \\n    const handlePasswordChange = (e: SyntheticEvent) => {\\n      const input = e.target as HTMLInputElement;\\n      setPassword(input.value);\\n    };\\n  \\n    return (\\n      <div>\\n        <h1>Connectez un utilisateur</h1>\\n        <form onSubmit={handleSubmit}>\\n          <label htmlFor=\\\"username\\\">Username</label>\\n          <input\\n            value={username}\\n            type=\\\"text\\\"\\n            id=\\\"username\\\"\\n            name=\\\"username\\\"\\n            onChange={handleUsernameInputChange}\\n            required\\n          />\\n          <label htmlFor=\\\"password\\\">Password</label>\\n          <input\\n            value={password}\\n            type=\\\"text\\\"\\n            id=\\\"password\\\"\\n            name=\\\"password\\\"\\n            onChange={handlePasswordChange}\\n            required\\n          />\\n          <button type=\\\"submit\\\">S'authentifier</button>\\n        </form>\\n      </div>\\n    );\\n  };\\n  \\n  export default LoginPage;\\n\")), \"\\n\", React.createElement(_components.p, null, \"Maintenant nous devons mettre à jour la configuration de notre router pour offrir la \", React.createElement(_components.code, null, \"LoginPage\"), \" : pour ce faire, veuillez mettre à jour \", React.createElement(_components.code, null, \"/src/main.tsx\"), \" :\"), \"\\n\", React.createElement(_components.pre, {\n    numbered: true,\n    highlighting: \"18-21\"\n  }, React.createElement(_components.code, {\n    className: \"language-tsx\"\n  }, \"const router = createBrowserRouter([\\n  {\\n    path: \\\"/\\\",\\n    element: <App />,\\n    children: [\\n      {\\n        path: \\\"\\\",\\n        element: <HomePage />,\\n      },\\n      {\\n        path: \\\"add-pizza\\\",\\n        element: <AddPizzaPage />,\\n      },\\n      {\\n        path: \\\"register\\\",\\n        element: <RegisterPage />,\\n      },\\n      {\\n        path: \\\"login\\\",\\n        element: <LoginPage />,\\n      }\\n    ],\\n  },\\n]);\\n\")), \"\\n\", React.createElement(_components.p, null, \"Il faut aussi mettre à jour la \", React.createElement(_components.code, null, \"Navbar\"), \" pour offrir un lien vers la \", React.createElement(_components.code, null, \"LoginPage\"), \" seulement si les utilisateurs ne sont pas connectés :\"), \"\\n\", React.createElement(_components.pre, {\n    numbered: true,\n    highlighting: \"17\"\n  }, React.createElement(_components.code, {\n    className: \"language-tsx\"\n  }, \"const NavBar = ({authenticatedUser} : NavBarProps) => {\\n  const navigate = useNavigate();\\n\\n  if(authenticatedUser) {\\n    return (\\n      <nav>\\n        <button onClick={() => navigate(\\\"/\\\")}>Home</button>\\n        <button onClick={() => navigate(\\\"/add-pizza\\\")}>Ajouter une pizza</button>\\n      </nav>\\n    );\\n  }\\n\\n  return (\\n    <nav>\\n      <button onClick={() => navigate(\\\"/\\\")}>Home</button>\\n      <button onClick={() => navigate(\\\"/register\\\")}>Créer un utilisateur</button>\\n      <button onClick={() => navigate(\\\"/login\\\")}>Se connecter</button>\\n    </nav>\\n  );\\n};\\n\")), \"\\n\", React.createElement(_components.p, null, \"Veuillez exécuter le frontend et vous assurer que pour l'utilisateur préalablement créé, vous pouvez l'utiliser pour vous loguer.\"), \"\\n\", React.createElement(_components.h1, null, React.createElement(InternalPageTitle, null, \" Sauvegarde des données de session \")), \"\\n\", React.createElement(_components.p, null, \"Maintenant, bien que l'utilisateur soit connecté et donc authentifié, si nous faisons un refresh de la page, nous perdons les données de session.\"), \"\\n\", React.createElement(_components.p, null, \"Nous allons donc voir comment sauvegarder \", React.createElement(_components.code, null, \"authenticatedUser\"), \" dans le \", React.createElement(_components.code, null, \"localStorage\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"💭 Mais quel est le format d'un \", React.createElement(_components.code, null, \"AuthenticatedUser\"), \" ?\", React.createElement(_components.br), \"\\n\", \"Celui-ci est fixé par notre API et nous l'avons déjà défini dans \", React.createElement(_components.code, null, \"types.ts\"), \"... Voici un exemple de sa forme :\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-json\"\n  }, \"{\\n    \\\"username\\\": \\\"me\\\",\\n    \\\"token\\\": \\\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Im1lIiwiaWF0IjoxNzE5ODIxMTEwLCJleHAiOjE4MDYyMjExMTB9.cyw8HYhLxEWIsdAJQ0dO_wuokib20zTNxqYLpj74Wp4\\\"\\n}\\n\")), \"\\n\", React.createElement(_components.p, null, \"💭 A quel moment sauvegarder les données de session ?\", React.createElement(_components.br), \"\\n\", \"Ici, l'utilisateur est connecté lors du register, ou lors du login. C'est donc à se moment là qu'il faut sauvegarder ses données dans le \", React.createElement(_components.code, null, \"localStorage\"), \".\", React.createElement(_components.br), \"\\n\", \"Comme nous allons réutiliser un même traitement (tant dans login que dans register), nous pouvons directement éviter une duplication de code en créant une fonction \", React.createElement(_components.code, null, \"storeAuthenticatedUser\"), \". De plus, nous avons besoin d'une fonction qui nous permettra de récupérer l'utilisateur authentifié du \", React.createElement(_components.code, null, \"localStorage\"), \".\", React.createElement(_components.br), \"\\n\", \"Et finalement, afin de prévoir le nettoyage des données de session, nous allons créer une fonction \", React.createElement(_components.code, null, \"clearAuthenticatedUser\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"Veuillez créer un nouveau script \", React.createElement(_components.code, null, \"/src/utils/session.ts\"), \" et y ajouter ce code-ci :\"), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, {\n    className: \"language-ts\"\n  }, \"import { AuthenticatedUser, MaybeAuthenticatedUser } from \\\"../types\\\";\\n\\nconst storeAuthenticatedUser = (authenticatedUser: AuthenticatedUser) => {\\n  localStorage.setItem(\\\"authenticatedUser\\\", JSON.stringify(authenticatedUser));\\n};\\n\\nconst getAuthenticatedUser = (): MaybeAuthenticatedUser => {\\n  const authenticatedUser = localStorage.getItem(\\\"authenticatedUser\\\");\\n\\n  if (!authenticatedUser) return undefined;\\n\\n  return JSON.parse(authenticatedUser);\\n};\\n\\nconst clearAuthenticatedUser = () => {\\n  localStorage.removeItem(\\\"authenticatedUser\\\");\\n};\\n\\nexport { storeAuthenticatedUser, getAuthenticatedUser, clearAuthenticatedUser };\\n\")), \"\\n\", React.createElement(_components.p, null, \"Veuillez mettre à jour \", React.createElement(_components.code, null, \"App\"), \" afin de faire appelle à \", React.createElement(_components.code, null, \"storeAuthenticatedUser\"), \" lors du login et du register :\"), \"\\n\", React.createElement(_components.pre, {\n    numbered: true,\n    highlighting: \"21,51\"\n  }, React.createElement(_components.code, {\n    className: \"language-tsx\"\n  }, \" const registerUser = async (newUser: User) => {\\n    try {\\n      const options = {\\n        method: \\\"POST\\\",\\n        body: JSON.stringify(newUser),\\n        headers: {\\n          \\\"Content-Type\\\": \\\"application/json\\\",\\n        },\\n      };\\n\\n      const response = await fetch(\\\"/api/auths/register\\\", options);\\n\\n      if (!response.ok)\\n        throw new Error(\\n          `fetch error : ${response.status} : ${response.statusText}`\\n        );\\n\\n      const createdUser: AuthenticatedUser = await response.json();\\n\\n      setAuthenticatedUser(createdUser);\\n      storeAuthenticatedUser(createdUser);\\n\\n      console.log(\\\"createdUser: \\\", createdUser);\\n    } catch (err) {\\n      console.error(\\\"registerUser::error: \\\", err);\\n      throw err;\\n    }\\n  };\\n\\n  const loginUser = async (user: User) => {\\n    try {\\n      const options = {\\n        method: \\\"POST\\\",\\n        body: JSON.stringify(user),\\n        headers: {\\n          \\\"Content-Type\\\": \\\"application/json\\\",\\n        },\\n      };\\n\\n      const response = await fetch(\\\"/api/auths/login\\\", options);\\n\\n      if (!response.ok)\\n        throw new Error(\\n          `fetch error : ${response.status} : ${response.statusText}`\\n        );\\n\\n      const authenticatedUser: AuthenticatedUser = await response.json();\\n      console.log(\\\"authenticatedUser: \\\", authenticatedUser);\\n\\n      setAuthenticatedUser(authenticatedUser);\\n      storeAuthenticatedUser(authenticatedUser);\\n    } catch (err) {\\n      console.error(\\\"loginUser::error: \\\", err);\\n      throw err;\\n    }\\n  };\\n\")), \"\\n\", React.createElement(_components.p, null, \"💭 A quel moment devons nous faire appel à \", React.createElement(_components.code, null, \"getAuthenticatedUser\"), \" pour récupérer les données du \", React.createElement(_components.code, null, \"localStorage\"), \" ?\", React.createElement(_components.br), \"\\n\", \"En fait, cela doit se faire au chargement de la page. Et nous souhaitons, si nous récupérons un utilisateur authentifié, passer cet utilisateur à la \", React.createElement(_components.code, null, \"Navbar\"), \". Une façon simple de réaliser cette action, c'est la toute première fois que \", React.createElement(_components.code, null, \"App\"), \" est appelé, en utilisant son \", React.createElement(_components.code, null, \"useEffect\"), \". Veuillez donc mettre à jour le \", React.createElement(_components.code, null, \"useEffect\"), \" de \", React.createElement(_components.code, null, \"App\"), \" :\"), \"\\n\", React.createElement(_components.pre, {\n    highlighting: \"3-6\"\n  }, React.createElement(_components.code, {\n    className: \"language-tsx\"\n  }, \"useEffect(() => {\\n    fetchPizzas();\\n    const authenticatedUser = getAuthenticatedUser();\\n    if (authenticatedUser) {\\n      setAuthenticatedUser(authenticatedUser);\\n    }\\n  }, []);\\n\")), \"\\n\", React.createElement(_components.p, null, \"Nous allons voir dans le \", React.createElement(_components.code, null, \"localStorage\"), \" s'il existe des données de session et récupérons l'utilisateur authentifié si c'est le cas. Ensuite, nous mettons à jour l'état \", React.createElement(_components.code, null, \"authenticatedUser\"), \" avec cet utilisateur authentifié, ce qui permet un \\\"rerender\\\" de l'UI (dont la mise à jour de l'affichage de la \", React.createElement(_components.code, null, \"Navbar\"), \").\"), \"\\n\", React.createElement(_components.p, null, \"Veuillez connecter un utilisateur et faire un refresh de la page...  Et voila, vous devriez rester connecté : )\"), \"\\n\", React.createElement(_components.p, null, \"N'hésitez pas à aller voir le \", React.createElement(_components.code, null, \"localStorage\"), \" de votre browser. Pour Chrome, dans vos outils de développeurs, celui-ci se trouve dans l'onglet \", React.createElement(_components.code, null, \"Application\"), \".\"), \"\\n\", React.createElement(_components.h1, null, React.createElement(InternalPageTitle, null, \" Déconnexion d'un utilisateur \")), \"\\n\", React.createElement(_components.p, null, \"Il est à noter que pour avoir une application complète, il va aussi falloir penser à faire effacer les données de session.\"), \"\\n\", React.createElement(_components.p, null, \"Nous allons ajouter un élément à la \", React.createElement(_components.code, null, \"Navbar\"), \" qui se nomme \", React.createElement(_components.code, null, \"Se déconnecter\"), \". Lorsqu'on cliquera sur cet élément, nous devons mettre à jour la variable d'état \", React.createElement(_components.code, null, \"authenticatedUser\"), \" qui se trouve dans \", React.createElement(_components.code, null, \"App\"), \" et nous devons effacer les données de session du \", React.createElement(_components.code, null, \"localStorage\"), \". Comme l'état est géré dans le composant \\\"parent\\\" de la \", React.createElement(_components.code, null, \"Navbar\"), \", nous allons créer une fonction dans \", React.createElement(_components.code, null, \"App\"), \" qui permette d'agir sur cet état.\"), \"\\n\", React.createElement(_components.p, null, \"Veuillez donc mettre à jour \", React.createElement(_components.code, null, \"App\"), \" en lui ajoutant cette fonction \", React.createElement(_components.code, null, \"clearUser\"), \" et en passant cette fonction à la \", React.createElement(_components.code, null, \"Navbar\"), \" :\"), \"\\n\", React.createElement(_components.pre, {\n    numbered: true,\n    highlighting: \"2-5,15\"\n  }, React.createElement(_components.code, {\n    className: \"language-tsx\"\n  }, \"  //....\\n  const clearUser = () => {\\n    clearAuthenticatedUser();\\n    setAuthenticatedUser(undefined);\\n  }\\n  // ... reste du code\\n  return (\\n    <div className=\\\"page\\\">\\n      <Header\\n        title=\\\"We love Pizza\\\"\\n        version={0 + 1}\\n        handleHeaderClick={handleHeaderClick}\\n      />\\n      <main>\\n        <NavBar authenticatedUser={authenticatedUser} clearUser={clearUser}/>\\n        <Outlet context={fullPizzaContext} />\\n      </main>\\n      <Footer />\\n    </div>\\n  );\\n\")), \"\\n\", React.createElement(_components.p, null, \"Voici le code de la \", React.createElement(_components.code, null, \"Navbar\"), \" mis à jour pour ajouter l’élément de déconnexion et l'action associée :\"), \"\\n\", React.createElement(_components.pre, {\n    numbered: true,\n    highlighting: \"3,6,16\"\n  }, React.createElement(_components.code, {\n    className: \"language-tsx\"\n  }, \"interface NavBarProps {\\n  authenticatedUser: MaybeAuthenticatedUser;\\n  clearUser: () => void;\\n}\\n\\nconst NavBar = ({ authenticatedUser, clearUser }: NavBarProps) => {\\n  const navigate = useNavigate();\\n\\n  if (authenticatedUser) {\\n    return (\\n      <nav>\\n        <button onClick={() => navigate(\\\"/\\\")}>Home</button>\\n        <button onClick={() => navigate(\\\"/add-pizza\\\")}>\\n          Ajouter une pizza\\n        </button>\\n        <button onClick={() => clearUser()}>Se déconnecter</button>\\n      </nav>\\n    );\\n  }\\n\\n  return (\\n    <nav>\\n      <button onClick={() => navigate(\\\"/\\\")}>Home</button>\\n      <button onClick={() => navigate(\\\"/register\\\")}>\\n        Créer un utilisateur\\n      </button>\\n      <button onClick={() => navigate(\\\"/login\\\")}>Se connecter</button>\\n    </nav>\\n  );\\n};\\n\")), \"\\n\", React.createElement(_components.p, null, \"Veuillez tester l'application, vous connecter, déconnecter... Cela devrait bien fonctionner.\"), \"\\n\", React.createElement(_components.p, null, \"Il nous reste à faire en sorte que l'on puisse autoriser l'opération de création de pizza.\"), \"\\n\", React.createElement(_components.h1, null, React.createElement(InternalPageTitle, null, \" Autorisation de l'appel à une opération protégée  \")), \"\\n\", React.createElement(_components.p, null, \"Veuillez connecter un utilisateur, cliquer sur \", React.createElement(_components.code, null, \"Ajouter une pizza\"), \", compléter le formulaire d'ajout d'une pizza, cliquer sur \", React.createElement(_components.code, null, \"Ajouter\"), \" et regarder dans la console : il devrait y avoir une erreur qui s'affiche avec le \\\"status code\\\" \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"401 : Unauthorized\")), \".\", React.createElement(_components.br), \"\\n\", \"En effet, l'API attend un token pour autoriser l'opération de création d'une pizza.\"), \"\\n\", React.createElement(_components.p, null, \"Nous allons donc mettre à jour la fonction permettant de créer une pizza qui est définie dans \", React.createElement(_components.code, null, \"App\"), \" pour ajouter le token de l'utilisateur authentifié au sein du header de la requête :\"), \"\\n\", React.createElement(_components.pre, {\n    numbered: true,\n    highlighting: \"11\"\n  }, React.createElement(_components.code, {\n    className: \"language-tsx\"\n  }, \" const addPizza = async (newPizza: NewPizza) => {\\n    try {\\n      if(!authenticatedUser)  {\\n        throw new Error(\\\"You must be authenticated to add a pizza\\\");\\n      }\\n      const options = {\\n        method: \\\"POST\\\",\\n        body: JSON.stringify(newPizza),\\n        headers: {\\n          \\\"Content-Type\\\": \\\"application/json\\\",\\n          Authorization: authenticatedUser.token,\\n        },\\n      };\\n      // Suite du code\\n\")), \"\\n\", React.createElement(_components.p, null, \"Veuillez vous connecter à l'IHM à l'aide du compte \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"manager\")), \" et tenter d'ajouter une pizza. Cela ne devrait toujours pas fonctionner. Veuillez regarder dans la console : il devrait y avoir une erreur qui s'affiche avec le \\\"status code\\\" \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"403 : Forbidden\")), \".\", React.createElement(_components.br), \"\\n\", \"En effet, l'API attend un token pour autoriser l'opération de création d'une pizza, mais seulement l'utilisatrice ou l'utilisateur \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"admin\")), \" a le privilège d'ajouter une pizza au menu !\"), \"\\n\", React.createElement(_components.p, null, \"Déconnectez-vous, reconnectez-vous à l'aide du compte \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"admin\")), \" (password \", React.createElement(_components.code, null, \"admin\"), \" par défaut ; ), et ajoutez une pizza.\\nVoila ! Le site devrait être entièrement fonctionnel !\"), \"\\n\", React.createElement(_components.p, null, \"En cas de souci, vous pouvez utiliser le code du tutoriel \", React.createElement(_components.a, {\n    href: \"https://github.com/e-vinci/ts-demos/tree/main/front/session-jwt\"\n  }, \"session-jwt\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"💭 Est-ce que c'est \\\"safe\\\" que notre IHM affiche le menu \\\"Ajouter une pizza\\\" pour un utilisateur qui n'est pas l'admin ?\", React.createElement(_components.br), \"\\n\", React.createElement(_components.em, null, \"En fait oui, c'est \\\"safe\\\", vous l'avez testé. L'API ne doit jamais faire confiance aux applications clientes pour appliquer la sécurité. Ainsi, même si le frontend autorise l'accès à des opérations qui ne devraient pas être permises, au regard des autorisations appliquées par l'API, ça n'a pas d'importance point de vue sécurité.\", React.createElement(_components.br), \"\\n\", \"De la même façon, c'est pour ça qu'une API doit aussi toujours valider les paramètres qu'elle reçoit. Elle ne peut pas faire confiance aux applications clientes, comme par exemple à une application web tournant dans un browser, pour valider tous les champs d'un formulaire.\", React.createElement(_components.br), \"\\n\", \"La raison est simple, l'API est développée indépendamment des applications clientes, elle ne peut pas supposer que les requêtes seront toujours bien construites.\")), \"\\n\", React.createElement(_components.p, null, \"💭 OK, tout est \\\"safe\\\" si l'API fait toutes les vérifications nécessaires. Néanmoins, n'y a-t-il pas des règles de bonnes pratiques au niveau des IHM, pour ne pas permettre de faire n'importe quelles requêtes vers des API ?\", React.createElement(_components.br), \"\\n\", React.createElement(_components.em, null, \"Et bien oui, au niveau des IHM, pour des questions d'\", React.createElement(_components.strong, null, \"ergonomie\"), \", d'expérience utilisateur, on va faire en sorte :\")), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, React.createElement(_components.em, null, \"de ne pas offrir des opérations qui ne seront pas autorisées. Par exemple, dans le cadre de ce tutoriel sur un site permettant de gérer une pizzeria, il ne faut pas \\\"frustrer\\\" les utilisateurs en leur faisant croire qu'ils ont accès à l'opération de créer une pizza ! Imaginez-vous, vous créez une nouvelle pizza de 32 ingrédients, et lors de la soumission, vous recevez un message comme quoi vous n'êtes pas l'admin du site et que vous n'avez donc pas le droit de créer une pizza 😲!\")), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.em, null, \"de ne pas demander du travail à une API quand l'IHM peut détecter que ce n'est pas utile.\\nAinsi, quand une IHM offre des formulaires, qui amèneront à des requêtes vers des API, on évitera d'autoriser la soumission des données tant que les champs n'ont pas été validés. Tout ce que l'IHM peut valider côté client, elle doit le faire. Le feedback sera plus rapide pour l'utilisateur, et les ressources de l'API seront économisées (pas d'appel inutile).\")), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"N'hésitez donc pas à mettre à jour ce tutoriel pour faire en sorte d'afficher \\\"Ajouter une pizza\\\" que si le compte connecté est \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"admin\")), \".\"), \"\\n\", React.createElement(_components.p, null, \"💭 Ca n'est pas un peu \\\"cheap\\\" que seul le compte \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"admin\")), \" puisse avoir le privilège d'admin du site ?\", React.createElement(_components.br), \"\\n\", React.createElement(_components.em, null, \"Hé bien oui, c'est \\\"cheap\\\". Généralement, dans le cadre d'applications plus robustes, nous allons ajouter un ou plusieurs rôle(s) aux utilisateurs. Par exemple, dans le cadre d'applications où les rôles sont simples, qu'il n'y a jamais qu'un seul rôle associé à un utilisateur, il suffirait d'ajouter au niveau de l'API la propriété \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"role\")), \" aux utilisateurs. La majorité des utilisateurs pourrait avoir un rôle dont la valeur serait \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"default\")), \", et une minorité d'utilisateurs aurait le rôle d'\", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"admin\")), \"...\")), \"\\n\", React.createElement(_components.p, null, \"On n'affiche actuellement \", React.createElement(_components.strong, null, \"pas de message d'erreur\"), \" aux utilisateurs lorsque la réponse d'une API renvoie une erreur. Pour améliorer l'expérience de l'utilisateur, ce serait une amélioration à faire.\"), \"\\n\", React.createElement(_components.h1, null, React.createElement(InternalPageTitle, null, \" Exercice 3.4 : Authentification et appel d'opérations protégées par JWT  \")), \"\\n\", React.createElement(_components.p, null, \"Veuillez continuer l'exercice précédent nommé \", React.createElement(_components.code, null, \"/exercises/3.3-4-4b\"), \" afin de compléter l'application \", React.createElement(_components.code, null, \"myMovies\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"Pour tout cette exercice, vous devez avoir démarré l'API sécurisée par JWT de vos films. Veuillez donc exécuter le code de votre exercice précédent \", React.createElement(_components.code, null, \"/exercises/3.1\"), \". En cas de souci, vous trouvez le code de cette API ici : \", React.createElement(_components.a, {\n    href: \"https://github.com/e-vinci/ts-exercises\"\n  }, \"https://github.com/e-vinci/ts-exercises\")), \"\\n\", React.createElement(_components.h2, null, \"Authentification et appel d'opérations nécessitant une autorisation JWT\"), \"\\n\", React.createElement(_components.p, null, \"Veuillez implémenter ces cas d'utilisation :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, React.createElement(_components.code, null, \"register\")), \" : les utilisateurs doivent pouvoir créer un compte.\"), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, React.createElement(_components.code, null, \"login\")), \" : les utilisateur doivent pouvoir se loguer.\"), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, React.createElement(_components.code, null, \"logout\")), \" : les utilisateurs doivent pouvoir se déconnecter.\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"N'hésitez pas à reprendre le code du tutoriel ; )\"), \"\\n\", React.createElement(_components.p, null, \"Une fois tout fonctionnel, veuillez faire un commit avec le message suivant : \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"new:ex3.4-authentification\")), \".\"), \"\\n\", React.createElement(_components.p, null, \"Votre application doit maintenant autoriser les opérations suivantes que pour des utilisateurs authentifiés :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"UC2 : l'ajout d'une ressource de type films via un formulaire d'ajout d'un film.\"), \"\\n\", React.createElement(_components.li, null, \"UC3 : la suppression d'un film.\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"Comme auparavant, cette opération est permise pour tous les utilisateurs, anonymes ou authentifiés :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"UC1 : l'affichage, sous forme de tableau, de toutes les ressources de type films.\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"Pensez à bien mettre à jour votre \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"Navbar\")), \" pour afficher les bons éléments en fonction que l'utilisateur est authentifié ou pas.\"), \"\\n\", React.createElement(_components.p, null, \"Faites attention, il n'est pas autorisé, pour des raisons d'ergonomie, que le frontend offre les fonctionnalités d'écriture de ressources pour les utilisateur non authentifiés. Vous devez donc rendre invisible les opérations non autorisées aux utilisateurs.\"), \"\\n\", React.createElement(_components.p, null, \"UC2 (create) & UC3 (delete) doivent donc être invisibles pour les utilisateurs anonymes.\"), \"\\n\", React.createElement(_components.p, null, \"Veuillez faire en sorte de rajouter dans le web storage ces nouvelles données de session lors du login ou du register : le token et le username.\"), \"\\n\", React.createElement(_components.p, null, \"Une fois tout fonctionnel, veuillez faire un commit avec le message suivant : \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"new:ex3.4\")), \".\"), \"\\n\", React.createElement(_components.h4, null, \"🤝 Tips\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"💭 Comment rendre invisible les opérations d'écriture de certaines ressources au sein du frontend ?\", React.createElement(_components.br), \"\\n\", \"Par exemple, vous pourriez afficher des boutons de type \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"Effacer\")), \" que si l'utilisateur est authentifié.\"), \"\\n\"), \"\\n\", React.createElement(_components.h1, null, React.createElement(InternalPageTitle, null, \" Exercice 3.4b : Modification de ressources & JWT  \")), \"\\n\", React.createElement(_components.p, null, \"Veuillez continuer l'exercice précédent nommé \", React.createElement(_components.code, null, \"/exercises/3.3-4-4b\"), \" afin de compléter l'application \", React.createElement(_components.code, null, \"myMovies\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"Votre application doit maintenant autoriser cette opération suivante que pour des utilisateurs authentifiés :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"UC4 : la mise à jour des données d'un film (à l'exception de l'id associé à un film).\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"Faites attention, il n'est pas autorisé, pour des raisons d'ergonomie, que le frontend offre les fonctionnalités d'écriture de ressources pour les utilisateur non authentifiés. Vous devez donc rendre invisible les opérations non autorisées aux utilisateurs.\"), \"\\n\", React.createElement(_components.p, null, \"UC4 (update) doit donc être invisible pour les utilisateurs anonymes.\"), \"\\n\", React.createElement(_components.p, null, \"Une fois tout fonctionnel, veuillez faire un commit avec le message suivant : \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"new:ex3.4b\")), \".\"), \"\\n\", React.createElement(_components.h2, null, \"🍬 Challenge optionnel : Gestion de session & remember me\"), \"\\n\", React.createElement(_components.p, null, \"S'il vous reste du temps, vous pourriez continuer l'exercice précédent et ajouter une fonction \\\"remember me\\\" à votre formulaire de \\\"login\\\" et de \\\"register\\\" et faire en sorte que vos données de session soient sauvegardées :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"dans le \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"localStorage\")), \" si l'on clique sur une checkbox \\\"Remember me\\\" ;\"), \"\\n\", React.createElement(_components.li, null, \"dans le \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"sessionStorage\")), \" si l'on ne clique pas sur la checkbox \\\"Remember me\\\" lors du login ou du register.\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"Une fois tout fonctionnel, veuillez faire un commit avec le message suivant : \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"new:ex3.4b+\")), \".\"), \"\\n\", React.createElement(_components.h1, null, React.createElement(InternalPageTitle, null, \" 🍬 Persistance de données de session via des cookies \")), \"\\n\", React.createElement(_components.h2, null, \"Authentification & autorisation JWT à l'aide de cookies\"), \"\\n\", React.createElement(_components.p, null, \"Dans la partie optionnelle sur l'\", React.createElement(_components.a, {\n    href: \"../auths-api/#%F0%9F%8D%AC_authentification_autorisation_jwt_a_laide_de_cookies\"\n  }, \"Authentification & autorisation JWT à l'aide de cookies\"), \", nous avons vu comment mettre à jour l'API afin d'intégrer les tokens JWT aux cookies.\"), \"\\n\", React.createElement(_components.p, null, \"Veuillez démarrer la version \", React.createElement(_components.a, {\n    href: \"https://github.com/e-vinci/ts-demos/tree/main/back/api/cookies\"\n  }, \"cookies\"), \" de l'API de la pizzeria.\"), \"\\n\", React.createElement(_components.p, null, \"Nous allons voir maintenant comment le frontend peut utiliser ces cookies.\"), \"\\n\", React.createElement(_components.h2, null, \"Gestion de session côté client via une IHM et des cookies\"), \"\\n\", React.createElement(_components.p, null, \"Pour ce tutoriel, veuillez créer une copie du tutoriel \", React.createElement(_components.code, null, \"session-jwt\"), \", si nécessaire voici le code du tutoriel \", React.createElement(_components.a, {\n    href: \"https://github.com/e-vinci/ts-demos/tree/main/front/session-jwt\"\n  }, \"session-jwt\"), \", et l'appeler \", React.createElement(_components.code, null, \"cookies\"), \". Changez le nom du projet dans \", React.createElement(_components.code, null, \"package.json\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"Afin de sauvegarder les données de session, c'est à dire l'objet \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"authenticatedUser\")), \" contenant juste un username, nous ne devons même pas mettre à jour le fichier \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"/src/utils/session.js\")), \". En effet, l'API \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"cookies\")), \" renvoie un objet du genre \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"{username: \\\"manager\\\"}\")), \". Au niveau de l'IHM, le code est donc toujours fonctionnel pour sauvegarder le username grâce à \", React.createElement(_components.code, null, \"authenticatedUser\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"Il ne reste donc qu'à changer le code où nous avons besoin d'une autorisation. Pour l'application de gestion de la pizzeria, il s'agit de la création de pizza.\", React.createElement(_components.br), \"\\n\", \"Veuillez donc mettre à jour \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"App\")), \" pour enlever la ligne s'occupant de l'authorization header : \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"Authorization: authenticatedUser.token\")), \" :\"), \"\\n\", React.createElement(_components.pre, {\n    numbered: true,\n    highlighting: \"9-11\"\n  }, React.createElement(_components.code, {\n    className: \"language-tsx\"\n  }, \"const addPizza = async (newPizza: NewPizza) => {\\n    try {\\n      if (!authenticatedUser) {\\n        throw new Error(\\\"You must be authenticated to add a pizza\\\");\\n      }\\n      const options = {\\n        method: \\\"POST\\\",\\n        body: JSON.stringify(newPizza),\\n        headers: {\\n          \\\"Content-Type\\\": \\\"application/json\\\",\\n        },\\n      };\\n      // Suite du code ...\\n\")), \"\\n\", React.createElement(_components.p, null, \"Veuillez tester votre dernière version du frontend.\\nLoguez-vous avec l'utilisateur \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"admin\")), \" (et le password \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"admin\")), \").\", React.createElement(_components.br), \"\\n\", \"Ajoutez une pizza et vérifiez qu'elle s'affiche bien.\"), \"\\n\", React.createElement(_components.p, null, \"💭 Comment vérifier le cookie ?\", React.createElement(_components.br), \"\\n\", \"Tout en ayant la fenêtre de votre application ouverte, via Chrome, allez dans vos outils de développeurs : \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"F12\")), \".\", React.createElement(_components.br), \"\\n\", \"Puis, dans l'onglet \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"Application\")), \", cliquez sur \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"Cookies\")), \", vous verrez apparaître \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"http://localhost:8080\")), \". Cliquez sur cette URL, et vous verrez vos 2 cookies de session, \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"user.sig\")), \" et \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"user\")), \".\", React.createElement(_components.br), \"\\n\", \"N'hésitez pas à aller décoder la valeur du cookie \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"user\")), \" sur \", React.createElement(_components.a, {\n    href: \"https://www.base64decode.org/\"\n  }, \"base64decode\"), \" en faisant un copier / coller de \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"Value\")), \". Vous devriez voir quelque chose apparaître du style \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"{\\\"username\\\":\\\"manager\\\",\\\"token\\\":\\\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Im1hbmFnZXIiLCJpYXQiOjE2NjE3NzUxMDgsImV4cCI6MTc0ODE3NTEwOH0.sAZqq6vbrjCCZZoLH-n8hJKBoXJJJ8jEoupk8xKu5WI\\\"}\")), \"  !\"), \"\\n\", React.createElement(_components.p, null, \"Toujours dans l'onglet \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"Application\")), \" des outils de développeurs de Chrome, faites un clear des cookies : clic droit sur \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"http://localhost:8080\")), \", \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"Clear\")), \".\", React.createElement(_components.br), \"\\n\", \"Tentez maintenant d'ajouter une pizza... Ca ne fonctionne plus, et c'est bien normal, car il n'y a plus de token qui est envoyé à l'API !\"), \"\\n\", React.createElement(_components.p, null, \"En cas de souci, vous pouvez utiliser le code du tutoriel \", React.createElement(_components.a, {\n    href: \"https://github.com/e-vinci/ts-demos/tree/main/front/cookies\"\n  }, \"cookies\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"💭 Notons que cette version de notre frontend pourrait être améliorée. Actuellement, lorsqu'on fait un logout, on n'efface pas le cookie du browser.\", React.createElement(_components.br), \"\\n\", \"Comment feriez vous ?\", React.createElement(_components.br), \"\\n\", React.createElement(_components.em, null, \"Vous pourriez par exemple appeler la méthode \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"GET /auths/logout\")), \" 😉.\")));\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props)) : _createMdxContent(props);\n}\nexport default MDXContent;\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","import GATSBY_COMPILED_MDX from \"/Users/raphaelbaroni/code/web2/ts-repos/web2/src/mdx-pages/part3/auths-hmi.fr.mdx\";\nimport React from 'react';\nimport {graphql} from 'gatsby';\nimport {MDXProvider} from '@mdx-js/react';\nimport {Link} from 'gatsby';\nimport MainLayout from '../components/main-layout.js';\nimport Image from '../components/image.js';\nimport Section from '../components/section.js';\nimport Content from '../components/content.js';\nimport Background from '../components/background.js';\nimport SectionHeader from '../components/section-header.js';\nimport SectionFooter from '../components/section-footer.js';\nimport PageHeader from '../components/page-header.js';\nimport {withFrontmatter} from '../components/hoc/hoc.js';\nimport CodeBlock from '../components/codeblock/codeblock.js';\nimport LinkFile from '../components/file/link-file.js';\nimport ScrollableImage from '../components/image/scrollable-image';\nimport PublicProjectsView from '../components/public-projects/public-projects-view';\nimport {AuthenticatedTemplate, UnauthenticatedTemplate} from '@azure/msal-react';\nimport AuthenticatedBlock from '../components/auth/authenticated-block.js';\nimport UnAuthenticatedBlock from '../components/auth/unauthenticated-block.js';\nimport NestedMdxBlock from '../components/mdx/nested-mdx-block.js';\nimport YoutubeImage from '../components/image/youtube-image.js';\nimport InternalPageMenu from '../components/internal-page-menu/internal-page-menu.js';\nimport InternalPageMenuItem from '../components/internal-page-menu/internal-page-menu-item.js';\nimport InternalPageTitle from '../components/internal-page-menu/menu-title.js';\nimport {PathViewer, PathViewerItem} from '../components/path-viewer/path-viewer.js';\nconst shortcodes = {\n  Link,\n  Image,\n  Section,\n  Content,\n  Background,\n  SectionHeader,\n  SectionFooter,\n  PageHeader,\n  CodeBlock,\n  LinkFile,\n  ScrollableImage,\n  PublicProjectsView,\n  AuthenticatedBlock,\n  UnAuthenticatedBlock,\n  NestedMdxBlock,\n  YoutubeImage,\n  InternalPageMenu,\n  InternalPageMenuItem,\n  InternalPageTitle,\n  PathViewer,\n  PathViewerItem\n};\nfunction PageTemplate({data: {mdx, allImages}, children}) {\n  shortcodes.PageHeader = withFrontmatter(PageHeader, mdx?.frontmatter);\n  return React.createElement(MainLayout, Object.assign({}, mdx?.frontmatter ? {\n    frontmatter: mdx.frontmatter\n  } : {}, mdx?.frontmatter?.navbarExtraStyles ? {\n    navbarExtraStyles: mdx.frontmatter.navbarExtraStyles\n  } : {}, mdx?.frontmatter?.headerImage ? {\n    headerImage: mdx.frontmatter.headerImage\n  } : {}, mdx?.frontmatter?.featuredImage ? {\n    featuredImage: mdx.frontmatter.featuredImage\n  } : {}, mdx?.frontmatter?.title ? {\n    pageTitle: mdx.frontmatter.title\n  } : {}, allImages && allImages.length > 0 ? {\n    allImages: allImages\n  } : {}), React.createElement(MDXProvider, {\n    components: shortcodes\n  }, React.createElement(\"div\", {\n    className: mdx?.frontmatter?.autoMargin ? 'page page--auto-margin ' : 'page'\n  }, children)));\n}\nexport default function GatsbyMDXWrapper(props) {\n  return React.createElement(PageTemplate, props, React.createElement(GATSBY_COMPILED_MDX, props));\n}\nexport const pageQuery = graphql`\n  query pagesAndImages($slug: String) {\n    mdx(fields: { slug: { eq: $slug } }) {\n      id\n      body\n      fields {\n        slug\n      }\n\n      frontmatter {\n        title\n        date\n        navbarExtraStyles\n        headerImage\n        featuredImage\n        description\n        autoMargin\n      }\n    }\n    allImages: allFile(\n      filter: {\n        sourceInstanceName: { eq: \"images\" }\n        extension: { nin: [\"ico\", \"svg\"] }\n      }\n    ) {\n      edges {\n        node {\n          childImageSharp {\n            gatsbyImageData(\n              quality: 90\n              layout: FULL_WIDTH\n              placeholder: TRACED_SVG\n              tracedSVGOptions: { color: \"green\", background: \"grey\" }\n            )\n          }\n          base\n        }\n      }\n    }\n  }\n`;\n"],"names":["_createMdxContent","props","_components","Object","assign","h1","p","strong","ul","li","h2","code","pre","br","table","thead","tr","th","tbody","td","a","em","h4","_provideComponents","components","InternalPageMenu","PathViewer","PathViewerItem","InternalPageMenuItem","InternalPageTitle","_missingMdxReference","React","to","selected","numbered","highlighting","className","href","wrapper","MDXLayout","id","component","Error","shortcodes","Link","Image","Section","Content","Background","SectionHeader","SectionFooter","PageHeader","CodeBlock","LinkFile","ScrollableImage","PublicProjectsView","AuthenticatedBlock","UnAuthenticatedBlock","NestedMdxBlock","YoutubeImage","PageTemplate","_ref","_mdx$frontmatter","_mdx$frontmatter2","_mdx$frontmatter3","_mdx$frontmatter4","_mdx$frontmatter5","data","mdx","allImages","children","withFrontmatter","frontmatter","MainLayout","navbarExtraStyles","headerImage","featuredImage","title","pageTitle","length","MDXProvider","autoMargin","GatsbyMDXWrapper","GATSBY_COMPILED_MDX"],"sourceRoot":""}