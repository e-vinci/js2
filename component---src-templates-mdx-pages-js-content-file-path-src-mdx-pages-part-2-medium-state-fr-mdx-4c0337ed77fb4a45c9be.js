"use strict";(self.webpackChunkmyjscourse=self.webpackChunkmyjscourse||[]).push([[7163],{6223:function(e,n,t){t.r(n),t.d(n,{default:function(){return w}});var l=t(3905),a=t(7294);function r(e){const n=Object.assign({h1:"h1",h2:"h2",p:"p",code:"code",a:"a",ul:"ul",li:"li",pre:"pre",strong:"strong",br:"br"},(0,l.ah)(),e.components),{InternalPageMenu:t,PathViewer:r,PathViewerItem:o,InternalPageMenuItem:u,InternalPageTitle:s}=n;return t||i("InternalPageMenu",!0),u||i("InternalPageMenuItem",!0),s||i("InternalPageTitle",!0),r||i("PathViewer",!0),o||i("PathViewerItem",!0),a.createElement(a.Fragment,null,a.createElement(n.h1,null,"d) L'√©tat plus avanc√©"),"\n",a.createElement(t,null,a.createElement(r,null,a.createElement(o,{to:"/"}," web2course "),a.createElement(o,{to:"/part2"}," Partie 2 "),a.createElement(o,{selected:!0}," d) L'√©tat plus avanc√© ")),a.createElement(u,null," Comment g√©rer un formulaire en React ?  "),a.createElement(u,null," Formulaire non contr√¥l√© par React "),a.createElement(u,null,' L\' objet "event" '),a.createElement(u,null," Formulaire contr√¥l√© par React "),a.createElement(u,null," G√©rer une collection comme √©tat de l'application "),a.createElement(u,null," Mise √† jour de l'√©tat en React "),a.createElement(u,null," Exercice 2.7 : Gestion d'une collection pour l'√©tat "),a.createElement(u,null," Gestion d'un √©tat partag√© par plusieurs composants "),a.createElement(u,null," Debugging d'une application React "),a.createElement(u,null," üç¨ Challenge optionnel 2.8 : gestion d'un √©tat partag√© ")),"\n",a.createElement(n.h1,null,a.createElement(s,null," Comment g√©rer un formulaire en React ?   ")),"\n",a.createElement(n.h2,null,"Introduction"),"\n",a.createElement(n.p,null,"Il y a beaucoup d'applications web o√π nous allons souhaiter g√©rer un formulaire."),"\n",a.createElement(n.p,null,"En React, pour afficher ce qui est visible dans un formulaire, nous allons devoir jouer avec l'√©tat de l'application."),"\n",a.createElement(n.p,null,"Pour ce tutoriel, veuillez cr√©er une copie du tutoriel ",a.createElement(n.code,null,"start-state"),", si n√©cessaire voici le code du tutoriel ",a.createElement(n.a,{href:"https://github.com/e-vinci/ts-demos/tree/main/front/start-state"},"start-state"),", et l'appeler ",a.createElement(n.code,null,"medium-state"),". Changez le nom du projet dans ",a.createElement(n.code,null,"package.json"),"."),"\n",a.createElement(n.p,null,"Il existe deux fa√ßons de g√©rer des formulaires en React :"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,'les formulaires non contr√¥l√©s par React : les valeurs des inputs sont g√©r√©es par le DOM (Document Object Model) ; c\'est la mani√®re qui correspond √† la mani√®re de faire en JS pur, quand on fait de la programmation "old-school" ;'),"\n",a.createElement(n.li,null,"les formulaires contr√¥l√©s par React : les valeurs des inputs sont g√©r√©es par React, via un √©tat."),"\n"),"\n",a.createElement(n.h1,null,a.createElement(s,null," Formulaire non contr√¥l√© par React  ")),"\n",a.createElement(n.p,null,"Dans le composant ",a.createElement(n.code,null,"Main")," (",a.createElement(n.code,null,"/src/components/Main/index.tsx"),"), √† la suite de ",a.createElement(n.code,null,"PizzaMenu"),", nous allons ajouter un formulaire :"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-tsx"},'const Main = () => {\n  const handleSubmit = (e: SyntheticEvent) => {\n    e.preventDefault();\n    const form = e.target as HTMLFormElement;\n    console.log("submit:", form.pizza.value, form.description.value);\n  };\n\n  return (\n    <main>\n      <p>My HomePage</p>\n      <p>\n        Because we love JS, you can also click on the header to stop / start the\n        music ; )\n      </p>\n      <audio id="audioPlayer" controls autoPlay>\n        <source src={sound} type="audio/mpeg" />\n        Your browser does not support the audio element.\n      </audio>\n      <PizzaMenu />\n\n      <div>\n        <br />\n        <form onSubmit={handleSubmit}>\n          <label htmlFor="pizza">Pizza</label>\n          <input type="text" id="pizza" name="pizza" />\n          <label htmlFor="description">Description</label>\n          <input type="text" id="description" name="description" />\n          <button type="submit">Ajouter</button>\n        </form>\n      </div>\n')),"\n",a.createElement(n.p,null,"Ce code va √™tre expliqu√© en d√©couvrant ce qu'est l'objet \"event\" et comment l'utiliser."),"\n",a.createElement(n.h1,null,a.createElement(s,null,' L\' objet "event" ')),"\n",a.createElement(n.p,null,"L'objet ",a.createElement(n.strong,null,a.createElement(n.code,null,"event"))," a √©t√© nomm√© ",a.createElement(n.strong,null,a.createElement(n.code,null,"e"))," ci-dessus, mais nous aurions pu lui donner le nom que l'on souhaitait."),"\n",a.createElement(n.p,null,"üëç Pour √©viter la confusion, il est recommand√© de l'appeler ",a.createElement(n.strong,null,a.createElement(n.code,null,"e"))," (ou √©ventuellement ",a.createElement(n.strong,null,a.createElement(n.code,null,"event")),")."),"\n",a.createElement(n.p,null,"L'objet ",a.createElement(n.strong,null,a.createElement(n.code,null,"event"))," est automatiquement pass√© √† la callback d'un gestionnaire d'√©v√©nements."),"\n",a.createElement(n.p,null,"Il est tr√®s utile, pour deux raisons principalement :"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"Stopper l'action par d√©faut associ√©e √† un √©v√©nement."),"\n",a.createElement(n.li,null,"Lorsqu'on attache une m√™me callback √† une multitude d'√©l√©ments, pour retrouver la cible de l'√©v√©nement."),"\n"),"\n",a.createElement(n.p,null,a.createElement(n.strong,null,a.createElement(n.code,null,"e.target"))," est l'√©l√©ment HTML qui lance la propagation de l'√©v√©nement dans l'arbre des composants."),"\n",a.createElement(n.p,null,"Parfois on pr√©f√®re utiliser ",a.createElement(n.strong,null,a.createElement(n.code,null,"e.currentTarget"))," qui est l'√©l√©ment HTML sur lequel est attach√© le gestionnaire d'√©v√©nements."),"\n",a.createElement(n.p,null,"Dans le code ci-dessus, on utilise l'objet ",a.createElement(n.strong,null,a.createElement(n.code,null,"event"))," pour stopper l'action par d√©faut d'un formulaire qui est d'envoyer les donn√©es au serveur (indiqu√© par la propri√©t√© ",a.createElement(n.strong,null,a.createElement(n.code,null,"action"))," du formulaire) et de recharger la page."),"\n",a.createElement(n.p,null,"Veuillez :"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"ex√©cuter l'application et v√©rifiez que tout fonctionne ;"),"\n",a.createElement(n.li,null,"commenter ",a.createElement(n.code,null,"e.preventDefault()")," :"),"\n"),"\n",a.createElement(n.pre,{highlighting:"2"},a.createElement(n.code,{className:"language-ts"},' const handleSubmit = (e: SyntheticEvent) => {\n    // e.preventDefault();\n    const form = e.target as HTMLFormElement;\n    console.log("submit:", form.pizza.value, form.description.value);\n  };\n')),"\n",a.createElement(n.p,null,"Qu'est-ce qui se passe ?",a.createElement(n.br),"\n","Il y a un rechargement de page qui est interdit dans le type d'application que nous d√©veloppons. Nous reviendrons plus tard sur pourquoi il n'est pas acceptable de recharger la page..."),"\n",a.createElement(n.h1,null,a.createElement(s,null," Formulaire contr√¥l√© par React  ")),"\n",a.createElement(n.p,null,"Dans le formulaire d√©velopp√© jusque l√†, il n'est pas contr√¥l√© par React. Nous avons acc√®s √† la valeur des inputs, n√©anmoins, √ßa n'est pas une pratique recommand√©e."),"\n",a.createElement(n.p,null,"üëç Il est recommand√© d'utiliser des composants contr√¥l√©s par React. Les valeurs des inputs doivent √™tre contr√¥l√©es par React √† travers un √©tat, et les changements seront g√©r√©s via les gestionnaires d'√©v√©nements (",a.createElement(n.code,null,"onChange")," pour les inputs)."),"\n",a.createElement(n.p,null,"Comme nous avons deux inputs ici, nous allons cr√©er deux variables d'√©tats et les mettre √† jour dans la callback associ√©e aux gestionnaires d'√©v√©nements ",a.createElement(n.code,null,"onChange")," :"),"\n",a.createElement(n.pre,{numbered:!0,highlighting:"2-3,10-14,16-20,39,43,48,52"},a.createElement(n.code,{className:"language-tsx"},'const Main = () => {\n  const [pizza, setPizza] = useState("");\n  const [description, setDescription] = useState("");\n\n  const handleSubmit = (e: SyntheticEvent) => {\n    e.preventDefault();\n    console.log("submit:", pizza, description);\n  };\n\n  const handlePizzaChange = (e: SyntheticEvent) => {\n    const pizzaInput = e.target as HTMLInputElement;\n    console.log("change in pizzaInput:", pizzaInput.value);\n    setPizza(pizzaInput.value);\n  };\n\n  const handleDescriptionChange = (e: SyntheticEvent) => {\n    const descriptionInput = e.target as HTMLInputElement;\n    console.log("change in descriptionInput:", descriptionInput.value);\n    setDescription(descriptionInput.value);\n  };\n\n  return (\n    <main>\n      <p>My HomePage</p>\n      <p>\n        Because we love JS, you can also click on the header to stop / start the\n        music ; )\n      </p>\n      <audio id="audioPlayer" controls autoPlay>\n        <source src={sound} type="audio/mpeg" />\n        Your browser does not support the audio element.\n      </audio>\n      <PizzaMenu />\n      <div>\n        <br />\n        <form onSubmit={handleSubmit}>\n          <label htmlFor="pizza">Pizza</label>\n          <input\n            value={pizza}\n            type="text"\n            id="pizza"\n            name="pizza"\n            onChange={handlePizzaChange}\n            required\n          />\n          <label htmlFor="description">Description</label>\n          <input\n            value={description}\n            type="text"\n            id="description"\n            name="description"\n            onChange={handleDescriptionChange}\n            required\n          />\n          <button type="submit">Ajouter</button>\n        </form>\n      </div>\n')),"\n",a.createElement(n.p,null,"Nous voyons maintenant que :"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"chaque valeur d'une input est contr√¥l√©e par une variable d'√©tat qui est mise √† jour √† chaque changement op√©r√© (dans l'input) ;"),"\n",a.createElement(n.li,null,'que gr√¢ce √† l\'objet "event", nous avons acc√®s √† la valeur de chaque input via ',a.createElement(n.code,null,"e.target.value"),". N√©anmoins, comme TS est typ√©, nous devons d'abord faire une assertion de type pour ",a.createElement(n.code,null,"e.target")," en indiquant que c'est un ",a.createElement(n.code,null,"HTMLInputElement")," afin d'avoir acc√®s √† ",a.createElement(n.code,null,"value"),"."),"\n"),"\n",a.createElement(n.p,null,"Veuillez ex√©cuter l'application, ouvrir la console, et observer ce qui se passe :"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"quand vous √©crivez dans les inputs,"),"\n",a.createElement(n.li,null,"lorsque vous cliquez sur le bouton ",a.createElement(n.code,null,"Ajouter"),"."),"\n"),"\n",a.createElement(n.p,null,"Ca y est, nous avons appris comment ma√Ætriser les formulaires en Flutter."),"\n",a.createElement(n.p,null,"Il nous reste maintenant √† voir comment utiliser les donn√©es du formulaire au sein d'une collection de donn√©es qui va permettre de mettre √† jour nos √©crans."),"\n",a.createElement(n.h1,null,a.createElement(s,null," G√©rer une collection comme √©tat de l'application  ")),"\n",a.createElement(n.h2,null,"Introduction"),"\n",a.createElement(n.p,null,"Tr√®s souvent, c'est une collection de donn√©es qui sera utilis√©e comme √©tat de l'application."),"\n",a.createElement(n.p,null,"Par exemple, dans notre tutoriel, nous souhaiterions qu'une collection de pizzas permette :"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"d'afficher toutes les pizzas du menu ;"),"\n",a.createElement(n.li,null,"d'ajouter automatiquement une nouvelle pizzas au menu apr√®s soumission des donn√©es du formulaire."),"\n"),"\n",a.createElement(n.p,null,"üí≠ Quand nous devons mettre en place une variable d'√©tat, ici un array de ",a.createElement(n.code,null,"Pizza"),', il faut toujours se poser la question : "Mais o√π est-ce que je dois g√©rer cet √©tat ?".'),"\n",a.createElement(n.p,null,"Actuellement, la collection de ",a.createElement(n.code,null,"Pizza")," est g√©r√©e dans le composant ",a.createElement(n.code,null,"PizzaMenu"),", qui est un \"sibling\" (un fr√®re ou une s≈ìur) du formulaire. Ainsi, si nous devons y acc√©der dans ces diff√©rents √©l√©ments, il faut faire monter l'√©tat vers leur anc√™tre commun le plus proche, leur parent. Ici, c'est le composant ",a.createElement(n.code,null,"Main"),"."),"\n",a.createElement(n.p,null,"Nous allons donc mettre √† jour ",a.createElement(n.code,null,"PizzaMenu")," pour qu'il re√ßoive dans ses props la collection de pizza. Voici ",a.createElement(n.code,null,"PizzaMenu")," mis √† jour :"),"\n",a.createElement(n.pre,{numbered:!0,highlighting:"1,4-6,8,18-23"},a.createElement(n.code,{className:"language-tsx"},'import { Pizza } from "../../types";\nimport "./PizzaMenu.css";\n\ninterface PizzaMenuProps {\n  pizzas: Pizza[];\n}\n\nconst PizzaMenu = ({ pizzas }: PizzaMenuProps) => {\n  return (\n    <table className="pizza-menu">\n      <thead>\n        <tr>\n          <th>Pizza</th>\n          <th>Description</th>\n        </tr>\n      </thead>\n      <tbody>\n        {pizzas.map((pizza) => (\n          <tr key={pizza.id}>\n            <td>{pizza.title}</td>\n            <td>{pizza.content}</td>\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  );\n};\n\nexport default PizzaMenu;\n')),"\n",a.createElement(n.p,null,"Nous avons cr√©√© l'interface ",a.createElement(n.code,null,"Pizza")," dans un nouveau fichier ",a.createElement(n.code,null,"/src/types.ts")," :"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-ts"},"interface Pizza {\n  id: number;\n  title: string;\n  content: string;\n}\n\nexport type { Pizza };\n")),"\n",a.createElement(n.p,null,"Pour simplifier le d√©veloppement, nous vous conseillons d'enlever l'",a.createElement(n.code,null,"autoPlay")," pour l'audio... Ca fera moins de bruit ; )"),"\n",a.createElement(n.p,null,"Voici la mise √† jour du composant ",a.createElement(n.code,null,"Main")," afin de passer une variable d'√©tat initialis√©e par les pizzas par d√©faut du menu (et enlever l'",a.createElement(n.code,null,"autoPlay")," de l'audio):"),"\n",a.createElement(n.pre,{numbered:!0,highlighting:"1-27,32,58,62"},a.createElement(n.code,{className:"language-tsx"},'const defaultPizzas = [\n  {\n    id: 1,\n    title: "4 fromages",\n    content: "Gruy√®re, S√©rac, Appenzel, Gorgonzola, Tomates",\n  },\n  {\n    id: 2,\n    title: "Vegan",\n    content: "Tomates, Courgettes, Oignons, Aubergines, Poivrons",\n  },\n  {\n    id: 3,\n    title: "Vegetarian",\n    content: "Mozarella, Tomates, Oignons, Poivrons, Champignons, Olives",\n  },\n  {\n    id: 4,\n    title: "Alpage",\n    content: "Gruy√®re, Mozarella, Lardons, Tomates",\n  },\n  {\n    id: 5,\n    title: "Diable",\n    content: "Tomates, Mozarella, Chorizo piquant, Jalapenos",\n  },\n];\n\nconst Main = () => {\n  const [pizza, setPizza] = useState("");\n  const [description, setDescription] = useState("");\n  const [pizzas] = useState(defaultPizzas);\n\n  const handleSubmit = (e: SyntheticEvent) => {\n    e.preventDefault();\n    console.log("submit:", pizza, description);\n  };\n\n  const handlePizzaChange = (e: SyntheticEvent) => {\n    const pizzaInput = e.target as HTMLInputElement;\n    console.log("change in pizzaInput:", pizzaInput.value);\n    setPizza(pizzaInput.value);\n  };\n\n  const handleDescriptionChange = (e: SyntheticEvent) => {\n    const descriptionInput = e.target as HTMLInputElement;\n    console.log("change in descriptionInput:", descriptionInput.value);\n    setDescription(descriptionInput.value);\n  };\n\n  return (\n    <main>\n      <p>My HomePage</p>\n      <p>\n        Because we love JS, you can also click on the header to stop / start the\n        music ; )\n      </p>\n      <audio id="audioPlayer" controls >\n        <source src={sound} type="audio/mpeg" />\n        Your browser does not support the audio element.\n      </audio>\n      <PizzaMenu pizzas={pizzas} />\n      // Reste du code\n')),"\n",a.createElement(n.p,null,"L'application s'affiche comme auparavant."),"\n",a.createElement(n.p,null,"Nous allons maintenant faire en sorte que lors du submit, on mette √† jour la variable d'√©tat ",a.createElement(n.code,null,"pizzas"),"."),"\n",a.createElement(n.h1,null,a.createElement(s,null," Mise √† jour de l'√©tat en React ")),"\n",a.createElement(n.p,null,"En React, nous ne devons jamais mettre √† jour l'√©tat directement.\nLors du submit, nous pourrions √™tre tent√© de faire quelque chose du genre :"),"\n",a.createElement(n.pre,{highlighting:"6-7"},a.createElement(n.code,{className:"language-ts"},"const newPizza = {\n      id: nextPizzaId(pizzas),\n      title: pizza,\n      content: description,\n    };\npizzas.push(newPizza);  \nsetPizzas(pizzas);\n")),"\n",a.createElement(n.p,null,"üëé Si vous faites cela, √ßa pourrait marcher, et vous pourriez vous en sortir malgr√© tout.",a.createElement(n.br),"\n","N√©anmoins, vous risquez d'avoir des soucis de debugging (vous ne pouvez pas suivre les changements d'√©tats), d'optimisation, et m√™me de comportement erratique..."),"\n",a.createElement(n.p,null,"üëç Retenez qu'en React, l'√©tat est ",a.createElement(n.strong,null,"immuable"),". Si vous souhaitez le changer, vous devez chaque fois passer un nouvel objet √† votre fonction mettant √† jour l'√©tat."),"\n",a.createElement(n.p,null,"Par exemple, pour mettre √† jour un array, vous avez deux options. Soit vous utilisez la fonction ",a.createElement(n.code,null,"concat")," qui cr√©e un nouvel array, ajoute l'√©l√©ment, et renvoie le nouvel array :"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-ts"},"setPizzas(pizzas.concat(newPizza));\n")),"\n",a.createElement(n.p,null,"Soit vous utilisez le spread operator pour cr√©er un nouvel array contenant tous les √©l√©ments de pizzas, en y ajoutant le dernier √©l√©ment :"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-ts"},"setPizzas([...pizzas, newPizza]);\n")),"\n",a.createElement(n.p,null,"Voici le code final du  ",a.createElement(n.code,null,"Main")," dans lequel nous avons ajout√© une fonction toute √† la fin permettant de g√©n√©rer un identifiant :"),"\n",a.createElement(n.pre,{numbered:!0,highlighting:"43-53,132-134"},a.createElement(n.code,{className:"language-tsx"},'import {  SyntheticEvent, useState } from "react";\nimport sound from "../../assets/sounds/Infecticide-11-Pizza-Spinoza.mp3";\nimport DrinkCard from "./DrinkCard";\nimport DrinkMenu from "./DrinkMenu";\nimport "./Main.css";\nimport PizzaMenu from "./PizzaMenu";\nimport { Pizza } from "../../types";\n\n\nconst defaultPizzas = [\n  {\n    id: 1,\n    title: "4 fromages",\n    content: "Gruy√®re, S√©rac, Appenzel, Gorgonzola, Tomates",\n  },\n  {\n    id: 2,\n    title: "Vegan",\n    content: "Tomates, Courgettes, Oignons, Aubergines, Poivrons",\n  },\n  {\n    id: 3,\n    title: "Vegetarian",\n    content: "Mozarella, Tomates, Oignons, Poivrons, Champignons, Olives",\n  },\n  {\n    id: 4,\n    title: "Alpage",\n    content: "Gruy√®re, Mozarella, Lardons, Tomates",\n  },\n  {\n    id: 5,\n    title: "Diable",\n    content: "Tomates, Mozarella, Chorizo piquant, Jalapenos",\n  },\n] ;\n\nconst Main = () => {\n  const [pizza, setPizza] = useState("");\n  const [description, setDescription] = useState("");\n  const [pizzas, setPizzas] = useState(defaultPizzas);\n\n  const handleSubmit = (e: SyntheticEvent) => {\n    e.preventDefault();\n    console.log("submit:", pizza, description);\n    const newPizza = {\n      id: nextPizzaId(pizzas),\n      title: pizza,\n      content: description,\n    };\n    \n    setPizzas([...pizzas, newPizza]);\n  };\n\n  const handlePizzaChange = (e: SyntheticEvent) => {\n    const pizzaInput = e.target as HTMLInputElement;\n    console.log("change in pizzaInput:", pizzaInput.value);\n    setPizza(pizzaInput.value);\n  };\n\n  const handleDescriptionChange = (e: SyntheticEvent) => {\n    const descriptionInput = e.target as HTMLInputElement;\n    console.log("change in descriptionInput:", descriptionInput.value);\n    setDescription(descriptionInput.value);\n  };\n\n  return (\n    <main>\n      <p>My HomePage</p>\n      <p>\n        Because we love JS, you can also click on the header to stop / start the\n        music ; )\n      </p>\n      <audio id="audioPlayer" controls >\n        <source src={sound} type="audio/mpeg" />\n        Your browser does not support the audio element.\n      </audio>\n      <PizzaMenu pizzas={pizzas} />\n\n      <div>\n        <br />\n        <form onSubmit={handleSubmit}>\n          <label htmlFor="pizza">Pizza</label>\n          <input\n            value={pizza}\n            type="text"\n            id="pizza"\n            name="pizza"\n            onChange={handlePizzaChange}\n            required\n          />\n          <label htmlFor="description">Description</label>\n          <input\n            value={description}\n            type="text"\n            id="description"\n            name="description"\n            onChange={handleDescriptionChange}\n            required\n          />\n          <button type="submit">Ajouter</button>\n        </form>\n      </div>\n\n      <DrinkMenu title="Notre Menu de Boissons">\n        <DrinkCard\n          title="Coca-Cola"\n          image="https://media.istockphoto.com/id/1289738725/fr/photo/bouteille-en-plastique-de-coke-avec-la-conception-et-le-chapeau-rouges-d%C3%A9tiquette.jpg?s=1024x1024&w=is&k=20&c=HBWfROrGDTIgD6fuvTlUq6SrwWqIC35-gceDSJ8TTP8="\n        >\n          <p>Volume: 33cl</p>\n          <p>Prix: 2,50 ‚Ç¨</p>\n        </DrinkCard>\n        <DrinkCard\n          title="Pepsi"\n          image="https://media.istockphoto.com/id/185268840/fr/photo/bouteille-de-cola-sur-un-fond-blanc.jpg?s=1024x1024&w=is&k=20&c=xdsxwb4bLjzuQbkT_XvVLyBZyW36GD97T1PCW0MZ4vg="\n        >\n          <p>Volume: 33cl</p>\n          <p>Prix: 2,50 ‚Ç¨</p>\n        </DrinkCard>\n        <DrinkCard\n          title="Eau Min√©rale"\n          image="https://media.istockphoto.com/id/1397515626/fr/photo/verre-deau-gazeuse-%C3%A0-boire-isol%C3%A9.jpg?s=1024x1024&w=is&k=20&c=iEjq6OL86Li4eDG5YGO59d1O3Ga1iMVc_Kj5oeIfAqk="\n        >\n          <p>Volume: 50cl</p>\n          <p>Prix: 1,50 ‚Ç¨</p>\n        </DrinkCard>\n      </DrinkMenu>\n    </main>\n  );\n};\n\nconst nextPizzaId = (pizzas: Pizza[]) => {\n  return pizzas.reduce((maxId, pizza) => Math.max(maxId, pizza.id), 0) + 1;\n};\n\nexport default Main;\n')),"\n",a.createElement(n.p,null,"Notons que la fonction ",a.createElement(n.code,null,"reduce")," est tr√®s int√©ressante :"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"c'est de la programmation fonctionnelle, ",a.createElement(n.code,null,"reduce")," re√ßoit une fonction en param√®tre (on appelle √ßa une callback)"),"\n",a.createElement(n.li,null,"elle permet d'it√©rer sur tous les √©l√©ments d'une collection, en appelant la callback sur chaque √©l√©ment de la collection ; chaque √©l√©ment est re√ßu dans le deuxi√®me argument de la callback appel√© ",a.createElement(n.code,null,"pizza")," ici ;"),"\n",a.createElement(n.li,null,"√† chaque appel de la callback, le r√©sultat de l'it√©ration pr√©c√©dente est r√©cup√©r√© dans le 1er argument de la callback appel√© ",a.createElement(n.code,null,"maxId")," ici ;"),"\n",a.createElement(n.li,null,"√† la 1√®re it√©ration, on consid√®re la valeur ",a.createElement(n.code,null,"0")," comme valeur pr√©c√©dente ; c'est d'ailleurs la valeur ",a.createElement(n.code,null,"0")," qui serait renvoy√©e s'il n'y a pas d'√©l√©ments dans la collection."),"\n"),"\n",a.createElement(n.h1,null,a.createElement(s,null," Exercice 2.7 : Gestion d'une collection pour l'√©tat  ")),"\n",a.createElement(n.p,null,"Veuillez cr√©er un nouveau projet en utilisant les technos Vite + React + TS + SWC nomm√© ",a.createElement(n.code,null,"/exercises/2.7")," dans votre git repo."),"\n",a.createElement(n.p,null,"Veuillez cr√©er une nouvelle application qui vous permette, dans la m√™me page :"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"d'afficher 5 de vos films pr√©f√©r√©s."),"\n",a.createElement(n.li,null,"d'ajouter un film via un formulaire."),"\n"),"\n",a.createElement(n.p,null,"Un film devra avoir :"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"un titre"),"\n",a.createElement(n.li,null,"un director"),"\n",a.createElement(n.li,null,"une dur√©e en minutes"),"\n"),"\n",a.createElement(n.p,null,"Un film pourra avoir :"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"un lien vers une image"),"\n",a.createElement(n.li,null,"une description"),"\n",a.createElement(n.li,null,"un budget (en million)"),"\n"),"\n",a.createElement(n.p,null,'Une fois tout fonctionnel, veuillez faire un commit avec le message suivant : "new:ex2.7"'),"\n",a.createElement(n.h1,null,a.createElement(s,null," Gestion d'un √©tat partag√© par plusieurs composants  ")),"\n",a.createElement(n.p,null,"Quand un √©tat est partag√© par plusieurs composants, sa gestion peut se compliquer."),"\n",a.createElement(n.p,null,"Pour notre tutoriel, afin de bien structurer notre code, nous allons cr√©er un nouveau composant ",a.createElement(n.code,null,"AddPizza")," dans ",a.createElement(n.code,null,"/src/components/Main/AddPizza.tsx")," :"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-tsx"},'import { useState, SyntheticEvent } from "react";\n\nimport { NewPizza } from "../../types";\n\ninterface AddPizzaProps {\n  addPizza: (pizza: NewPizza) => void;\n}\n\nconst AddPizza = ({ addPizza }: AddPizzaProps) => {\n  const [pizza, setPizza] = useState("");\n  const [description, setDescription] = useState("");\n\n  const handleSubmit = (e: SyntheticEvent) => {\n    e.preventDefault();\n    console.log("submitting pizza:", pizza, description);\n    addPizza({ title: pizza, content: description });\n  };\n\n  const handlePizzaChange = (e: SyntheticEvent) => {\n    const pizzaInput = e.target as HTMLInputElement;\n    console.log("change in pizzaInput:", pizzaInput.value);\n    setPizza(pizzaInput.value);\n  };\n\n  const handleDescriptionChange = (e: SyntheticEvent) => {\n    const descriptionInput = e.target as HTMLInputElement;\n    console.log("change in descriptionInput:", descriptionInput.value);\n    setDescription(descriptionInput.value);\n  };\n\n  return (\n    <div>\n      <form onSubmit={handleSubmit}>\n        <label htmlFor="pizza">Pizza</label>\n        <input\n          value={pizza}\n          type="text"\n          id="pizza"\n          name="pizza"\n          onChange={handlePizzaChange}\n          required\n        />\n        <label htmlFor="description">Description</label>\n        <input\n          value={description}\n          type="text"\n          id="description"\n          name="description"\n          onChange={handleDescriptionChange}\n          required\n        />\n        <button type="submit">Ajouter</button>\n      </form>\n    </div>\n  );\n};\n\nexport default AddPizza;\n')),"\n",a.createElement(n.p,null,"Nous avons cr√©√© un nouveau type ",a.createElement(n.code,null,"NewPizza")," qui est quasi identique au type ",a.createElement(n.code,null,"Pizza"),", √† la diff√©rence qu'il ne contient pas d'id :"),"\n",a.createElement(n.pre,{numbered:!0,highlighting:"7,9"},a.createElement(n.code,{className:"language-ts"},'interface Pizza {\n  id: number;\n  title: string;\n  content: string;\n}\n\ntype NewPizza = Omit<Pizza, "id">;\n\nexport type { Pizza, NewPizza };\n')),"\n",a.createElement(n.p,null,"Le composant ",a.createElement(n.code,null,"AddPizza")," re√ßoit de son parent la callback qui permet de mettre √† jour l'√©tat g√©r√© par le parent !"),"\n",a.createElement(n.p,null,"üí≠ Nous pouvons maintenant bien assimiler comment un composant \"enfant\" peut renvoyer de l'information √† son parent. C'est via la callback que l'enfant re√ßoit, lorsqu'il l'appelle, qu'il passera en param√®tre ses donn√©es. Ici, l'enfant passe comme info au parent une nouvelle pizza : ",a.createElement(n.code,null,"addPizza({ title: pizza, content: description });")),"\n",a.createElement(n.p,null,"Il est √† noter que comme l'enfant n'a pas acc√®s √† toutes les pizzas et leur identifiants, c'est le parent qui devra g√©n√©rer un identifiant."),"\n",a.createElement(n.p,null,"Ainsi, le composant ",a.createElement(n.code,null,"Main")," est simplifi√© en faisant appel √† ",a.createElement(n.code,null,"AddPizza")," :"),"\n",a.createElement(n.pre,{numbered:!0,highlighting:"8,44-47,65"},a.createElement(n.code,{className:"language-tsx"},'import {  useState } from "react";\nimport sound from "../../assets/sounds/Infecticide-11-Pizza-Spinoza.mp3";\nimport DrinkCard from "./DrinkCard";\nimport DrinkMenu from "./DrinkMenu";\nimport "./Main.css";\nimport PizzaMenu from "./PizzaMenu";\nimport { NewPizza, Pizza } from "../../types";\nimport AddPizza from "./AddPizza";\n\n\nconst defaultPizzas = [\n  {\n    id: 1,\n    title: "4 fromages",\n    content: "Gruy√®re, S√©rac, Appenzel, Gorgonzola, Tomates",\n  },\n  {\n    id: 2,\n    title: "Vegan",\n    content: "Tomates, Courgettes, Oignons, Aubergines, Poivrons",\n  },\n  {\n    id: 3,\n    title: "Vegetarian",\n    content: "Mozarella, Tomates, Oignons, Poivrons, Champignons, Olives",\n  },\n  {\n    id: 4,\n    title: "Alpage",\n    content: "Gruy√®re, Mozarella, Lardons, Tomates",\n  },\n  {\n    id: 5,\n    title: "Diable",\n    content: "Tomates, Mozarella, Chorizo piquant, Jalapenos",\n  },\n] ;\n\nconst Main = () => {\n\n  const [pizzas, setPizzas] = useState(defaultPizzas);\n\n\n  const addPizza = (newPizza:NewPizza) => {   \n    const pizzaAdded = { ...newPizza, id: nextPizzaId(pizzas) };\n    setPizzas([...pizzas, pizzaAdded]);\n  };\n\n\n  return (\n    <main>\n      <p>My HomePage</p>\n      <p>\n        Because we love JS, you can also click on the header to stop / start the\n        music ; )\n      </p>\n      <audio id="audioPlayer" controls >\n        <source src={sound} type="audio/mpeg" />\n        Your browser does not support the audio element.\n      </audio>\n      <PizzaMenu pizzas={pizzas} />\n\n      <div>\n        <br />\n        <AddPizza addPizza={addPizza} />\n      </div>\n\n      <DrinkMenu title="Notre Menu de Boissons">\n        <DrinkCard\n          title="Coca-Cola"\n          image="https://media.istockphoto.com/id/1289738725/fr/photo/bouteille-en-plastique-de-coke-avec-la-conception-et-le-chapeau-rouges-d%C3%A9tiquette.jpg?s=1024x1024&w=is&k=20&c=HBWfROrGDTIgD6fuvTlUq6SrwWqIC35-gceDSJ8TTP8="\n        >\n          <p>Volume: 33cl</p>\n          <p>Prix: 2,50 ‚Ç¨</p>\n        </DrinkCard>\n        <DrinkCard\n          title="Pepsi"\n          image="https://media.istockphoto.com/id/185268840/fr/photo/bouteille-de-cola-sur-un-fond-blanc.jpg?s=1024x1024&w=is&k=20&c=xdsxwb4bLjzuQbkT_XvVLyBZyW36GD97T1PCW0MZ4vg="\n        >\n          <p>Volume: 33cl</p>\n          <p>Prix: 2,50 ‚Ç¨</p>\n        </DrinkCard>\n        <DrinkCard\n          title="Eau Min√©rale"\n          image="https://media.istockphoto.com/id/1397515626/fr/photo/verre-deau-gazeuse-%C3%A0-boire-isol%C3%A9.jpg?s=1024x1024&w=is&k=20&c=iEjq6OL86Li4eDG5YGO59d1O3Ga1iMVc_Kj5oeIfAqk="\n        >\n          <p>Volume: 50cl</p>\n          <p>Prix: 1,50 ‚Ç¨</p>\n        </DrinkCard>\n      </DrinkMenu>\n    </main>\n  );\n};\n\nconst nextPizzaId = (pizzas: Pizza[]) => {\n  return pizzas.reduce((maxId, pizza) => Math.max(maxId, pizza.id), 0) + 1;\n};\n\nexport default Main;\n')),"\n",a.createElement(n.p,null,"üí≠ Vous devriez √† pr√©sent avoir les r√©ponses √† ces questions :"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"Comment passer de l'info d'un parent vers ses enfants ?"),"\n",a.createElement(n.li,null,"Comment passer de l'info d'un enfant vers un anc√™tre ?"),"\n",a.createElement(n.li,null,"Comment passer de l'info d'un sibling (fr√®re ou s≈ìur) vers un autre sibling ?"),"\n"),"\n",a.createElement(n.p,null,"Si n√©cessaire, vous pouvez trouver le code associ√© √† ce tutoriel ici : ",a.createElement(n.a,{href:"https://github.com/e-vinci/ts-demos/tree/main/front/medium-state"},"medium-state"),"."),"\n",a.createElement(n.h1,null,a.createElement(s,null," Debugging d'une application React  ")),"\n",a.createElement(n.h2,null,"Introduction"),"\n",a.createElement(n.p,null,"üí≠ Qui est votre meilleur ami ?"),"\n",a.createElement(n.p,null,"Il est possible qu'√† ce stade-ci, vous ignorez une des bonnes r√©ponses, car pour les d√©veloppeurs, le debugger est leur meilleur ami !"),"\n",a.createElement(n.p,null,"Le debugger est toujours l√† pour vous, pr√™t √† vous faire voyager pas √† pas dans votre code, √† vous donner des pistes dans les moments difficiles, sans imposer de solutions, il vous offre une libert√© totale ! Et il acceptera toujours votre code tel qu'il est, sous r√©serve bien s√ªr que celui-ci compile.\nC'est exactement ce que l'on attend d'un ami üòÅ."),"\n",a.createElement(n.h2,null,"Debugging sous Chrome"),"\n",a.createElement(n.p,null,"Pour acc√©der aux outils de debugging sous Chrome :"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"Soit clic droit sur votre page Web, ",a.createElement(n.code,null,"Inspect"),"."),"\n",a.createElement(n.li,null,"Soit ",a.createElement(n.code,null,"F12"),"."),"\n",a.createElement(n.li,null,"Clic sur le tab ",a.createElement(n.code,null,"Sources"),"."),"\n",a.createElement(n.li,null,"Dans ",a.createElement(n.code,null,"localhost:5173")," (ou un autre port en fonction du port associ√© √† votre app, ",a.createElement(n.code,null,"5173")," est le port par d√©faut d'une application ex√©cut√©e par ",a.createElement(n.code,null,"Vite"),"), dans ",a.createElement(n.code,null,"src"),", vous trouverez vos fichiers ",a.createElement(n.code,null,".tsx"),". Il y a chaque fois deux versions d'un m√™me fichier ; celle qui vous int√©resse est celle dont le nom de fichier est √©crit en italique : c'est un map de vos sources contenant le code TSX / TS."),"\n"),"\n",a.createElement(n.p,null,"Pour d√©boguer un fichier ",a.createElement(n.code,null,".tsx")," ou ",a.createElement(n.code,null,".ts")," :"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"\n",a.createElement(n.p,null,"Ajout de breakpoint : clic sur le num√©ro de la ligne √† gauche du code."),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(n.p,null,"Utilisation des fl√®ches pour ex√©cuter et naviguer dans le code :"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,a.createElement(n.code,null,"Step over")," : pour aller √† la ligne de code suivante."),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"Step into")," : pour entrer dans une fonction."),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"Resume")," : pour aller au prochain breakpoint, est souvent utilis√© quand on veut avancer plus vite dans du code contenant de nombreuses lignes."),"\n"),"\n",a.createElement(n.h2,null,"Debugging dans VS code"),"\n",a.createElement(n.p,null,"Veuillez ouvrir votre application dans VS Code en tant que Workspace. Pour ce faire : ",a.createElement(n.code,null,"File"),", ",a.createElement(n.code,null,"Open Folder...")," et s√©lectionnez le r√©pertoire de votre application Vite + React + TS."),"\n",a.createElement(n.p,null,"La toute premi√®re fois, vous devez cr√©er une configuration pour votre debugger :"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"Cliquez sur `Run and Debug."),"\n",a.createElement(n.li,null,"Cliquez sur ",a.createElement(n.code,null,"create a launch.json file"),"."),"\n",a.createElement(n.li,null,"S√©lectionnez ",a.createElement(n.code,null,"Web App (Chrome)"),"."),"\n"),"\n",a.createElement(n.p,null,"Vous obtenez une configuration dans ",a.createElement(n.code,null,".vscode/launch.json"),". Veuillez changer le port de l'url vers le port par d√©faut de ",a.createElement(n.code,null,"Vite")," (",a.createElement(n.code,null,"5173"),"):"),"\n"),"\n"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-json"},'  {\n    // Use IntelliSense to learn about possible attributes.\n    // Hover to view descriptions of existing attributes.\n    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387\n    "version": "0.2.0",\n    "configurations": [\n        {\n            "type": "chrome",\n            "request": "launch",\n            "name": "Launch Chrome against localhost",\n            "url": "http://localhost:5173",\n            "webRoot": "${workspaceFolder}"\n        }\n    ]\n}\n')),"\n",a.createElement(n.p,null,"D'abord lancez votre application √† l'aide de la commande habituelle : ",a.createElement(n.code,null,"npm run dev"),"."),"\n",a.createElement(n.p,null,"Maintenant que votre application tourne, vous allez lui attacher le debugger.  Il suffit de cliquer sur ",a.createElement(n.code,null,"F5")," pour lancer le debugger."),"\n",a.createElement(n.h1,null,a.createElement(s,null," üç¨ Challenge optionnel 2.8 : gestion d'un √©tat partag√©  ")),"\n",a.createElement(n.p,null,"Si vous le souhaitez, et que vous vous sentez avanc√© dans ce cours, vous pourriez d√©couvrir des concepts par vous-m√™me √† travers ce challenge. Vous pouvez cr√©er un nouveau projet en copiant le code du tutoriel nomm√© ",a.createElement(n.code,null,"medium-state")," en tant que r√©pertoire ",a.createElement(n.code,null,"/exercises/2.8")," dans votre git repo."),"\n",a.createElement(n.p,null,"Vous avez remarqu√© que dans le composant ",a.createElement(n.code,null,"Main"),', il est √©crit : "Because we love JS, you can also click on the header to stop / start the music ; )"'),"\n",a.createElement(n.p,null,"Vous pourriez choisir cette mission : √† l'aide de JS/TS, veuillez faire en sorte que l'on puisse cliquer sur le ",a.createElement(n.code,null,"Header")," et que cela d√©marre ou stop la musique de l'√©l√©ment ",a.createElement(n.code,null,"<audio>")," pr√©sent dans le main."),"\n",a.createElement(n.p,null,"ü§ù Tips :"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"Utilisation du Hook ",a.createElement(n.code,null,"useRef")," pour obtenir une r√©f√©rence directe et persistante √† l'√©l√©ment ",a.createElement(n.code,null,"<audio>"),", qui peut √™tre mut√©e, ce qui permet d'interagir avec cet √©l√©ment DOM de mani√®re imp√©rative, par exemple pour appeler la m√©thode ",a.createElement(n.code,null,"play")," ou ",a.createElement(n.code,null,"pause"),". L'avantage de cette m√©thode c'est qu'elle ne provoque pas de re-render du composant quand il est mis √† jour (√† l'inverse de si l'on faisait de la programmation old-school avec ",a.createElement(n.code,null,"document.getElementById")," pour r√©cup√©rer une r√©f√©rence √† ",a.createElement(n.code,null,"<audio>"),")."),"\n",a.createElement(n.li,null,"Utilisation du Hook ",a.createElement(n.code,null,"useEffect")," pour r√©aliser une action √† chaque fois que l'on a une action √† r√©aliser parce qu'il y aurait eu un clic dans le Header. Dans ce cas-ci, il faudrait bien comprendre le ",a.createElement(n.code,null,"useEffect")," pour l'associer au changement d'une variable d'√©tat (qui repr√©sente s'il y a besoin d'une action √† faire √† cause d'un clic dans le header)."),"\n"),"\n",a.createElement(n.p,null,'Une fois tout fonctionnel, veuillez faire un commit avec le message suivant : "new:ex2.8+".'))}var o=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,l.ah)(),e.components);return n?a.createElement(n,e,a.createElement(r,e)):r(e)};function i(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}var u=t(4160),s=t(5583),c=t(5679),m=t(307),p=t(7410),d=t(9523),z=t(8075),E=t(9063),g=t(1631),v=t(5772),h=t(2770),f=t(7008),b=t(9771),P=t(1218),q=(t(5258),t(9394)),y=t(4579),I=t(7743),M=t(9256),S=t(6488),C=t(5175),x=t(6387),k=t(6044);const D={Link:u.Link,Image:c.Z,Section:m.Z,Content:p.Z,Background:d.Z,SectionHeader:z.Z,SectionFooter:E.Z,PageHeader:g.Z,CodeBlock:h.Z,LinkFile:f.Z,ScrollableImage:b.Z,PublicProjectsView:P.Z,AuthenticatedBlock:q.Z,UnAuthenticatedBlock:y.Z,NestedMdxBlock:I.Z,YoutubeImage:M.Z,InternalPageMenu:S.Z,InternalPageMenuItem:C.Z,InternalPageTitle:x.Z,PathViewer:k.k,PathViewerItem:k.F};function j(e){var n,t,r,o,i;let{data:{mdx:u,allImages:c},children:m}=e;return D.PageHeader=(0,v.u)(g.Z,null==u?void 0:u.frontmatter),a.createElement(s.Z,Object.assign({},null!=u&&u.frontmatter?{frontmatter:u.frontmatter}:{},null!=u&&null!==(n=u.frontmatter)&&void 0!==n&&n.navbarExtraStyles?{navbarExtraStyles:u.frontmatter.navbarExtraStyles}:{},null!=u&&null!==(t=u.frontmatter)&&void 0!==t&&t.headerImage?{headerImage:u.frontmatter.headerImage}:{},null!=u&&null!==(r=u.frontmatter)&&void 0!==r&&r.featuredImage?{featuredImage:u.frontmatter.featuredImage}:{},null!=u&&null!==(o=u.frontmatter)&&void 0!==o&&o.title?{pageTitle:u.frontmatter.title}:{},c&&c.length>0?{allImages:c}:{}),a.createElement(l.Zo,{components:D},a.createElement("div",{className:null!=u&&null!==(i=u.frontmatter)&&void 0!==i&&i.autoMargin?"page page--auto-margin ":"page"},m)))}function w(e){return a.createElement(j,e,a.createElement(o,e))}}}]);
//# sourceMappingURL=component---src-templates-mdx-pages-js-content-file-path-src-mdx-pages-part-2-medium-state-fr-mdx-4c0337ed77fb4a45c9be.js.map