---
title: "Exercices suppl√©mentaires"
description: "Quelques exercices suppl√©mentaires"
---

# üç¨ Exercices suppl√©mentaires

<InternalPageMenu>
  <PathViewer>
    <PathViewerItem to="/"> web2course </PathViewerItem>
    <PathViewerItem to="/part4"> üç¨ Partie 5 </PathViewerItem>
    <PathViewerItem selected> Exercices suppl√©mentaires </PathViewerItem>
  </PathViewer>
  <InternalPageMenuItem> üç¨ Exercice 5.1 : Auto-refresh </InternalPageMenuItem>
  <InternalPageMenuItem> üç¨ Exercice 5.2 : Gestion de la navigation lors de l'auto-refresh </InternalPageMenuItem>
  <InternalPageMenuItem> üç¨ Exercice 5.3 : IHM & service web en r√©sum√© </InternalPageMenuItem>
</InternalPageMenu>


# <InternalPageTitle> üç¨ Exercice 5.1 : Auto-refresh </InternalPageTitle>

S'il vous reste du temps, il serait int√©ressant de faire en sorte que cycliquement, tous les 5 secondes par exemple, l'affichage de la liste de films se mette automatiquement √† jour. C'est donc un appel √† l'API qui est √† faire tous les 5 secondes.

Ainsi, si d'autres utilisateurs ajoutent un film, vous les verrez directement appara√Ætre dans votre fen√™tre.

‚ö° Attention que si le composant d'affichage des films est utilis√© pour permettre de directement mettre √† jour un film, celui-ci ne doit pas se r√©afficher si un utilisateur est en train de mettre √† jour un film.

Le code de vos applications se trouverait dans votre repository local et
votre web repository (normalement appel√© **`web2`**) dans le r√©pertoire nomm√©
**`/exercises/5.1`**.

Vous pouvez faire un **`commit`** de votre code avec le message suivant : 
**`5.1 auto-refresh`**.

#### ü§ù Tips
Pensez √† la fonction **`setInterval`**.


# <InternalPageTitle> üç¨ Exercice 5.2 : Gestion de la navigation lors de l'auto-refresh </InternalPageTitle>

Vous pourriez continuer le d√©veloppement de **myMovies**.

üí≠ Que peut-il se passer de d√©sagr√©able si un utilisateur passe rapidement de la page listant les informations d'un film vers la page d'ajout d'un film ?

Comme le render de tous les films est une action asynchrone, il est possible que celui-ci soit r√©alis√© apr√®s que l'utilisateur ait quitt√© la page d'affichage des films. Cela peut √™tre g√™nant, car si vous √™tes sur le composant pour ajouter un film, vous ne souhaitez pas que votre formulaire d'ajout d'un film soit remplac√©, de mani√®re erron√©e, par la liste des films !

Nous vous proposons d'impl√©menter ces deux fonctions :
-	Stopper les futurs appels de **`fetch`**, les appels automatiques vers vos APIs (**`setInterval`** et **`clearInterval`**) quand il y a un clic sur un lien de la **`Navbar`** ;
-	Stopper les appels de **`fetch`** en cours vers vos APIs quand il y a un clic sur un lien de la **`Navbar`**. En effet, si votre API doit renvoyer beaucoup de donn√©es, notamment quand il y a des images √† communiquer, il est possible que cela prenne plusieurs secondes avant que l'API vous r√©ponde.

Le code de vos applications se trouverait dans votre repository local et
votre web repository (normalement appel√© **`web2`**) dans le r√©pertoire nomm√©
**`/exercises/5.2`**.

Vous pouvez faire un **`commit`** de votre code avec le message suivant : 
**`5.2 auto-refresh & navigation`**.

#### ü§ù Tips
- Pensez aux fonctions **`setInterval`** et **`clearInterval`**.
- Pour stopper un **`fetch`** en cours, vous pouvez utiliser un **`AbortControlller`**. Toute l'info est disponible sur la [Documentation MDN](https://developer.mozilla.org/en-US/docs/Web/API/AbortController).

# <InternalPageTitle> üç¨ Exercice 5.3 : IHM & service web en r√©sum√© </InternalPageTitle>

## Introduction
Voici un exercice qui fait revoir les comp√©tences essentiels de ce cours de JS. Il a √©t√© utilis√© comme examen pour les √©tudiants de Vinci en deuxi√®me ann√©e de bachelier en Informatique de Gestion en ao√ªt 2022. 

Normalement, cette exercice, d√©coup√© en trois questions, devrait se r√©aliser dans un d√©lai de 3h.

Veuillez t√©l√©charger ce fichier
<LinkFile name="examen_js.zip" target="_blank" download>examen_js.zip</LinkFile>.
Cette archive contient un boilerplate pour chaque question et les ressources √† utiliser pour cet examen.

Dans un premier temps, veuillez d√©sarchiver **`examen_js.zip`** localement sur votre machine.  
‚ö° Veuillez √©viter de le faire sur un r√©pertoire qui est partag√© sur le cloud. En effet, il y a des milliers de fichiers associ√©s aux **`node_modules`** lorsque vous lancerez l'installation des packages ! Ca serait une vraie horreur √† synchroniser üò® !

## Objectif
Nous allons d√©velopper deux frontends et une API pour une agence de voyages.

## Question 1 : Cr√©er une IHM interactive & moderne
Nous souhaitons afficher des lieux de vacances propos√©s par l'agence de voyages. Il y a 5 lieux diff√©rents, chacun avec un id, un nom et une image.

Le boilerplate pour cette question se trouve dans **`/question1`**.
Vous trouverez 5 images correspondant √† chaque lieu dans le r√©pertoire **`/question1/src/img`**, ainsi qu'un fichier contenant une liste des lieux avec leur id, leur nom et leur image dans **`/question1/src/utils/places.js`**.

Vous devez cr√©er deux pages :
-	La page d'accueil, accessible avec l'URI **`"/"`** ou avec un lien nomm√© "Home" dans la barre de navigation, doit afficher une liste de tous les noms de lieux de vacances.
-	La page de photos, accessible avec l'URI **`"/photos"`** ou avec un lien nomm√© "Photos" dans la barre de navigation, doit afficher un carrousel des lieux propos√©s.
  - Lorsqu'on arrive sur la page initialement, la page doit afficher le 3√®me lieu dans la liste, avec son image et son nom en dessous.
  - La page doit √©galement afficher deux boutons. Le premier permet d'afficher le lieu pr√©c√©dent dans la liste √† la place de celui-ci. Et  l'autre permet d'afficher le lieu suivant. Ces boutons ne doivent pas √™tre cliquables s'il n'y a plus de lieu suivant ou de lieu pr√©c√©dent dans la liste.

Contraintes d'impl√©mentation : 
-	Veuillez utiliser le fichier **`/question1/src/utils/places.js`** qui reprend des lieux de vacances. Vous devez mettre √† jour ce fichier pour pouvoir l'utiliser dans votre code JS comme module.
-	Aucune autre page ne doit √™tre disponible sur le site web.
-	Vous devez impl√©menter le carrousel vous-m√™me, vous ne pouvez pas utiliser un carrousel de Bootstrap.
-	Utilisez les images import√©es statiquement dans la liste des lieux de vacances et changez la source de l'image affich√©e quand l'utilisateur clique sur un bouton.

Voici un exemple de ce √† quoi pourrait ressembler votre site web :

<ScrollableImage name="places.png" minWidth="800px" maxWidth="1599x" />

<ScrollableImage name="carousel.png" minWidth="800px" maxWidth="1599x" />

## Question 2 : Cr√©er un service web
Nous souhaitons d√©velopper une RESTful API pour g√©rer les lieux de vacances propos√©s par l'agence, les utilisateurs du site, ainsi que les lieux favoris de ces utilisateurs.

Le boilerplate pour l'API de cette question se trouve dans **`/question2`**, c'est une copie du boilerplate du cours.

Veuillez cr√©er les op√©rations suivantes :
-	**Cr√©er un nouveau lieu de vacances**. L'op√©ration doit prendre en entr√©e le nom du lieu ainsi que sa description, et doit retourner l'ID du lieu cr√©√© au format JSON. L'op√©ration doit renvoyer une erreur si le nom ou la description ne sont pas fournis.
-	**Cr√©er un nouvel utilisateur**. L'op√©ration doit prendre en entr√©e le nom de l'utilisateur ainsi que son adresse mail, et doit retourner l'ID de l'utilisateur cr√©√© au format JSON. L'op√©ration doit renvoyer une erreur si le nom ou l'adresse mail ne sont pas fournis, ainsi que si un utilisateur existe d√©j√† pour cette adresse mail.
-	**Ajouter un lieu √† ses favoris**. L'op√©ration doit prendre en entr√©e l'ID de l'utilisateur et l'ID du lieu qu'il souhaite ajouter en favori. L'op√©ration doit renvoyer une erreur si aucun utilisateur ne correspond √† l'ID d'utilisateur donn√©, si aucun lieu ne correspond √† l'ID de lieu donn√©, ou si cet utilisateur a d√©j√† ce lieu dans ses favoris.

Vous devez √©galement cr√©er dans le fichier **`/question2/RESTClient/tests.http`** au minimum une requ√™te par op√©ration que vous devez impl√©menter. Vous pouvez √©galement cr√©er plus de tests si vous le souhaitez.

Contraintes d'impl√©mentation :
-	L'API que vous devez cr√©er doit correspondre aux principes d'une API RESTful.
-	Votre API ne peut pas proposer d'autres op√©rations que celles d√©crites ci-dessus.
-	Les ID que g√©n√®rent votre API doivent provenir du package **uuid**.
-	Les demandes qui sont cr√©√©es doivent persister et donc survivre au red√©marrage de votre application. Vous pouvez faire persister les demandes c√¥t√© serveur de la mani√®re que vous voulez, du moment que cela soit en JSON. N'h√©sitez pas √† utiliser **`/question2/utils/json.js`**.
-	Aucune autorisation JWT est n√©cessaire.

## Question 3 : Cr√©er une SPA int√©grant une IHM et un web service
Gr√¢ce √† l'API que nous avez d√©velopp√© dans la question 2, l'agence de voyages a pu am√©liorer son API pour proposer un syst√®me de recommandations. Cependant, cette API utilise un syst√®me d'Intelligence Artificielle complexe et les op√©rations qui r√©cup√®rent les recommandations peuvent prendre un certain temps. 

Le boilerplate pour cette question se trouve dans **`/question3`**.
Vous devez consommer l'API d√©crite ci-dessous et disponible √† l'adresse **`https://places-exam-api.azurewebsites.net`** pour afficher des recommandations de lieux de vacances. Cette API accepte les requ√™tes venant de toutes les origines et n'a pas de probl√®me de CORS. Vous ne devez donc pas utiliser de proxy pour consommer cette API.

| M√©thode HTTP | URI | Op√©ration | Format |
|---|---|---|---|
| **GET** | **`/places`**| R√©cup√©rer tous les lieux de vacances | Renvoie : **`[ { id, name } ]`** |
| **GET** | **`/recommended`** | R√©cup√©rer le lieu de vacances le plus appr√©ci√© | Renvoie : **`{ id, name }`** |

Sur la page d'accueil du site web, veuillez afficher le nom de tous les lieux de vacances, renvoy√©s par l'API avec l'URI **`/places`** (il n'est pas n√©cessaire d'afficher leur ID). 

Toujours sur la page d'accueil, veuillez √©galement afficher le nom du lieu de vacances le plus appr√©ci√©, renvoy√© par l'API avec l'URI **`/recommended`**. Comme cette op√©ration peut prendre un certain temps, elle ne peut pas ralentir le chargement de la page. Le reste de la page doit √™tre affich√© avant de consommer cette API, et son r√©sultat doit √™tre rajout√© sur la page quand l'op√©ration est termin√©e.

Aucune autre page ne doit √™tre disponible sur le site web. Pensez donc √† effacer le code du boilerplate qui est inutile.