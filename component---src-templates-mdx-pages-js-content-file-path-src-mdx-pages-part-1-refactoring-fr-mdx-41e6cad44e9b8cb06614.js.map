{"version":3,"file":"component---src-templates-mdx-pages-js-content-file-path-src-mdx-pages-part-1-refactoring-fr-mdx-41e6cad44e9b8cb06614.js","mappings":"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","sources":["webpack://myjscourse/./src/mdx-pages/part1/refactoring.fr.mdx","webpack://myjscourse/./src/templates/mdx-pages.js"],"sourcesContent":["/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport {useMDXComponents as _provideComponents} from \"@mdx-js/react\";\nimport React from \"react\";\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h1: \"h1\",\n    p: \"p\",\n    a: \"a\",\n    br: \"br\",\n    ul: \"ul\",\n    li: \"li\",\n    strong: \"strong\",\n    code: \"code\",\n    pre: \"pre\",\n    table: \"table\",\n    thead: \"thead\",\n    tr: \"tr\",\n    th: \"th\",\n    tbody: \"tbody\",\n    td: \"td\",\n    h4: \"h4\"\n  }, _provideComponents(), props.components), {InternalPageMenu, PathViewer, PathViewerItem, InternalPageMenuItem, YoutubeImage, InternalPageTitle} = _components;\n  if (!InternalPageMenu) _missingMdxReference(\"InternalPageMenu\", true);\n  if (!InternalPageMenuItem) _missingMdxReference(\"InternalPageMenuItem\", true);\n  if (!InternalPageTitle) _missingMdxReference(\"InternalPageTitle\", true);\n  if (!PathViewer) _missingMdxReference(\"PathViewer\", true);\n  if (!PathViewerItem) _missingMdxReference(\"PathViewerItem\", true);\n  if (!YoutubeImage) _missingMdxReference(\"YoutubeImage\", true);\n  return React.createElement(React.Fragment, null, React.createElement(_components.h1, null, \"c) Refactoring Ã  l'aide de services\"), \"\\n\", React.createElement(InternalPageMenu, null, React.createElement(PathViewer, null, React.createElement(PathViewerItem, {\n    to: \"/\"\n  }, \" web2course \"), React.createElement(PathViewerItem, {\n    to: \"/part1\"\n  }, \" Partie 1)\"), React.createElement(PathViewerItem, {\n    selected: true\n  }, \" c) Refactoring \")), React.createElement(InternalPageMenuItem, null, \" Architectures web possibles pour une API ? \"), React.createElement(InternalPageMenuItem, null, \" Architecture Express & services \"), React.createElement(InternalPageMenuItem, null, \" Exercice 1.8 : Refactoring Ã  l'aide d'un service \"), React.createElement(InternalPageMenuItem, null, \" Exercice 1.9 : Encore un service \")), \"\\n\", React.createElement(\"div\", {\n    className: \"card card__simple-youtube-container\"\n  }, React.createElement(YoutubeImage, {\n    src: \"https://youtu.be/FihV6wXpIQE\"\n  })), \"\\n\", React.createElement(_components.h1, null, React.createElement(InternalPageTitle, null, \" Architectures web possibles pour une API ? \")), \"\\n\", React.createElement(_components.p, null, \"Si nous reprenons le code actuel du tutoriel de l'API gÃ©rant des boissons (\", React.createElement(_components.a, {\n    href: \"https://github.com/e-vinci/js-demos/tree/main/back/api/persistence\"\n  }, \"persistence\"), \"), nous pouvons dÃ©tecter que celui-ci pourrait Ãªtre plus propre.\"), \"\\n\", React.createElement(_components.p, null, \"Par exemple, le routeur de \\\"drinks\\\" s'occupe tant de gÃ©rer les requÃªtes des clients que d'accÃ©der directement aux donnÃ©es.\", React.createElement(_components.br), \"\\n\", \"GÃ©nÃ©ralement, nous prÃ©fÃ©rons sÃ©parer le code gÃ©rant les accÃ¨s aux donnÃ©es du code gÃ©rant la prÃ©sentation du rÃ©sultat des opÃ©rations.\"), \"\\n\", React.createElement(_components.p, null, \"On peut donc se demander comment sÃ©parer le code traitant de sujets trÃ¨s diffÃ©rents. Il existe une multitude d'architectures possibles, voici par exemple certains des plus grands noms :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"Architecture MVC (Model View Controller)\"), \" ; au niveau backend, ce genre d'architecture est gÃ©nÃ©ralement trÃ¨s utile quand on fait des MPA (ou Multi-Page Applications) via du Server-Side Rendering. Les \", React.createElement(_components.strong, null, \"Views\"), \" permettent de gÃ©nÃ©rer le frontend Ã  l'aide d'un moteur de templating ; le \", React.createElement(_components.strong, null, \"Controller\"), \" s'occupe de traiter les requÃªtes en appelant le \", React.createElement(_components.strong, null, \"Model\"), \" pour l'accÃ¨s aux opÃ©rations sur les donnÃ©es et en renvoyant les \", React.createElement(_components.strong, null, \"Views\"), \" adÃ©quates. Pour une API, cette architecture n'est pas la plus adaptÃ©e.\"), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"Architecture classique \\\"three-tier\\\"\"), \" ; au niveau backend, quand on dÃ©veloppe une architecture trois tiers, cela signifie que l'on dÃ©coupe notre API en trois couches :\", \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"couche de prÃ©sentation\"), \" : cette couche est responsable de prÃ©senter les ressources aux clients et d'interprÃ©ter les reprÃ©sentations des ressources donnÃ©es dans les requÃªtes ;\"), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"couche business\"), \" : cette couche s'occupe de toute la logique de l'API, elle fait l'intermÃ©diaire entre la couche de prÃ©sentation et la couche de donnÃ©es ;\"), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"couche de donnÃ©es\"), \" : cette couche s'occupe des accÃ¨s aux donnÃ©es et permet notamment la persistance des ressources au sein de bases de donnÃ©es.\", React.createElement(_components.br), \"\\n\", \"Le modÃ¨le trois tiers est fort intÃ©ressant, mais il demande un peu trop d'Ã©criture de codes sans grande valeur ajoutÃ©e quand nous utilisons le framework Express.\"), \"\\n\"), \"\\n\"), \"\\n\", React.createElement(_components.li, null, \"...\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"Finalement, parmi les architectures classiques, il n'y a pas rÃ©ellement une architecture qui colle parfaitement Ã  ce qui est offert par le framework Express, sans devoir Ã©crire du code sans valeur ajoutÃ©e.\"), \"\\n\", React.createElement(_components.p, null, \"Ainsi, nous allons simplement crÃ©er notre propre architecture \\\"maison\\\", sur base de ces points :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"On souhaite pouvoir \", React.createElement(_components.strong, null, \"facilement remplacer la couche d'accÃ¨s aux donnÃ©es sans changer la reprÃ©sentation des ressources\"), \" ; en effet, dans un premier temps, nous sauvegarderons des donnÃ©es dans des fichiers JSON. Plus tard, si l'on venait Ã  sauvegarder les donnÃ©es dans un systÃ¨me de gestion de base de donnÃ©es, on ne veut pas devoir mettre Ã  jour le code prenant en compte les requÃªtes des clients et prÃ©sentant la rÃ©ponse Ã  ces requÃªtes ; en gros, on souhaite que le code de nos routers, au sein d'Express, soit indÃ©pendant de l'implÃ©mentation des accÃ¨s aux donnÃ©es.\"), \"\\n\", React.createElement(_components.li, null, \"Nous n'avons pas vraiment de contraintes pour l'aspect \\\"business\\\" de nos APIs : la logique de l'application peut soit s'associer Ã  la couche de donnÃ©es, soit Ã  la couche prÃ©sentation. NÃ©anmoins, nous allons prÃ©fÃ©rer \", React.createElement(_components.strong, null, \"associer un maximum de la logique de notre application\"), \" Ã  ce que nous allons appeler un \", React.createElement(_components.strong, null, \"service\"), \". Le \", React.createElement(_components.strong, null, \"service\"), \" contiendra toutes les \", React.createElement(_components.strong, null, \"opÃ©rations possibles sur les ressources\"), \", ainsi que les \", React.createElement(_components.strong, null, \"accÃ¨s aux donnÃ©es\"), \".\"), \"\\n\", React.createElement(_components.li, null, \"Le \", React.createElement(_components.strong, null, \"service\"), \" peut Ãªtre soit Ã©crit en orientÃ© objet, soit simplement Ãªtre un module fournissant des fonctions. Dans le cadre de ce cours, nous choisissons de prÃ©senter un maximum de programmation fonctionnelle plutÃ´t que de l'orientÃ© objet.\", React.createElement(_components.br), \"\\n\", \"NÃ©anmoins, n'hÃ©sitez pas Ã  Ã©crire des classes si cela vous tient Ã  coeur ðŸ˜‰.\"), \"\\n\"), \"\\n\", React.createElement(_components.h1, null, React.createElement(InternalPageTitle, null, \" Architecture Express & services \")), \"\\n\", React.createElement(_components.p, null, \"Dans un nouveau tutoriel, nous allons maintenant faire un refactor de notre API de gestion des pizzas en crÃ©ant et utilisant un service.\"), \"\\n\", React.createElement(_components.p, null, \"Veuillez crÃ©er un nouveau projet \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"/tutorials/back/api/services\")), \" sur base d'un copier/coller de votre rÃ©pertoire \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"/tutorials/back/api/persistence\")), \".\"), \"\\n\", React.createElement(_components.p, null, \"En cas de souci, vous pouvez tÃ©lÃ©charger le code du tutoriel prÃ©cÃ©dent ici : \", React.createElement(_components.a, {\n    href: \"https://github.com/e-vinci/ts-demos/tree/main/back/api/persistence\"\n  }, \"persistence\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"Nous allons commencer par crÃ©er le \", React.createElement(_components.strong, null, \"service\"), \" offrant les opÃ©rations sur les boissons.\", React.createElement(_components.br), \"\\n\", \"Veuillez crÃ©er le fichier \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"/services/drinks.ts\")), \".\", React.createElement(_components.br), \"\\n\", \"Au sein de ce fichier, veuillez ajouter le code s'occupant des opÃ©rations sur les ressources de type \\\"drinks\\\" :\"), \"\\n\", React.createElement(_components.pre, {\n    numbered: true\n  }, React.createElement(_components.code, {\n    className: \"language-ts\"\n  }, \"import path from \\\"node:path\\\";\\nimport { Drink, NewDrink } from \\\"../types\\\";\\nimport { parse, serialize } from \\\"../utils/json\\\";\\nconst jsonDbPath = path.join(__dirname, \\\"/../data/drinks.json\\\");\\n\\nconst defaultDrinks: Drink[] = [\\n  {\\n    id: 1,\\n    title: \\\"Coca-Cola\\\",\\n    image:\\n      \\\"https://media.istockphoto.com/id/1289738725/fr/photo/bouteille-en-plastique-de-coke-avec-la-conception-et-le-chapeau-rouges-d%C3%A9tiquette.jpg?s=1024x1024&w=is&k=20&c=HBWfROrGDTIgD6fuvTlUq6SrwWqIC35-gceDSJ8TTP8=\\\",\\n    volume: 0.33,\\n    price: 2.5,\\n  },\\n  {\\n    id: 2,\\n    title: \\\"Pepsi\\\",\\n    image:\\n      \\\"https://media.istockphoto.com/id/185268840/fr/photo/bouteille-de-cola-sur-un-fond-blanc.jpg?s=1024x1024&w=is&k=20&c=xdsxwb4bLjzuQbkT_XvVLyBZyW36GD97T1PCW0MZ4vg=\\\",\\n    volume: 0.33,\\n    price: 2.5,\\n  },\\n  {\\n    id: 3,\\n    title: \\\"Eau MinÃ©rale\\\",\\n    image:\\n      \\\"https://media.istockphoto.com/id/1397515626/fr/photo/verre-deau-gazeuse-%C3%A0-boire-isol%C3%A9.jpg?s=1024x1024&w=is&k=20&c=iEjq6OL86Li4eDG5YGO59d1O3Ga1iMVc_Kj5oeIfAqk=\\\",\\n    volume: 0.5,\\n    price: 1.5,\\n  },\\n  {\\n    id: 4,\\n    title: \\\"Jus d'Orange\\\",\\n    image:\\n      \\\"https://images.unsplash.com/photo-1600271886742-f049cd451bba?q=80&w=1374&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D\\\",\\n    volume: 0.25,\\n    price: 4.5,\\n  },\\n  {\\n    id: 5,\\n    title: \\\"Limonade\\\",\\n    image:\\n      \\\"https://images.unsplash.com/photo-1583064313642-a7c149480c7e?q=80&w=1430&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D\\\",\\n    volume: 0.33,\\n    price: 5,\\n  },\\n];\\n\\nfunction readAllDrinks(budgetMax: number): Drink[] {\\n  const drinks = parse(jsonDbPath, defaultDrinks);\\n  if (!budgetMax) {\\n    return drinks;\\n  }\\n\\n  const budgetMaxNumber = Number(budgetMax);\\n\\n  const filteredDrinks = drinks.filter((drink) => {\\n    return drink.price <= budgetMaxNumber;\\n  });\\n  return filteredDrinks;\\n}\\n\\nfunction readOneDrink(id: number): Drink | undefined {\\n  const drinks = parse(jsonDbPath, defaultDrinks);\\n  const drink = drinks.find((drink) => drink.id === id);\\n  if (!drink) {\\n    return undefined;\\n  }\\n  return drink;\\n}\\n\\nfunction createOneDrink(newDrink: NewDrink): Drink {\\n  const drinks = parse(jsonDbPath, defaultDrinks);\\n\\n  const nextId =\\n    drinks.reduce((maxId, drink) => (drink.id > maxId ? drink.id : maxId), 0) +\\n    1;\\n\\n  const createdDrink = {\\n    id: nextId,\\n    ...newDrink,\\n  };\\n\\n  drinks.push(createdDrink);\\n  serialize(jsonDbPath, drinks);\\n\\n  return createdDrink;\\n}\\n\\nfunction deleteOneDrink(drinkId: number): Drink | undefined {\\n  const drinks = parse(jsonDbPath, defaultDrinks);\\n  const index = drinks.findIndex((drink) => drink.id === drinkId);\\n  if (index === -1) {\\n    return undefined;\\n  }\\n\\n  const deletedElements = drinks.splice(index, 1);\\n  serialize(jsonDbPath, drinks);\\n  return deletedElements[0];\\n}\\n\\nfunction updateOneDrink(\\n  drinkId: number,\\n  newDrink: Partial<NewDrink>\\n): Drink | undefined {\\n  const drinks = parse(jsonDbPath, defaultDrinks);\\n  const drink = drinks.find((drink) => drink.id === drinkId);\\n  if (!drink) {\\n    return undefined;\\n  }\\n\\n  if (newDrink.title !== undefined) {\\n    drink.title = newDrink.title!; // the router already checks for the presence of title\\n  }\\n  if (newDrink.image !== undefined) {\\n    drink.image = newDrink.image!;\\n  }\\n  if (newDrink.volume !== undefined) {\\n    drink.volume = newDrink.volume!;\\n  }\\n  if (newDrink.price !== undefined) {\\n    drink.price = newDrink.price!;\\n  }\\n\\n  serialize(jsonDbPath, drinks);\\n  return drink;\\n}\\n\\nexport {\\n  readAllDrinks,\\n  readOneDrink,\\n  createOneDrink,\\n  deleteOneDrink,\\n  updateOneDrink,\\n};\\n\")), \"\\n\", React.createElement(_components.p, null, \"Maintenant, nous allons mettre Ã  jour le router \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"/routes/drinks.ts\")), \" afin de faire les appels aux fonctions offertes par le modÃ¨le :\"), \"\\n\", React.createElement(_components.pre, {\n    numbered: true\n  }, React.createElement(_components.code, {\n    className: \"language-ts\"\n  }, \"import { Router } from \\\"express\\\";\\nimport { NewDrink } from \\\"../types\\\";\\nimport {\\n  createOneDrink,\\n  deleteOneDrink,\\n  readAllDrinks,\\n  readOneDrink,\\n  updateOneDrink,\\n} from \\\"../services/drinks\\\";\\n\\nconst router = Router();\\n\\nrouter.get(\\\"/\\\", (req, res) => {\\n  const budgetMax = Number(req.query[\\\"budget-max\\\"]);\\n  const drinks = readAllDrinks(budgetMax);\\n  return res.json(drinks);\\n});\\n\\nrouter.get(\\\"/:id\\\", (req, res) => {\\n  const id = Number(req.params.id);\\n  const drink = readOneDrink(id);\\n  if (!drink) {\\n    return res.sendStatus(404);\\n  }\\n  return res.json(drink);\\n});\\n\\nrouter.post(\\\"/\\\", (req, res) => {\\n  const body: unknown = req.body;\\n  if (\\n    !body ||\\n    typeof body !== \\\"object\\\" ||\\n    !(\\\"title\\\" in body) ||\\n    !(\\\"image\\\" in body) ||\\n    !(\\\"volume\\\" in body) ||\\n    !(\\\"price\\\" in body) ||\\n    typeof body.title !== \\\"string\\\" ||\\n    typeof body.image !== \\\"string\\\" ||\\n    typeof body.volume !== \\\"number\\\" ||\\n    typeof body.price !== \\\"number\\\" ||\\n    !body.title.trim() ||\\n    !body.image.trim() ||\\n    body.volume <= 0 ||\\n    body.price <= 0\\n  ) {\\n    return res.sendStatus(400);\\n  }\\n\\n  const { title, image, volume, price } = body as NewDrink;\\n\\n  const newDrink = createOneDrink({ title, image, volume, price });\\n  return res.json(newDrink);\\n});\\n\\nrouter.delete(\\\"/:id\\\", (req, res) => {\\n  const id = Number(req.params.id);\\n  const deletedDrink = deleteOneDrink(id);\\n  if (!deletedDrink) {\\n    return res.sendStatus(404);\\n  }\\n  return res.json(deletedDrink);\\n});\\n\\nrouter.patch(\\\"/:id\\\", (req, res) => {\\n  const id = Number(req.params.id);\\n\\n  const body: unknown = req.body;\\n\\n  if (\\n    !body ||\\n    typeof body !== \\\"object\\\" ||\\n    (\\\"title\\\" in body &&\\n      (typeof body.title !== \\\"string\\\" || !body.title.trim())) ||\\n    (\\\"image\\\" in body &&\\n      (typeof body.image !== \\\"string\\\" || !body.image.trim())) ||\\n    (\\\"volume\\\" in body &&\\n      (typeof body.volume !== \\\"number\\\" || body.volume <= 0)) ||\\n    (\\\"price\\\" in body && (typeof body.price !== \\\"number\\\" || body.price <= 0))\\n  ) {\\n    return res.sendStatus(400);\\n  }\\n\\n  const { title, image, volume, price }: Partial<NewDrink> = body;\\n\\n  const updatedDrink = updateOneDrink(id, { title, image, volume, price });\\n\\n  if (!updatedDrink) {\\n    return res.sendStatus(404);\\n  }\\n\\n  return res.json(updatedDrink);\\n});\\n\\nexport default router;\\n\")), \"\\n\", React.createElement(_components.p, null, \"Lancer votre API soit via le debugger, soit via la commande \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"npm run dev\")), \".\", React.createElement(_components.br), \"\\n\", \"Veuillez ensuite tester que les opÃ©rations sur les boissons fonctionnent bien en exÃ©cutant les requÃªtes HTTP dÃ©jÃ  prÃ©sentes dans le rÃ©pertoire \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"REST Client\")), \" du boilerplate.\"), \"\\n\", React.createElement(_components.p, null, \"Maintenant, nous allons aussi mettre Ã  jour l'architecture pour traiter des ressources de type \\\"pizzas\\\". Veuillez crÃ©er un fichier \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"/services/pizzas.ts\")), \" :\"), \"\\n\", React.createElement(_components.pre, {\n    numbered: true\n  }, React.createElement(_components.code, {\n    className: \"language-ts\"\n  }, \"// Create the pizzas service based on the drinks.ts service\\nimport path from \\\"node:path\\\";\\nimport { Pizza, NewPizza } from \\\"../types\\\";\\nimport { parse, serialize } from \\\"../utils/json\\\";\\nconst jsonDbPath = path.join(__dirname, \\\"/../data/pizzas.json\\\");\\n\\nconst defaultPizzas: Pizza[] = [\\n  {\\n    id: 1,\\n    title: \\\"4 fromages\\\",\\n    content: \\\"GruyÃ¨re, SÃ©rac, Appenzel, Gorgonzola, Tomates\\\",\\n  },\\n  {\\n    id: 2,\\n    title: \\\"Vegan\\\",\\n    content: \\\"Tomates, Courgettes, Oignons, Aubergines, Poivrons\\\",\\n  },\\n  {\\n    id: 3,\\n    title: \\\"Vegetarian\\\",\\n    content: \\\"Mozarella, Tomates, Oignons, Poivrons, Champignons, Olives\\\",\\n  },\\n  {\\n    id: 4,\\n    title: \\\"Alpage\\\",\\n    content: \\\"GruyÃ¨re, Mozarella, Lardons, Tomates\\\",\\n  },\\n  {\\n    id: 5,\\n    title: \\\"Diable\\\",\\n    content: \\\"Tomates, Mozarella, Chorizo piquant, Jalapenos\\\",\\n  },\\n];\\n\\nfunction readAllPizzas(order: string | undefined): Pizza[] {\\n  const orderByTitle = order && order.includes(\\\"title\\\") ? order : undefined;\\n\\n  let orderedMenu: Pizza[] = [];\\n  const pizzas = parse(jsonDbPath, defaultPizzas);\\n  if (orderByTitle)\\n    orderedMenu = [...pizzas].sort((a, b) => a.title.localeCompare(b.title));\\n\\n  if (orderByTitle === \\\"-title\\\") orderedMenu = orderedMenu.reverse();\\n\\n  return orderedMenu.length === 0 ? pizzas : orderedMenu;\\n}\\n\\nfunction readPizzaById(id: number): Pizza | undefined {\\n  const pizzas = parse(jsonDbPath, defaultPizzas);\\n  return pizzas.find((pizza) => pizza.id === id);\\n}\\n\\nfunction createPizza(newPizza: NewPizza): Pizza {\\n  const pizzas = parse(jsonDbPath, defaultPizzas);\\n  const lastId = pizzas[pizzas.length - 1].id;\\n  const pizza: Pizza = { id: lastId + 1, ...newPizza };\\n  const updatedPizzas = [...pizzas, pizza];\\n  serialize(jsonDbPath, updatedPizzas);\\n  return pizza;\\n}\\n\\nfunction deletePizza(id: number): Pizza | undefined {\\n  const pizzas = parse(jsonDbPath, defaultPizzas);\\n  const index = pizzas.findIndex((pizza) => pizza.id === id);\\n  if (index === -1) return undefined;\\n\\n  const deletedElements = pizzas.splice(index, 1);\\n  serialize(jsonDbPath, pizzas);\\n  return deletedElements[0];\\n}\\n\\nfunction updatePizza(\\n  id: number,\\n  updatedPizza: Partial<NewPizza>\\n): Pizza | undefined {\\n  const pizzas = parse(jsonDbPath, defaultPizzas);\\n  const pizza = pizzas.find((pizza) => pizza.id === id);\\n  if (!pizza) return undefined;\\n\\n  if (updatedPizza.title !== undefined) {\\n    pizza.title = updatedPizza.title;\\n  }\\n  if (updatedPizza.content !== undefined) {\\n    pizza.content = updatedPizza.content;\\n  }\\n\\n  serialize(jsonDbPath, pizzas);\\n  return pizza;\\n}\\n\\nexport { readAllPizzas, readPizzaById, createPizza, deletePizza, updatePizza };\\n\")), \"\\n\", React.createElement(_components.p, null, \"Et le router \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"/routes/pizzas.ts\")), \" doit aussi Ãªtre mis Ã  jour :\"), \"\\n\", React.createElement(_components.pre, {\n    numbered: true\n  }, React.createElement(_components.code, {\n    className: \"language-ts\"\n  }, \"import { Router } from \\\"express\\\";\\n\\nimport { NewPizza, PizzaToUpdate } from \\\"../types\\\";\\nimport {\\n  createPizza,\\n  deletePizza,\\n  readAllPizzas,\\n  readPizzaById,\\n  updatePizza,\\n} from \\\"../services/pizzas\\\";\\n\\nconst router = Router();\\n\\nrouter.get(\\\"/error\\\", (_req, _res, _next) => {\\n  throw new Error(\\\"This is an error\\\");\\n  // equivalent of next(new Error(\\\"This is an error\\\"));\\n});\\n\\n/* Read all the pizzas from the menu\\n   GET /pizzas?order=title : ascending order by title\\n   GET /pizzas?order=-title : descending order by title\\n*/\\nrouter.get(\\\"/\\\", (req, res) => {\\n  if (req.query.order && typeof req.query.order !== \\\"string\\\") {\\n    return res.sendStatus(400);\\n  }\\n\\n  const pizzas = readAllPizzas(req.query.order);\\n  return res.json(pizzas);\\n});\\n\\n// Read the pizza identified by an id in the menu\\nrouter.get(\\\"/:id\\\", (req, res) => {\\n  const id = Number(req.params.id);\\n  const pizza = readPizzaById(id);\\n  if (!pizza) return res.sendStatus(404);\\n  return res.json(pizza);\\n});\\n\\n// Create a pizza to be added to the menu.\\nrouter.post(\\\"/\\\", (req, res) => {\\n  const body: unknown = req.body;\\n  if (\\n    !body ||\\n    typeof body !== \\\"object\\\" ||\\n    !(\\\"title\\\" in body) ||\\n    !(\\\"content\\\" in body) ||\\n    typeof body.title !== \\\"string\\\" ||\\n    typeof body.content !== \\\"string\\\" ||\\n    !body.title.trim() ||\\n    !body.content.trim()\\n  ) {\\n    return res.sendStatus(400);\\n  }\\n\\n  const { title, content } = body as NewPizza;\\n\\n  const addedPizza = createPizza({ title, content });\\n\\n  return res.json(addedPizza);\\n});\\n\\n// Delete a pizza from the menu based on its id\\nrouter.delete(\\\"/:id\\\", (req, res) => {\\n  const id = Number(req.params.id);\\n  const deletedPizza = deletePizza(id);\\n  if (!deletedPizza) return res.sendStatus(404);\\n\\n  return res.json(deletedPizza);\\n});\\n\\n// Update a pizza based on its id and new values for its parameters\\nrouter.patch(\\\"/:id\\\", (req, res) => {\\n  const body: unknown = req.body;\\n  if (\\n    !body ||\\n    typeof body !== \\\"object\\\" ||\\n    (\\\"title\\\" in body &&\\n      (typeof body.title !== \\\"string\\\" || !body.title.trim())) ||\\n    (\\\"content\\\" in body &&\\n      (typeof body.content !== \\\"string\\\" || !body.content.trim()))\\n  ) {\\n    return res.sendStatus(400);\\n  }\\n\\n  const pizzaToUpdate: PizzaToUpdate = body;\\n\\n  const id = Number(req.params.id);\\n  const updatedPizza = updatePizza(id, pizzaToUpdate);\\n  if (!updatedPizza) return res.sendStatus(404);\\n\\n  return res.json(updatedPizza);\\n});\\n\\nexport default router;\\n\")), \"\\n\", React.createElement(_components.p, null, \"Lancer votre API soit via le debugger, soit via la commande \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"npm run dev\")), \".\", React.createElement(_components.br), \"\\n\", \"Veuillez ensuite tester que tout fonctionne bien en exÃ©cutant quelques requÃªtes HTTP associÃ©es aux pizzas et dÃ©jÃ  prÃ©sentes dans le rÃ©pertoire \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"REST Client\")), \" du boilerplate.\"), \"\\n\", React.createElement(_components.p, null, \"En cas de souci, vous pouvez accÃ©der au code du tutoriel ici :\\n\", React.createElement(_components.a, {\n    href: \"https://github.com/e-vinci/js-demos/tree/main/back/api/services\"\n  }, \"services\"), \".\"), \"\\n\", React.createElement(_components.h1, null, React.createElement(InternalPageTitle, null, \" Exercice 1.8 : Refactoring Ã  l'aide d'un service \")), \"\\n\", React.createElement(_components.p, null, \"Vous allez faire un nouveau refactor de la RESTful API de \", React.createElement(_components.strong, null, \"myMovies\"), \", afin de restructurer l'application selon l'architecture recommandÃ©e, en utilisant un service pour gÃ©rer les opÃ©rations sur les films.\"), \"\\n\", React.createElement(_components.p, null, \"Veuillez repartir du code de la solution de votre \", React.createElement(_components.a, {\n    href: \"../json/#exercice_1_7_persistance_des_donnees\"\n  }, \"Exercice 1.7\"), \".\", React.createElement(_components.br), \"\\n\", \"Le code de votre application doit se trouver dans votre repo git dans \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"/exercises/1.8\")), \".\"), \"\\n\", React.createElement(_components.p, null, \"Veuillez faire un refactor de votre API gÃ©rant les films afin que tout ce qui traite des opÃ©rations sur les ressources soit fait au sein du service \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"/services/films.ts\")), \".\"), \"\\n\", React.createElement(_components.p, null, \"Veuillez tester que votre API fonctionne toujours aussi bien aprÃ¨s le refactoring.\"), \"\\n\", React.createElement(_components.p, null, \"Veuillez faire un \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"commit\")), \" de votre code avec le message suivant : \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"new: ex1.8\")), \".\"), \"\\n\", React.createElement(_components.h1, null, React.createElement(InternalPageTitle, null, \" Exercice 1.9 : Encore un service \")), \"\\n\", React.createElement(_components.p, null, \"Vous allez crÃ©er une nouvelle API mettant Ã  disposition des opÃ©rations CRUD (\", React.createElement(_components.strong, null, \"C\"), \"reate, \", React.createElement(_components.strong, null, \"R\"), \"ead, \", React.createElement(_components.strong, null, \"U\"), \"pdate & \", React.createElement(_components.strong, null, \"D\"), \"elete) sur des ressources de type \\\"texte Ã  dactylographier\\\".\"), \"\\n\", React.createElement(_components.p, null, \"Vous devez appliquer les outils de dÃ©veloppement et l'architecture recommandÃ©e dans ce cours-ci en mettant en place un service.\"), \"\\n\", React.createElement(_components.p, null, \"Pour ce faire, veuillez crÃ©er un nouveau projet dans votre repo git dans \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"/exercises/1.9\")), \" sur base du boilerplate \", React.createElement(_components.a, {\n    href: \"https://github.com/e-vinci/basic-ts-api-boilerplate\"\n  }, \"basic-ts-api-boilerplate\"), \" ou sur base de votre exercice prÃ©cÃ©dent (\", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"/exercises/1.8\")), \").\"), \"\\n\", React.createElement(_components.p, null, \"âš¡ Si vous avez fait un clone du boilerplate, attention au Git dans le Git, n'oubliez pas de supprimer le dossier \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \".git\")), \" prÃ©sent dans votre nouveau projet.\"), \"\\n\", React.createElement(_components.p, null, \"Un texte Ã  dactylographier contient comme propriÃ©tÃ©s :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, React.createElement(_components.code, null, \"id\")), \" : un uuid gÃ©nÃ©rÃ© via la librairie \", React.createElement(_components.a, {\n    href: \"https://www.npmjs.com/package/uuid\"\n  }, \"https://www.npmjs.com/package/uuid\"), \" ;\"), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, React.createElement(_components.code, null, \"content\")), \" : un contenu textuel ;\"), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, React.createElement(_components.code, null, \"level\")), \" : le niveau associÃ© au texte; les seules valeurs autorisÃ©es sont : \", React.createElement(_components.strong, null, \"easy\"), \", \", React.createElement(_components.strong, null, \"medium\"), \" et \", React.createElement(_components.strong, null, \"hard\"), \".\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"Voici le tableau formalisant toutes les opÃ©rations que vous devez implÃ©menter :\"), \"\\n\", React.createElement(_components.table, null, React.createElement(_components.thead, null, React.createElement(_components.tr, null, React.createElement(_components.th, null, \"URI\"), React.createElement(_components.th, null, \"MÃ©thode\"), React.createElement(_components.th, null, \"MÃ©thode\"))), React.createElement(_components.tbody, null, React.createElement(_components.tr, null, React.createElement(_components.td, null, React.createElement(_components.strong, null, React.createElement(_components.code, null, \"texts\"))), React.createElement(_components.td, null, \"GET\"), React.createElement(_components.td, null, \"READ ALL : Lire toutes les ressources de la collection\")), React.createElement(_components.tr, null, React.createElement(_components.td, null, React.createElement(_components.strong, null, React.createElement(_components.code, null, \"texts?level=value\"))), React.createElement(_components.td, null, \"GET\"), React.createElement(_components.td, null, \"READ ALL FILTERED : Lire toutes les ressources de la collection selon le filtre donnÃ©\")), React.createElement(_components.tr, null, React.createElement(_components.td, null, React.createElement(_components.strong, null, React.createElement(_components.code, null, \"texts/:id\"))), React.createElement(_components.td, null, \"GET\"), React.createElement(_components.td, null, \"READ ONE : Lire la ressource identifiÃ©e\")), React.createElement(_components.tr, null, React.createElement(_components.td, null, React.createElement(_components.strong, null, React.createElement(_components.code, null, \"texts\"))), React.createElement(_components.td, null, \"POST\"), React.createElement(_components.td, null, \"CREATE ONE : CrÃ©er une ressource basÃ©e sur les donnÃ©es de la requÃªte\")), React.createElement(_components.tr, null, React.createElement(_components.td, null, React.createElement(_components.strong, null, React.createElement(_components.code, null, \"texts/:id\"))), React.createElement(_components.td, null, \"DELETE\"), React.createElement(_components.td, null, \"DELETE ONE : Effacer la ressource identifiÃ©e\")), React.createElement(_components.tr, null, React.createElement(_components.td, null, React.createElement(_components.strong, null, React.createElement(_components.code, null, \"texts/:id\"))), React.createElement(_components.td, null, \"PUT\"), React.createElement(_components.td, null, \"UPDATE ONE : Remplacer l'entiÃ¨retÃ© de la ressource par les donnÃ©es de la requÃªte\")))), \"\\n\", React.createElement(\"br\"), \"\\n\", React.createElement(_components.p, null, \"Veuillez bien valider les valeurs des paramÃ¨tres. Notamment, une \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"level\")), \" doit Ãªtre compris dans les valeurs autorisÃ©es, sinon un code d'erreur appropriÃ© doit Ãªtre renvoyÃ©.\"), \"\\n\", React.createElement(_components.p, null, \"Veuillez tester toutes les mÃ©thodes offertes par votre application Ã  l'aide du client HTTP de REST Client.\"), \"\\n\", React.createElement(_components.h4, null, \"ðŸ¤ Tips\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"Pour utiliser la librairie \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"uuid\")), \", consultez la documentation en ligne : \", React.createElement(_components.a, {\n    href: \"https://www.npmjs.com/package/uuid\"\n  }, \"https://www.npmjs.com/package/uuid\")), \"\\n\", React.createElement(_components.li, null, \"Si vous avez oubliÃ© d'installer les dÃ©finitions de type pour \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"uuid\")), \", vous pouvez le faire via la commande \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"npm install --save-dev @types/uuid\")), \". Pour rappel, cela est expliquÃ© dans l'\", React.createElement(_components.a, {\n    href: \"../../part0/nodejs-app/#introduction_aux_packages_node_js_npm\"\n  }, \"Introduction aux packages Node.js & npm\"), \" (voir \\\"Installer un package\\\").\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"Veuillez faire un \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"commit\")), \" de votre code avec le message suivant : \", React.createElement(_components.strong, null, React.createElement(_components.code, null, \"new: ex1.9\")), \".\"));\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props)) : _createMdxContent(props);\n}\nexport default MDXContent;\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","import GATSBY_COMPILED_MDX from \"/Users/raphaelbaroni/code/web2/ts-repos/web2/src/mdx-pages/part1/refactoring.fr.mdx\";\nimport React from 'react';\nimport {graphql} from 'gatsby';\nimport {MDXProvider} from '@mdx-js/react';\nimport {Link} from 'gatsby';\nimport MainLayout from '../components/main-layout.js';\nimport Image from '../components/image.js';\nimport Section from '../components/section.js';\nimport Content from '../components/content.js';\nimport Background from '../components/background.js';\nimport SectionHeader from '../components/section-header.js';\nimport SectionFooter from '../components/section-footer.js';\nimport PageHeader from '../components/page-header.js';\nimport {withFrontmatter} from '../components/hoc/hoc.js';\nimport CodeBlock from '../components/codeblock/codeblock.js';\nimport LinkFile from '../components/file/link-file.js';\nimport ScrollableImage from '../components/image/scrollable-image';\nimport PublicProjectsView from '../components/public-projects/public-projects-view';\nimport {AuthenticatedTemplate, UnauthenticatedTemplate} from '@azure/msal-react';\nimport AuthenticatedBlock from '../components/auth/authenticated-block.js';\nimport UnAuthenticatedBlock from '../components/auth/unauthenticated-block.js';\nimport NestedMdxBlock from '../components/mdx/nested-mdx-block.js';\nimport YoutubeImage from '../components/image/youtube-image.js';\nimport InternalPageMenu from '../components/internal-page-menu/internal-page-menu.js';\nimport InternalPageMenuItem from '../components/internal-page-menu/internal-page-menu-item.js';\nimport InternalPageTitle from '../components/internal-page-menu/menu-title.js';\nimport {PathViewer, PathViewerItem} from '../components/path-viewer/path-viewer.js';\nimport DownloadGitFolder from '../components/download-git-folder-link/DownloadGitFolder.js';\nconst shortcodes = {\n  Link,\n  Image,\n  Section,\n  Content,\n  Background,\n  SectionHeader,\n  SectionFooter,\n  PageHeader,\n  CodeBlock,\n  LinkFile,\n  ScrollableImage,\n  PublicProjectsView,\n  AuthenticatedBlock,\n  UnAuthenticatedBlock,\n  NestedMdxBlock,\n  YoutubeImage,\n  InternalPageMenu,\n  InternalPageMenuItem,\n  InternalPageTitle,\n  PathViewer,\n  PathViewerItem,\n  DownloadGitFolder\n};\nfunction PageTemplate({data: {mdx, allImages}, children}) {\n  shortcodes.PageHeader = withFrontmatter(PageHeader, mdx?.frontmatter);\n  return React.createElement(MainLayout, Object.assign({}, mdx?.frontmatter ? {\n    frontmatter: mdx.frontmatter\n  } : {}, mdx?.frontmatter?.navbarExtraStyles ? {\n    navbarExtraStyles: mdx.frontmatter.navbarExtraStyles\n  } : {}, mdx?.frontmatter?.headerImage ? {\n    headerImage: mdx.frontmatter.headerImage\n  } : {}, mdx?.frontmatter?.featuredImage ? {\n    featuredImage: mdx.frontmatter.featuredImage\n  } : {}, mdx?.frontmatter?.title ? {\n    pageTitle: mdx.frontmatter.title\n  } : {}, allImages && allImages.length > 0 ? {\n    allImages: allImages\n  } : {}), React.createElement(MDXProvider, {\n    components: shortcodes\n  }, React.createElement(\"div\", {\n    className: mdx?.frontmatter?.autoMargin ? 'page page--auto-margin ' : 'page'\n  }, children)));\n}\nexport default function GatsbyMDXWrapper(props) {\n  return React.createElement(PageTemplate, props, React.createElement(GATSBY_COMPILED_MDX, props));\n}\nexport const pageQuery = graphql`\n  query pagesAndImages($slug: String) {\n    mdx(fields: { slug: { eq: $slug } }) {\n      id\n      body\n      fields {\n        slug\n      }\n\n      frontmatter {\n        title\n        date\n        navbarExtraStyles\n        headerImage\n        featuredImage\n        description\n        autoMargin\n      }\n    }\n    allImages: allFile(\n      filter: {\n        sourceInstanceName: { eq: \"images\" }\n        extension: { nin: [\"ico\", \"svg\"] }\n      }\n    ) {\n      edges {\n        node {\n          childImageSharp {\n            gatsbyImageData(\n              quality: 90\n              layout: FULL_WIDTH\n              placeholder: TRACED_SVG\n              tracedSVGOptions: { color: \"green\", background: \"grey\" }\n            )\n          }\n          base\n        }\n      }\n    }\n  }\n`;\n"],"names":["_createMdxContent","props","_components","Object","assign","h1","p","a","br","ul","li","strong","code","pre","table","thead","tr","th","tbody","td","h4","_provideComponents","components","InternalPageMenu","PathViewer","PathViewerItem","InternalPageMenuItem","YoutubeImage","InternalPageTitle","_missingMdxReference","React","to","selected","className","src","href","numbered","wrapper","MDXLayout","id","component","Error","shortcodes","Link","Image","Section","Content","Background","SectionHeader","SectionFooter","PageHeader","CodeBlock","LinkFile","ScrollableImage","PublicProjectsView","AuthenticatedBlock","UnAuthenticatedBlock","NestedMdxBlock","DownloadGitFolder","PageTemplate","_ref","_mdx$frontmatter","_mdx$frontmatter2","_mdx$frontmatter3","_mdx$frontmatter4","_mdx$frontmatter5","data","mdx","allImages","children","withFrontmatter","frontmatter","MainLayout","navbarExtraStyles","headerImage","featuredImage","title","pageTitle","length","MDXProvider","autoMargin","GatsbyMDXWrapper","GATSBY_COMPILED_MDX"],"sourceRoot":""}