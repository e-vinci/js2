"use strict";(self.webpackChunkmyjscourse=self.webpackChunkmyjscourse||[]).push([[7760],{9709:function(e,n,t){t.r(n),t.d(n,{default:function(){return R}});var l=t(3905),r=t(7294);function a(e){const n=Object.assign({h1:"h1",p:"p",strong:"strong",ul:"ul",li:"li",br:"br",code:"code",a:"a",pre:"pre",h4:"h4"},(0,l.ah)(),e.components),{PathViewer:t,PathViewerItem:a,InternalPageMenu:s,InternalPageMenuItem:u,InternalPageTitle:i,ScrollableImage:c}=n;return s||o("InternalPageMenu",!0),u||o("InternalPageMenuItem",!0),i||o("InternalPageTitle",!0),t||o("PathViewer",!0),a||o("PathViewerItem",!0),c||o("ScrollableImage",!0),r.createElement(r.Fragment,null,r.createElement(t,null,r.createElement(a,{to:"/"}," web2course "),r.createElement(a,{to:"/part2"}," Partie 2 "),r.createElement(a,{selected:!0}," k) S√©curit√© des communications du browser ")),"\n",r.createElement(n.h1,null,"k) S√©curit√© des communications du browser"),"\n",r.createElement(s,null,r.createElement(u,null," Single Origin Policy & CORS "),r.createElement(u,null," Autorisation d'origines & les CORS "),r.createElement(u,null," Simulation d'une m√™me origine via un proxy "),r.createElement(u,null," Exercice 2.12 : Int√©gration de la RESTful API au sein de l'IHM de myMovies via un proxy "),r.createElement(u,null," Exercice 2.13 : Autorisation de nouvelles origines via la RESTful API ")),"\n",r.createElement(n.h1,null,r.createElement(i,null," Single Origin Policy & CORS ")),"\n",r.createElement(n.p,null,"La ",r.createElement(n.strong,null,"Single Origin Policy")," (",r.createElement(n.strong,null,"SOP"),") sont des r√®gles appliqu√©es par le browser afin :"),"\n",r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"de restraindre les interactions entre un document ou script charg√© par une origine avec une ressource d'une autre origine ;"),"\n",r.createElement(n.li,null,"d'isoler des documents ou scripts malicieux, afin de r√©duire le risque des attaques."),"\n"),"\n",r.createElement(n.p,null,"Deux URL ont une m√™me ",r.createElement(n.strong,null,"origine")," si ces caract√©ristiques sont les m√™mes :"),"\n",r.createElement(n.ul,null,"\n",r.createElement(n.li,null,r.createElement(n.strong,null,"protocole")," ;"),"\n",r.createElement(n.li,null,r.createElement(n.strong,null,"port")," ;"),"\n",r.createElement(n.li,null,r.createElement(n.strong,null,"host")," ; l'URL pointe vers le m√™me appareil connect√© √† internet ou √† un r√©seau local"),"\n"),"\n",r.createElement(n.p,null,"Il est possible de relaxer la s√©curit√© via des ",r.createElement(n.strong,null,"Cross Origin Resource Sharing")," (",r.createElement(n.strong,null,"CORS"),").",r.createElement(n.br),"\n",r.createElement(n.strong,null,"CORS")," est un m√©canisme qui utilise des headers HTTP pour indiquer aux browsers qu'ils peuvent autoriser les acc√®s √† des ressources d'origines diff√©rentes."),"\n",r.createElement(n.p,null,"Cela signifie qu'une application web qui utilise une API ne peut le faire que si les ressources demand√©es √† l'API proviennent d'une m√™me origine, √† moins que la r√©ponse de l'API inclut les bonnes ",r.createElement(n.strong,null,"CORS")," (via des header HTTP)."),"\n",r.createElement(n.p,null,"Si l'on autorise trop d'origine, voici un exemple classique d'attaque :"),"\n",r.createElement(c,{name:"cors-issue.png",minWidth:"500px",maxWidth:"700px"}),"\n",r.createElement(n.p,null,"Imaginez qu'un site d'une banque ne soit pas s√©curis√© avec des techniques modernes. Ce site utiliserait une IHM (",r.createElement(n.code,null,"https://my-bank.com"),"), qui, via un formulaire, permettrait de faire un versement, sous r√©serve d'envoyer un cookie qui contiendrait une variable de session (simple m√©canisme de s√©curit√©) lors d'une requ√™te √† l'API de la banque."),"\n",r.createElement(n.p,null,"Maintenant, prenons le cas d'un utilisateur qui adore jouer sur le web, un gamer en puissance. Il joue √† un jeu de pinguins, mais soudainement, il est redirig√© vers un site malicieux (",r.createElement(n.code,null,"https://malicious.com"),"), qui lui offre un nouveau jeu avec des dinosaures. Ce site malicieux, en arri√®re plan, pourrait faire une requ√™te vers la m√™me API utilis√©e par ",r.createElement(n.code,null,"my-bank"),".",r.createElement(n.br),"\n","Comme c'est le m√™me browser utilis√© par notre gamer, tant pour faire ses virements, que pour jouer, toute requ√™te faite vers ",r.createElement(n.code,null,"https://api.my-bank.com")," enverra d'office les cookies existants et associ√©s au domaine ",r.createElement(n.code,null,"api.my-bank.com"),".\r\nLes r√©sultats peuvent √™tre dramatiques, l'attaquant peut faire des versements jusqu'√† vider le compte de notre pauvre gamer."),"\n",r.createElement(n.p,null,"Bien s√ªr, gr√¢ce √† la ",r.createElement(n.strong,null,"SOP")," appliqu√©e par nos browser, par d√©faut, d√®s que le site malicieux communique avec l'API de la banque, celui-ci bloque l'acc√®s aux ressources de l'API car l'origine du site malicieux est diff√©rente de l'origine de l'API."),"\n",r.createElement(n.p,null,"Les ",r.createElement(n.strong,null,"CORS")," permettent de rel√¢cher la s√©curit√©, afin notamment, dans le sc√©nario √©voqu√©, d'autoriser l'origine ",r.createElement(n.code,null,"https://my-bank.com")," √† acc√©der √† l'origine ",r.createElement(n.code,null,"https://api.my-bank.com"),". En effet, c'est ce que le site de la banque souhaite.",r.createElement(n.br),"\n","Par contre, si la banque poss√®de des d√©veloppeurs nuls au niveau s√©curit√© et que ceux-ci autorisent toutes les origines √† interroger l'API, l√†, nous pourrions arriver au hacking d√©crit ci-dessus."),"\n",r.createElement(n.p,null,"Attention √† ne pas confondre les attaques associ√©es √† une mauvaise gestion des ",r.createElement(n.strong,null,"CORS")," aux attaques ",r.createElement(n.strong,null,"XSS"),". Les attaques ",r.createElement(n.strong,null,"XSS"),", ou ",r.createElement(n.strong,null,"Cross-Site Scripting"),", sont un type d'injection de scripts malicieux dans une application web."),"\n",r.createElement(n.p,null,"Imaginez le forum web de la banque d√©crite pr√©c√©dente et ce sc√©nario :"),"\n",r.createElement(c,{name:"xss.png",minWidth:"500px",maxWidth:"700px"}),"\n",r.createElement(n.p,null,"L'API de la banque permet d'enregistrer des messages qui sont associ√©s √† des forums sur lesquels leurs clients peuvent poster des messages.",r.createElement(n.br),"\n","Si l'API de la banque √©tait mal s√©curis√©e et qu'elle permettait d'enregistrer n'importe quels types d'information en tant que \"messages\" du forum, il serait possible √† un attaquant d'injecter du JS malicieux dans l'API.",r.createElement(n.br),"\n","Plus tard, lors de l'affichage des messages par le forum de la banque (",r.createElement(n.code,null,"https://forum.my-bank.com "),"), le JS malicieux pourra s'ex√©cuter dans le browser de n'importe quel utilisateur, y-compris le gamer d√©crit ci-dessus !\r\nEt vous avez vu que via du JS, on peut envoyer de l'information n'importe o√π, notamment √† l'aide de ",r.createElement(n.strong,null,"fetch"),". Ce qui permettrait donc √† notre hacker, via son script malicieux, d'envoyer des cookies contenant des infos sensibles √† son API malicieuse, en vue de futures attaques encore plus malicieuses, comme notamment vider son compte en banque."),"\n",r.createElement(n.p,null,"La protection contre des attaques XSS se fait √† diff√©rents niveaux. Ca n'est pas l'objet de ce cours, mais nous verrons n√©anmoins, plus tard, certaines techniques pour √©viter les attaques XSS."),"\n",r.createElement(n.p,null,"Nous allons voir comment nous pouvons communiquer entre un frontend et une API fonctionnant sous deux origines diff√©rentes, √† l'aide de deux techniques diff√©rentes."),"\n",r.createElement(n.h1,null,r.createElement(i,null," Autorisation d'origines & les CORS ")),"\n",r.createElement(n.p,null,"A cette partie-ci, nous allons voir comment mettre √† jour une API afin que dans chaque r√©ponse faite √† un client, on ajoute un header permettant d'autoriser une ou plusieurs origines."),"\n",r.createElement(n.p,null,"Nous allons partir de la derni√®re version de la RESTful de pizzas."),"\n",r.createElement(n.p,null,"Au sein de votre repo ",r.createElement(n.strong,null,"web2"),", veuillez cr√©er le projet nomm√© ",r.createElement(n.strong,null,"/web2/tutorials/pizzeria/api/cors")," sur base d'un copi√© coll√© de ",r.createElement(n.strong,null,"/web2/tutorials/pizzeria/api/fat-model")," (ou ",r.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/backend-restful-api/restful-api-essentials/fat-model"},"fat-model"),")."),"\n",r.createElement(n.p,null,"Pour la suite du tutoriel, nous consid√©rons que tous les chemins absolus d√©marrent du r√©pertoire\r\n",r.createElement(n.strong,null,"/web2/tutorials/pizzeria/api/cors"),"."),"\n",r.createElement(n.p,null,"Dans ce projet, veuillez installer le package ",r.createElement(n.strong,null,"cors")," :"),"\n",r.createElement(n.pre,null,r.createElement(n.code,{className:"language-bash"},"npm i cors\n")),"\n",r.createElement(n.p,null,"Nous allons configurer les headers de la RESTful API √† l'aide du middleware ",r.createElement(n.strong,null,"cors")," offert par\r\nla librairie ",r.createElement(n.strong,null,"cors"),"."),"\n",r.createElement(n.p,null,"Pour configurer et utiliser les ",r.createElement(n.strong,null,"CORS"),", veuillez mettre √† jour le fichier ",r.createElement(n.strong,null,"/app.js")," :"),"\n",r.createElement(n.pre,{numbered:!0,highlighting:"4-8,21"},r.createElement(n.code,{className:"language-js"},"const express = require('express');\r\nconst cookieParser = require('cookie-parser');\r\nconst logger = require('morgan');\r\nconst cors = require('cors');\r\n\r\nconst corsOptions = {\r\n  origin: 'http://localhost:8080',\r\n};\r\n\r\nconst usersRouter = require('./routes/users');\r\nconst pizzaRouter = require('./routes/pizzas');\r\n\r\nconst app = express();\r\n\r\napp.use(logger('dev'));\r\napp.use(express.json());\r\napp.use(express.urlencoded({ extended: false }));\r\napp.use(cookieParser());\r\n\r\napp.use('/users', usersRouter);\r\napp.use('/pizzas', cors(corsOptions), pizzaRouter);\r\n\r\nmodule.exports = app;\n")),"\n",r.createElement(n.p,null,"Ici, nous pr√©cisons que l'API doit autoriser l'origine associ√©e au port sur lequel tourne\r\nle serveur de fichiers statiques de Webpack (",r.createElement(n.strong,null,"8080"),'). Notons que nous n\'avons pas rel√¢ch√© la s√©curit√© pour les ressources de type "users", la fonction middleware ',r.createElement(n.strong,null,"cors")," n'est pas appel√©e au niveau du router de pizza."),"\n",r.createElement(n.p,null,"Veuillez vous assurer que l'API ",r.createElement(n.strong,null,"fat-model")," est ferm√©e et veuillez d√©marrer votre nouvelle version de l'API (",r.createElement(n.strong,null,"api-cors"),")."),"\n",r.createElement(n.p,null,"Il vous reste √† vous assurer que votre frontend (",r.createElement(n.strong,null,"/web2/tutorials/pizzeria/hmi/basic-fetch"),") est lui aussi bien d√©marr√© et peut enfin r√©aliser son fetch impl√©ment√© dans ",r.createElement(n.strong,null,"HomePage.js"),"."),"\n",r.createElement(n.p,null,"Tout fonctionne correctement ?"),"\n",r.createElement(n.p,null,"Normalement oui, vous devriez avoir le site de la pizzeria qui affiche le menu des pizzas suite √† un appel √† l'API (api-cors)."),"\n",r.createElement(n.p,null,"Si tout fonctionne bien, faites un ",r.createElement(n.strong,null,"commit")," de votre repo (",r.createElement(n.strong,null,"web2"),') avec le message\r\n"',r.createElement(n.strong,null,"api-cors"),'".'),"\n",r.createElement(n.p,null,"En cas de souci, vous pouvez acc√©der au code du tutoriel ici :"),"\n",r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"pour l'API : ",r.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/backend-restful-api/restful-api-essentials/cors"},"api-cors"),"."),"\n",r.createElement(n.li,null,"pour le frontend :\r\n",r.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/frontend/frontend-essentials/basic-fetch"},"basic-fetch-no-proxy"),"."),"\n"),"\n",r.createElement(n.p,null,"üí≠ OK, √ßa fonctionne bien... Mais cela est possible seulement si nous sommes les propri√©taires de la RESTful API. Maintenant, que faire si une API tierce doit √™tre int√©gr√©e dans notre frontend ?",r.createElement(n.br),"\n","Imaginez que vous souhaitez int√©grer une op√©ration d'une API offerte par Google...",r.createElement(n.br),"\n",'Pensez-vous que vous pouvez leur donner un coup de t√©l√©phone et dire : "Google, peux-tu STP autoriser l\'origine associ√©e √† mon site web ?".'),"\n",r.createElement(n.p,null,"Il y a peu de chances...\r\nNous allons donc voir un autre moyen de contourner la ",r.createElement(n.strong,null,"SOP")," (Single Origin Policy) impos√©e par le browser."),"\n",r.createElement(n.h1,null,r.createElement(i,null," Simulation d'une m√™me origine via un proxy ")),"\n",r.createElement(n.p,null,"Il est possible de mettre en place un proxy au niveau du frontend afin de faire croire au browser que l'API et le frontend ont la m√™me origine."),"\n",r.createElement(n.p,null,"Ici, nous sommes dans la situation o√π nous ne souhaitons pas, ou nous n'avons pas les moyens, d'ajouter des origines au niveau de l'API."),"\n",r.createElement(n.p,null,"Pour le tutoriel, veuillez donc stopper l'ex√©cution de l'API nomm√©e ",r.createElement(n.strong,null,"api-cors"),"."),"\n",r.createElement(n.p,null,"Veuillez d√©marrer l'API pr√©c√©dente d√©velopp√©e au module 5 : ",r.createElement(n.strong,null,"/web2/tutorials/pizzeria/api/fat-model")," ou via le code de ce web repo si vous avez un souci : ",r.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/backend-restful-api/restful-api-essentials/fat-model"},"fat-model"),"."),"\n",r.createElement(n.p,null,"Il vous reste aussi √† vous assurer que votre frontend (",r.createElement(n.strong,null,"/web2/tutorials/pizzeria/hmi/basic-fetch"),") est lui aussi bien d√©marr√©. Il devrait toujours y avoir l'erreur associ√©es aux ",r.createElement(n.strong,null,"CORS")," donn√©e au sein de la console."),"\n",r.createElement(n.p,null,"Nous allons mettre en place un m√©canisme au niveau du frontend pour faire passer toutes les requ√™tes √† destination de l'API par un proxy ; le proxy aura la m√™me origine que le serveur de fichiers statiques ayant offert le frontend."),"\n",r.createElement(n.p,null,"Voici le workflow que nous allons appliquer √† notre site g√©rant la pizzeria :"),"\n",r.createElement(c,{name:"proxy.png",minWidth:"691px",maxWidth:"691px"}),"\n",r.createElement("figcaption",null,"Redirections des requ√™tes via un proxy"),"\n",r.createElement(n.p,null,"Gr√¢ce √† ce diagramme, on voit comment mettre √† jour le tutoriel pr√©c√©dent qui affichait une erreur au niveau des ",r.createElement(n.strong,null,"CORS")," : on va faire une requ√™te GET vers ",r.createElement(n.strong,null,"/api/pizzas")," et non plus vers ",r.createElement(n.strong,null,r.createElement(n.a,{href:"http://localhost:3000/pizzas"},"http://localhost:3000/pizzas")),"."),"\n",r.createElement(n.p,null,"Pour cela, nous avons besoin d'un proxy. Et bien √ßa tombe bien, le serveur de d√©veloppement de Webpack met √† disposition un proxy. Celui-ci est d'ailleurs configur√© ainsi dans le boilerplate (voir fichier ",r.createElement(n.strong,null,"./webpack.config.js"),") :"),"\n",r.createElement(n.pre,null,r.createElement(n.code,{className:"language-js"},"proxy: {\r\n      '/api': {\r\n        target: 'http://localhost:3000',\r\n        pathRewrite: { '^/api': '' },\r\n      },\r\n    },\n")),"\n",r.createElement(n.p,null,"Cela signifie qu'√† chaque fois qu'une requ√™te sera faite sur ",r.createElement(n.strong,null,"/api")," (on reste sur la m√™me origine que le serveur de fichiers statiques, ",r.createElement(n.strong,null,"8080")," tel que configur√© dans ",r.createElement(n.strong,null,"./webpack.config.js")," du boilerplate), celle-ci sera redirig√©e vers le port ",r.createElement(n.strong,null,"3000"),", le port de l'API.\r\nLe ",r.createElement(n.strong,null,"pathRewrite")," permet de ne pas reprendre ",r.createElement(n.strong,null,"/api")," dans l'URL de la redirection :\r\n",r.createElement(n.strong,null,"GET /api/pizzas")," devient ",r.createElement(n.strong,null,"GET ",r.createElement(n.a,{href:"http://localhost:3000/pizzas"},"http://localhost:3000/pizzas")),"."),"\n",r.createElement(n.p,null,"Dans le code du tutoriel en cours (",r.createElement(n.strong,null,"basic-fetch"),"), veuillez mettre √† jour l'URL au niveau du ",r.createElement(n.strong,null,"fetch")," dans ",r.createElement(n.strong,null,"HomePage.js")," :"),"\n",r.createElement(n.pre,{numbered:!0,highlighting:"4"},r.createElement(n.code,{className:"language-js"},"const HomePage = () => {\r\n  clearPage();\r\n\r\n  fetch('/api/pizzas')\r\n    .then((response) => {\r\n      if (!response.ok) throw new Error(`fetch error : ${response.status} : ${response.statusText}`);\r\n      return response.json();\r\n    })\r\n    .then((pizzas) => {\r\n      renderMenuFromString(pizzas);\r\n      attachOnMouseEventsToGoGreen();\r\n      renderDrinksFromNodes(DRINKS);\r\n    })\r\n    .catch((err) => {\r\n      console.error('HomePage::error: ', err);\r\n    });\r\n};\n")),"\n",r.createElement(n.p,null,"N'oubliez pas que votre API (",r.createElement(n.strong,null,"fat-model"),") doit √™tre ex√©cut√©e, tout comme votre frontend (",r.createElement(n.strong,null,"basic-fetch"),")."),"\n",r.createElement(n.p,null,"A ce stade-ci, l√† aussi, tout devrait fonctionner, le menu des pizzas est affich√© suite √† l'appel √† notre RESTful API ne relaxant pas la s√©curit√© !"),"\n",r.createElement(n.p,null,"Si tout fonctionne bien, faites un ",r.createElement(n.strong,null,"commit")," de votre repo (",r.createElement(n.strong,null,"web2"),') avec le message\r\n"',r.createElement(n.strong,null,"hmi-proxy"),'".'),"\n",r.createElement(n.p,null,"En cas de souci, vous pouvez utiliser le code du tutoriel :"),"\n",r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"pour le frontend : ",r.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/frontend/frontend-essentials/basic-fetch"},"basic-fetch"),"."),"\n",r.createElement(n.li,null,"pour l'API : ",r.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/backend-restful-api/restful-api-essentials/fat-model"},"fat-model"),"."),"\n"),"\n",r.createElement(n.p,null,"üç¨ Voici quelques infos non capitales pour ce cours-ci :"),"\n",r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"Il existe une multitude de proxy pour un environnement de d√©veloppement : ",r.createElement(n.strong,null,"Webpack devServer")," et son proxy, ",r.createElement(n.strong,null,"VS Code proxy"),", proxy l√©ger de ",r.createElement(n.strong,null,"Node")," directement configurable via ",r.createElement(n.strong,null,"package.json")," (",r.createElement(n.code,null,'"proxy": "http://localhost:3000",'),"), ..."),"\n",r.createElement(n.li,null,"Il existe par exemple un proxy complet sous Node : ",r.createElement(n.strong,null,"http-proxy-middleware"),"."),"\n",r.createElement(n.li,null,"Pour la production, lorsque vous d√©ployer une application web sur le cloud, il faudra trouver les instructions de votre provider pour voir comment configurer le proxy.",r.createElement(n.br),"\n","Par exemple, pour configurer un ",r.createElement(n.strong,null,"static file server")," et son ",r.createElement(n.strong,null,"proxy")," sous ",r.createElement(n.strong,null,"heroku")," (provider de services d'h√©bergements sur le cloud), il faut configurer le fichier ",r.createElement(n.strong,null,"/static.json"),"."),"\n"),"\n",r.createElement(n.p,null,"üí≠ Que pensez-vous du code associ√© aux t√¢ches asynchrones, afin de cha√Æner des actions suite au ",r.createElement(n.strong,null,"fetch")," ?",r.createElement(n.br),"\n","Ca n'est pas des plus lisibles... imaginez que vous avez des tonnes de ",r.createElement(n.strong,null,".then()"),", dans lesquels vous allez aussi faire appel √† des fonctions asynchrones... Ca deviendra vite compliqu√© comme code."),"\n",r.createElement(n.p,null,"Nous allons donc voir comment rendre la programmation asynchrone plus l√©g√®re, √† l'aide de promesses et de ",r.createElement(n.strong,null,"async")," / ",r.createElement(n.strong,null,"await"),"."),"\n",r.createElement(n.h1,null,r.createElement(i,null," Exercice 2.12 : Int√©gration de la RESTful API au sein de l'IHM de myMovies via un proxy ")),"\n",r.createElement(n.p,null,"Vous allez int√©grer le frontend de ",r.createElement(n.strong,null,"myMovies")," r√©alis√© au module 3 (Exercice 3.1) avec la RESTful API d√©velopp√©e au module 5 (Exercice 5.2)."),"\n",r.createElement(n.p,null,"L'application ",r.createElement(n.strong,null,"myMovies")," doit permettre ces nouveaux cas d'utilisation (ou use cases):"),"\n",r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"UC1 : l'affichage, sous forme de tableau, de toutes les ressources de type films."),"\n",r.createElement(n.li,null,"UC2 : l'ajout d'une ressource de type films via un formulaire d'ajout d'un film."),"\n",r.createElement(n.li,null,"UC3 : la suppression d'un film."),"\n",r.createElement(n.li,null,"UC4 : la mise √† jour des donn√©es d'un film (√† l'exception de l'id associ√© √† un film)."),"\n"),"\n",r.createElement(n.p,null,"Nous acceptons, √† ce stade-ci, que des utilisateurs anonymes puissent r√©aliser des op√©rations qui normalement devraient √™tre s√©curis√©es. Nous verrons au module prochain comment authentifier et autoriser des utilisateurs afin de prot√©ger l'acc√®s aux op√©rations d'API."),"\n",r.createElement(n.p,null,"Afin de r√©aliser cet exercice, voici les contraintes d'impl√©mentation :"),"\n",r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"Ex√©cutez votre API se trouvant dans ",r.createElement(n.strong,null,"/exercises/module5/5.2"),"."),"\n",r.createElement(n.li,null,"Utilisez le contenu de votre r√©pertoire d'exercices ",r.createElement(n.strong,null,"/exercises/module3/myMovies")," comme point de d√©part pour cr√©er,dans votre repository local et\r\nvotre web repository (normalement appel√© ",r.createElement(n.strong,null,"web2"),"), le r√©pertoire nomm√©\r\n",r.createElement(n.strong,null,"/exercises/module6/6.2"),"."),"\n",r.createElement(n.li,null,"Veuillez utiliser le proxy de votre frontend afin de contourner les probl√®mes associ√© √† la gestion des CORS."),"\n",r.createElement(n.li,null,"Veuillez d√©velopper de mani√®re incr√©mentale votre IHM, use case par use case, en v√©rifiant le bon fonctionnement de chaque cas d'utilisation avant de passer au d√©veloppement de l'UC suivant (=> d√©velopper UC1, puis UC2, puis UC3, puis UC4)."),"\n"),"\n",r.createElement(n.h4,null,"ü§ù Tips"),"\n",r.createElement(n.p,null,"Cet exercice de consommation d'une API consiste simplement en la mise-√†-jour du frontend ",r.createElement(n.strong,null,"myMovies")," r√©alis√© au module 3 (Exercice 3.1) : vous devriez cr√©er de nouvelles pages et ajouter des op√©rations de type ",r.createElement(n.strong,null,"fetch")," vers votre RESTful API d√©velopp√©e au module 5 (Exercice 5.2). Il n'y a normalement rien √† faire au niveau de la RESTFul API, si ce n'est de l'ex√©cuter."),"\n",r.createElement(n.p,null,"‚ö° Lors de l'ajout d'un film, n'oubliez pas que le budget et la dur√©e doivent √™tre des nombres, pas des strings !"),"\n",r.createElement(n.p,null,"Comment g√©rer l'UC de suppression d'un film ?"),"\n",r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"Vous pourriez avoir un bouton ",r.createElement(n.strong,null,"Delete")," pour chaque ligne du tableau affichant les films. Lors du clic sur un bouton ",r.createElement(n.strong,null,"Delete"),", vous feriez une requ√™te de type ",r.createElement(n.strong,null,"DELETE")," vers la RESTful API. Attention, pour une requ√™te de type ",r.createElement(n.strong,null,"DELETE"),", l'identifiant de l'objet √† supprimer doit √™tre donn√©e dans l'URL associ√©e au ",r.createElement(n.strong,null,"fetch"),"."),"\n",r.createElement(n.li,null,"Comment retrouver l'identifiant du film affich√© dans le tableau ?\r\nPensez au ",r.createElement(n.strong,null,"data-attribute"),", vous pouvez cacher de l'information dans l'HTML. Par exemple, chaque bouton ",r.createElement(n.strong,null,"Delete")," pourrait contenir un ",r.createElement(n.strong,null,"data-attribute")," √©tant l'id du film. Il est aussi possible d'utiliser la propri√©t√© ",r.createElement(n.strong,null,"id")," du bouton."),"\n"),"\n",r.createElement(n.p,null,"Comment g√©rer la mise √† jour des donn√©es d'un film ?"),"\n",r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"Option 1 (la plus cool √† d√©couvrir üòâ) : Vous pourriez faire en sorte que l'HTML du tableau affichant les films, lors d'un clic, devienne √©ditable. Pour cette option :","\n",r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"Voici, √† quoi pourrait ressembler votre application √† la fin de l'exercice. Vous avez bien s√ªr la libert√© de faire quelque chose de totalement diff√©rent visuellement !"),"\n"),"\n",r.createElement(c,{name:"movies.png",minWidth:"700px",maxWidth:"1268px"}),"\n",r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"Veuillez noter que contrairement au frontend pr√©c√©dent r√©alis√©e √† l'Exercice 3.1, l'info ",r.createElement(n.strong,null,"title")," et ",r.createElement(n.strong,null,"link")," ne sont plus int√©gr√©es dans une m√™me colonne, via des hyperlinks ; avec l'option 1, nous devrions consid√©rer deux colonnes, une pour le titre et l'autre pour le lien."),"\n",r.createElement(n.li,null,"Vous pouvez utiliser la propri√©t√© HTML ",r.createElement(n.strong,null,'contenteditable="true"')," pour rendre les cellules du tableau √©ditables. Voici un exemple pour rendre une cellule associ√©e au titre √©ditable :"),"\n"),"\n",r.createElement(n.pre,{highlighting:"1"},r.createElement(n.code,{className:"language-js"},'<td class="fw-bold text-info" contenteditable="true">${\r\n            element.title\r\n}</td>\n')),"\n",r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"Pour acc√©der aux cellules qui se trouvent dans une m√™me ligne que vous mettez √† jour, vous pouvez utiliser la DOM API de votre browser :","\n",r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"on obtient le parent d'un √©l√©ment HTML via l'attribut ",r.createElement(n.strong,null,"parentElement")," ; par exemple, si vous avez un √©couteur d'√©v√©nements de clics sur un bouton ",r.createElement(n.strong,null,"Save"),", ce bouton se trouvant au sein d'une ",r.createElement(n.strong,null,"td")," qui se trouve elle-m√™me au sein d'une ",r.createElement(n.strong,null,"tr")," : ",r.createElement(n.strong,null,r.createElement(n.code,null,"e.target.parentElement.parentElement")),"  donne acc√®s √† la ",r.createElement(n.strong,null,"tr")," associ√©e au bouton ",r.createElement(n.strong,null,"Save")," sur lequel on a cliqu√©."),"\n",r.createElement(n.li,null,"on acc√®de aux enfants d'un √©l√©ment HTML via l'attribut ",r.createElement(n.strong,null,"children")," ; par exemple, ",r.createElement(n.strong,null,r.createElement(n.code,null,"tr.children[0]"))," donne acc√®s √† la premi√®re ",r.createElement(n.strong,null,"td")," au sein de ",r.createElement(n.strong,null,"tr"),"."),"\n"),"\n"),"\n",r.createElement(n.li,null,"Vous pourriez avoir un bouton ",r.createElement(n.strong,null,"Save")," pour chaque ligne du tableau affichant un film. Lors d'un clic sur un bouton ",r.createElement(n.strong,null,"Save"),", vous faites appel √† l'API en faisant la requ√™te de mettre √† jour toutes les propri√©t√©s du film, m√™me celle n'ayant pas de nouvelles valeurs."),"\n",r.createElement(n.li,null,"Attention, pour une requ√™te de type ",r.createElement(n.strong,null,"PUT")," (mise √† jour de toutes les propri√©t√©s d'une ressource) ou de type ",r.createElement(n.strong,null,"PATCH")," (mise √† jour partielle d'une ressource), vous devez indiquer l'id dans l'URL du ",r.createElement(n.strong,null,"fetch"),", et la repr√©sentation de donn√©es √† mettre √† jour doit se trouver dans le body de la requ√™te (ce sont les conventions REST que nous avons fix√©es dans le cadre de ce cours)."),"\n",r.createElement(n.li,null,"Si vous aviez besoin de r√©aliser une action en cas de changement du contenu d'une cellule dont ",r.createElement(n.strong,null,"contenteditable")," est activ√©, vous pouvez g√©rer le type d'√©v√©nement ",r.createElement(n.strong,null,"input"),"."),"\n"),"\n"),"\n"),"\n",r.createElement("br"),"\n",r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"Option 2 : il est aussi possible de cr√©er un nouveau composant Javascript (une page, une modal ou autre) qui reprendrait un formulaire dont les inputs contiendraient d√©j√† les valeurs existantes des propri√©t√©s d'un film."),"\n"),"\n",r.createElement(n.p,null,"Veuillez faire un ",r.createElement(n.strong,null,"commit"),' de votre code avec le message suivant :\r\n"',r.createElement(n.strong,null,"myMovies : module 6 : full integration with RESTful API"),'"".'),"\n",r.createElement(n.p,null,"NB : Le code de votre application web se trouve dans votre repository local et\r\nvotre web repository (normalement appel√© ",r.createElement(n.strong,null,"web2"),") dans le r√©pertoire nomm√©\r\n",r.createElement(n.strong,null,"/exercises/module6/6.2"),"."),"\n",r.createElement(n.h1,null,r.createElement(i,null," Exercice 2.13 : Autorisation de nouvelles origines via la RESTful API ")),"\n",r.createElement(n.p,null,"S'il vous reste du temps, n'h√©sitez pas √† mettre √† jour l'API se trouvant dans ",r.createElement(n.strong,null,"/exercises/module5/5.2")," afin d'autoriser toutes les origines locales : faites en sorte que tous les ports soient autoris√©s !"),"\n",r.createElement(n.p,null,"Veuillez ensuite cr√©er une copie de votre frontend d√©velopp√© √† l'exercice pr√©c√©dent (Exercice 6.1) et le mettre √† jour pour ne plus utiliser le proxy du frontend. Vous consommez directement l'API en indiquant son URL compl√®te, y compris le port. Par exemple, pour lire les pizzas du menu, vous faites un fetch √† l'URL : ",r.createElement(n.code,null,"http://localhost:300/pizzas"),"."),"\n",r.createElement(n.p,null,"Une fois l'API mise √† jour, veuillez faire un ",r.createElement(n.strong,null,"commit"),' de votre code avec le message suivant :\r\n"',r.createElement(n.strong,null,"myMovies : module 6 : cors"),'"".'),"\n",r.createElement(n.p,null,"Le code de votre API se trouve dans votre repository local et\r\nvotre web repository (normalement appel√© ",r.createElement(n.strong,null,"web2"),") dans le r√©pertoire nomm√©\r\n",r.createElement(n.strong,null,"/exercises/module6/6.3/api-cors"),"."),"\n",r.createElement(n.p,null,"Une fois le frontend mis √† jour, veuillez faire un ",r.createElement(n.strong,null,"commit"),' de votre code avec le message suivant :\r\n"',r.createElement(n.strong,null,"myMovies : module 6 : integration with RESTful API without proxy"),'"".'),"\n",r.createElement(n.p,null,"Le code de votre application web se trouve dans votre repository local et\r\nvotre web repository (normalement appel√© ",r.createElement(n.strong,null,"web2"),") dans le r√©pertoire nomm√©\r\n",r.createElement(n.strong,null,"/exercises/module6/6.3/hmi-no-proxy"),"."))}var s=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,l.ah)(),e.components);return n?r.createElement(n,e,r.createElement(a,e)):a(e)};function o(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}var u=t(4854),i=t(5583),c=t(5679),m=t(307),d=t(7410),p=t(9523),E=t(8075),g=t(9063),v=t(1631),f=t(5772),h=t(2770),b=t(7008),q=t(9771),x=t(1218),z=(t(5258),t(9394)),P=t(4579),I=t(9416),y=t(9256),S=t(6488),A=t(5175),w=t(6387),j=t(6044);const k={Link:u.Link,Image:c.Z,Section:m.Z,Content:d.Z,Background:p.Z,SectionHeader:E.Z,SectionFooter:g.Z,PageHeader:v.Z,CodeBlock:h.Z,LinkFile:b.Z,ScrollableImage:q.Z,PublicProjectsView:x.Z,AuthenticatedBlock:z.Z,UnAuthenticatedBlock:P.Z,NestedMdxBlock:I.Z,YoutubeImage:y.Z,InternalPageMenu:S.Z,InternalPageMenuItem:A.Z,InternalPageTitle:w.Z,PathViewer:j.k,PathViewerItem:j.F};function C(e){var n,t,a,s,o;let{data:{mdx:u,allImages:c},children:m}=e;return k.PageHeader=(0,f.u)(v.Z,null==u?void 0:u.frontmatter),r.createElement(i.Z,Object.assign({},null!=u&&u.frontmatter?{frontmatter:u.frontmatter}:{},null!=u&&null!==(n=u.frontmatter)&&void 0!==n&&n.navbarExtraStyles?{navbarExtraStyles:u.frontmatter.navbarExtraStyles}:{},null!=u&&null!==(t=u.frontmatter)&&void 0!==t&&t.headerImage?{headerImage:u.frontmatter.headerImage}:{},null!=u&&null!==(a=u.frontmatter)&&void 0!==a&&a.featuredImage?{featuredImage:u.frontmatter.featuredImage}:{},null!=u&&null!==(s=u.frontmatter)&&void 0!==s&&s.title?{pageTitle:u.frontmatter.title}:{},c&&c.length>0?{allImages:c}:{}),r.createElement(l.Zo,{components:k},r.createElement("div",{className:null!=u&&null!==(o=u.frontmatter)&&void 0!==o&&o.autoMargin?"page page--auto-margin":"page"},m)))}function R(e){return r.createElement(C,e,r.createElement(s,e))}}}]);
//# sourceMappingURL=component---src-templates-mdx-pages-js-content-file-path-src-mdx-pages-part-2-comms-security-fr-mdx-f8f4ae66224f6c95d7ae.js.map